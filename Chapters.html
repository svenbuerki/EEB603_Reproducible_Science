<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Sven Buerki - Boise State University" />

<meta name="date" content="2021-10-03" />

<title>EEB 603 – Reproducible Science</title>

<script src="site_libs/header-attrs-2.6/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="site_libs/viz-1.8.2/viz.js"></script>
<link href="site_libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="site_libs/grViz-binding-1.0.6.1/grViz.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Reproducible Science</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="Timetable.html">Timetable</a>
</li>
<li>
  <a href="Chapters.html">Chapters</a>
</li>
<li>
  <a href="Resources.html">Resources</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">EEB 603 – Reproducible Science</h1>
<h3 class="subtitle">Chapters</h3>
<h4 class="author">Sven Buerki - Boise State University</h4>
<h4 class="date">2021-10-03</h4>

</div>


<script type="text/javascript">
$(document).ready(function() {
  $('#header').parent().prepend('<div id=\"logo\"><img src=\"Images/boisestate-primarylogo-2color-rgb.png\" style=\"position:absolute; top:0; right:0; padding:10px; height:120px\"></div>');
  $('#header').css('margin-right', '120px')
});
</script>
<div id="chap1" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Chapter 1</h1>
<div id="introduction" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Introduction</h2>
<p>In this chapter, we will introduce the bioinformatic tools to write and disseminate reproducible reports as implemented in RStudio. More specifically, we will learn procedures to link and execute data and code into a unified environment (see Figure <a href="#fig:ReproScience">1.1</a>). This chapter focuses on learning the R Markdown syntax and protocols allowing to include text, code, figures, tables and bibliography into a document. This document will then be compiled into an output file (in either <code>pdf</code>, <code>HTML</code> or <code>Word</code> formats) allowing sharing your research. More specifically, this tutorial provides students with the minimum knowledge allowing them to complete their bioinformatic tutorials (PART 2) and individual projects (PART 3). The chapter will be subdivided into four parts as follows:</p>
<ul>
<li><a href="#partA"><strong>PART A:</strong></a> Learning the basics.</li>
<li><a href="#partB"><strong>PART B:</strong></a> Tables, Figures and References.</li>
<li><a href="#partC"><strong>PART C:</strong></a> Advanced R Markdown settings.</li>
<li><a href="#partD"><strong>PART D:</strong></a> User Defined Functions in R.</li>
<li><a href="#partE"><strong>PART E:</strong></a> Interactive tutorials.</li>
</ul>
<div class="figure"><span id="fig:ReproScience"></span>
<img src="Figures/Fig1.png" alt="The spectrum of reproducibility." width="100%" />
<p class="caption">
Figure 1.1: The spectrum of reproducibility.
</p>
</div>
<div id="learning-outcomes" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Learning outcomes</h3>
<p>This chapter provides students with opportunities to learn procedures to:</p>
<ul>
<li>Install R Markdown on your computer.</li>
<li>Create and render (or knitting) your first R Markdown document.</li>
<li>Execute basic R Markdown syntax and protocols.</li>
<li>Develop pseudocode and implement it using the R language.</li>
<li>Create your own functions (referred to as user-defined functions).</li>
</ul>
</div>
<div id="Files" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Files supporting this tutorial</h3>
<p>Although less used in PART A, a set of files are provided to support teaching of material presented in this chapter. These files are deposited in the shared Google Drive at this path:</p>
<ul>
<li><code>Reproducible_Science/Chapters/Chapter_1/Tutorial_files</code></li>
</ul>
<p>Files are as follows:</p>
<ul>
<li><code>EEB603_Syllabus_BUERKI.Rmd</code>: This is the <code>.Rmd</code> file used to compile the syllabus of this class. This file provides a good source of information for the syntax and protocols described in this tutorial.</li>
<li><code>Bibliography_Reproducible_Science_2.bib</code>: This file contains references cited in <code>BibTex</code> format.</li>
<li><code>AmJBot.csl</code>: This citation style language (CSL) file allows formatting citations and bibliography following citation style of <em>American Journal of Botany</em>.</li>
<li><code>Bioinformatic workflow_PART2.pdf</code>: A <code>pdf</code> file containing the bioinformatic workflow taught in this class. This file will be used to learn how to incorporate a figure into R Markdown file.</li>
</ul>
</div>
<div id="install-r-markdown-software" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Install R Markdown software</h3>
<p>Software and packages required to perform this tutorial are detailed below. Students should install those software and packages on their personal computers to be able to complete this course. Additional packages might need to be installed and the instructor will provide guidance on how to install those as part of the forthcoming tutorials.</p>
<ul>
<li><strong>R</strong>: <a href="https://www.r-project.org" class="uri">https://www.r-project.org</a></li>
<li><strong>R packages</strong>: <code>bookdown</code>, <code>knitr</code> and <code>R Markdown</code>. Use the following R command to install those packages:</li>
</ul>
<pre class="r"><code>install.packages(c(&quot;bookdown&quot;, &quot;knitr&quot;, &quot;rmarkdown&quot;))</code></pre>
<ul>
<li><strong>RStudio</strong>: <a href="https://www.rstudio.com/products/rstudio/download/" class="uri">https://www.rstudio.com/products/rstudio/download/</a></li>
<li><strong>TeX</strong>: This software is required to compile document into <code>pdf</code> format. Please install MiKTeX on Windows, MacTeX on OS X and TeXLive on Linux.</li>
</ul>
</div>
<div id="rstudio" class="section level3" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> RStudio</h3>
<p>RStudio is an integrated development environment (IDE) that allows you to interact with R more readily. RStudio is similar to the standard RGUI, but it is considerably more user friendly. It has more drop-down menus, windows with multiple tabs, and many customization options (see Figure <a href="#fig:IDE">1.2</a>). Detailed information on using RStudio can be found at at <a href="https://support.rstudio.com/hc/en-us/sections/200107586-Using-RStudio">RStudio’s website</a>.</p>
<div class="figure"><span id="fig:IDE"></span>
<img src="Figures/IDE.png" alt="Snapshot of the RStudio environment showing the four windows and their content." width="100%" />
<p class="caption">
Figure 1.2: Snapshot of the RStudio environment showing the four windows and their content.
</p>
</div>
</div>
<div id="web-resources" class="section level3" number="1.1.5">
<h3><span class="header-section-number">1.1.5</span> Web resources</h3>
<p>Please find below URLs to webpages that are providing key information for chapter 1:</p>
<ul>
<li><strong>R Markdown:</strong> <a href="https://RMarkdown.rstudio.com" class="uri">https://RMarkdown.rstudio.com</a></li>
<li><strong>R Markdown: The Definitive Guide (by Yihui Xie, J. J. Allaire, Garrett Grolemund):</strong> <a href="https://bookdown.org/yihui/RMarkdown/" class="uri">https://bookdown.org/yihui/RMarkdown/</a></li>
<li><strong>Write HTML, PDF, ePub, and Kindle books with R Markdown:</strong> <a href="https://bookdown.org" class="uri">https://bookdown.org</a></li>
<li><strong>bookdown: Authoring Books and Technical Documents with R Markdown (by Yihui Xie):</strong> <a href="https://bookdown.org/yihui/bookdown/" class="uri">https://bookdown.org/yihui/bookdown/</a></li>
<li><strong>knitr:</strong> <a href="http://yihui.name/knitr/" class="uri">http://yihui.name/knitr/</a></li>
<li><strong>Pandoc: A universal document converter:</strong> <a href="https://pandoc.org" class="uri">https://pandoc.org</a></li>
<li><strong>Bibliographies and Citations in R Markdown:</strong> <a href="https://RMarkdown.rstudio.com/authoring_bibliographies_and_citations.html" class="uri">https://RMarkdown.rstudio.com/authoring_bibliographies_and_citations.html</a></li>
<li><strong>Tutorial on knitr with R Markdown (by Karl Broman):</strong> <a href="http://kbroman.org/knitr_knutshell/pages/RMarkdown.html" class="uri">http://kbroman.org/knitr_knutshell/pages/RMarkdown.html</a></li>
</ul>
</div>
</div>
<div id="partA" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> PART A: Learning the basics</h2>
<p>In this part, we will provide a survey of the procedures to create and render (or knitting) your first R Markdown document.</p>
<div id="introduction-to-r-markdown" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Introduction to R Markdown</h3>
<p>Markdown is a simple formatting syntax language used for authoring HTML, PDF, and MS Word documents, which is implemented in the <code>rmarkdown</code> package. An R Markdown document is usually subdivided into three sections (see Figure <a href="#fig:RMdown">1.3</a>):</p>
<ol style="list-style-type: decimal">
<li><strong>YAML metadata section:</strong> This section provides high level information about the output format of the R Markdown file. Information stored in this section will be used by the Pandoc program to format the output document (see Figure <a href="#fig:RMdown">1.3</a>).</li>
<li><strong>Publication core text:</strong> This section represents the core of your document/publication and uses Markdown syntax.</li>
<li><strong>Code chunk:</strong> This section allows to import and analyze data as well as produce figures and tables that will be directly displayed in the output file.</li>
</ol>
<div class="figure"><span id="fig:RMdown"></span>
<img src="Figures/Presentation_RMarkdown.png" alt="Example of an R Markdown file showing the three major sections." width="100%" />
<p class="caption">
Figure 1.3: Example of an R Markdown file showing the three major sections.
</p>
</div>
</div>
<div id="creating-an-r-markdown-file" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Creating an R Markdown file</h3>
<div class="figure" style="text-align: center"><span id="fig:RMdownscreen"></span>
<img src="Figures/Create_RMarkdown.png" alt="Snapshot of window to create an R Markdown file." width="40%" />
<p class="caption">
Figure 1.4: Snapshot of window to create an R Markdown file.
</p>
</div>
<p>To create an R Markdown document execute the following steps in RStudio:</p>
<ol style="list-style-type: decimal">
<li>Select: <code>File -&gt; New File -&gt; R Markdown...</code></li>
<li>Provide title for the document and define <code>Default output format</code> (see Figure <a href="#fig:RMdownscreen">1.4</a>).
If you want to knit your document in <code>pdf</code> format, a version of the <code>TeX</code> program has to be installed on your computer (see Figure <a href="#fig:RMdownscreen">1.4</a>).</li>
<li>Save the <code>.Rmd</code> document (using <code>File -&gt; Save As...</code>). Save this file in a new folder devoted to the project (<strong>Warning:</strong> Knitting the document will generate several files).</li>
</ol>
</div>
<div id="rendering-or-knitting-an-r-markdown-document" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Rendering (or knitting) an R Markdown document</h3>
<p>To render or knit <img src="Figures/knit_2.png" /> your R Markdown document/script into the format specified in the YAML metadata section do the following steps in RStudio:</p>
<ol style="list-style-type: decimal">
<li>Select the <code>Knit</code> button (Figure <a href="#fig:RMdown">1.3</a>) in the upper bar of your window to render document.</li>
<li>There are several options depending on the output format; however if you just push the button it will automatically knit the document following settings provided in the YAML metadata section (Figure <a href="#fig:RMdown">1.3</a>).</li>
<li>The output file will automatically be created in the same directory as the <code>.Rmd</code> file. You can track progress in the <code>R Markdown</code> console. If the knitting fails, error messages will be printed in the <code>R Markdown</code> console (including information on which line of the script the error occurred, but it might not always be the case). Error messages are very useful to debug your R Markdown document.</li>
</ol>
</div>
<div id="how-does-the-knitting-process-work" class="section level3" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> <a name="compilation"></a>How does the knitting process work?</h3>
<p>When you knit your document, R Markdown will feed the <code>.Rmd</code> file to the R <em>knitr</em> package, which executes all of the code chunks and creates a new markdown (<code>.md</code>) document. This latter document includes the code and its output (Figure <a href="#fig:Rflow">1.5</a>). The markdown file generated by <code>knitr</code> is then processed by the Pandoc program, which is responsible for creating the finished format (Figure <a href="#fig:Rflow">1.5</a>).</p>
<div class="figure"><span id="fig:Rflow"></span>
<img src="Figures/rmarkdownflow.png" alt="R Markdown flow." width="100%" />
<p class="caption">
Figure 1.5: R Markdown flow.
</p>
</div>
</div>
<div id="basic-r-markdown-syntax-and-protocols" class="section level3" number="1.2.5">
<h3><span class="header-section-number">1.2.5</span> Basic R Markdown syntax and protocols</h3>
<p>We will focus here on learning the syntax and protocols to produce:</p>
<ul>
<li>Headers.</li>
<li>Lists.</li>
<li>Italicize and bold words.</li>
<li>Embed code chunks and inline code.</li>
<li>Check spelling.</li>
</ul>
<p>More syntax are available in the R Markdown Reference Guide. You can access this document as follows in RStudio:</p>
<ul>
<li>Select: <code>Help -&gt; Cheatsheets -&gt; R Markdown Reference Guide</code></li>
</ul>
<p><strong>Notice:</strong> The Cheatsheet section also allows accessing additional supporting documents related to R Markdown and Data manipulation. Those documents will be very useful for this class.</p>
</div>
<div id="headers" class="section level3" number="1.2.6">
<h3><span class="header-section-number">1.2.6</span> Headers</h3>
<p>Please find below the syntax to create headers (3 levels):</p>
<p>Syntax:</p>
<pre class="r"><code>The &quot;#&quot; refers to the level of the header
# Header 1  
## Header 2  
### Header 3  </code></pre>
</div>
<div id="lists" class="section level3" number="1.2.7">
<h3><span class="header-section-number">1.2.7</span> Lists</h3>
<p>There are two types of lists:</p>
<ul>
<li>Unordered</li>
<li>Ordered</li>
</ul>
<div id="syntax-for-unordered-lists" class="section level4" number="1.2.7.1">
<h4><span class="header-section-number">1.2.7.1</span> Syntax for unordered lists</h4>
<p>Syntax:</p>
<pre class="r"><code>* unordered list
* item 2
  + sub-item 1
  + sub-item 2</code></pre>
<p><strong>Note:</strong> For each sub-level include two tabs to create the hierarchy.</p>
<p>Output:</p>
<ul>
<li>unordered list</li>
<li>item 2
<ul>
<li>sub-item 1</li>
<li>sub-item 2</li>
</ul></li>
</ul>
</div>
<div id="syntax-for-ordered-lists" class="section level4" number="1.2.7.2">
<h4><span class="header-section-number">1.2.7.2</span> Syntax for ordered lists</h4>
<p>Syntax:</p>
<pre class="r"><code>1. ordered list
2. item 2
   + sub-item 1
   + sub-item 2</code></pre>
<p>Output:</p>
<ol style="list-style-type: decimal">
<li>ordered list</li>
<li>item 2
<ul>
<li>sub-item 1</li>
<li>sub-item 2</li>
</ul></li>
</ol>
</div>
</div>
<div id="italicize-and-bold-words" class="section level3" number="1.2.8">
<h3><span class="header-section-number">1.2.8</span> Italicize and bold words</h3>
<p>The following syntax will render text in italics or bold:</p>
<pre class="r"><code>#Syntax for italics
*italics*

#Syntax for bold
**bold**</code></pre>
</div>
<div id="embed-code-chunks-and-inline-code" class="section level3" number="1.2.9">
<h3><span class="header-section-number">1.2.9</span> Embed code chunks and inline code</h3>
<p>One of the most exciting features of working with the R Markdown format is the implementation of functions allowing to directly “plug” the output of R code into the compiled document (see Figure <a href="#fig:Rflow">1.5</a>). In other words, when you compile your <code>.Rmd</code> file, R Markdown will automatically run and process each code chunk and code lines and embed their results in your final document. If the output of the code is a table or a figure, you will be able to assign a label to this item (by adding information in the code chunk; see part B) and refer to it (= cross-referencing) in your <code>pdf</code> or <code>html</code> document. Cross-referencing is possible thanks to the <code>\@ref()</code> function implemented in the R <code>bookdown</code> package.</p>
<div id="code-chunk" class="section level4" number="1.2.9.1">
<h4><span class="header-section-number">1.2.9.1</span> Code chunk</h4>
<p>A code chunk could easily be inserted in your document as follows:</p>
<ul>
<li>Using the keyboard shortcut <strong>Ctrl + Alt + I</strong> (OS X: <strong>Cmd + Option + I</strong>).</li>
<li>Pressing on the <code>Insert</code> button <img src="Figures/insert.png" /> in the editor toolbar.</li>
<li>Typing ```{r} and ````.</li>
</ul>
<p>By default the code chunk will expect R code, but you can also insert code chunks supporting different computer languages (e.g. Bash, Python).</p>
</div>
<div id="chunk-options" class="section level4" number="1.2.9.2">
<h4><span class="header-section-number">1.2.9.2</span> Chunk options</h4>
<p>Chunk output can be customized with <em>knitr</em> options arguments set in the <code>{}</code> of a chunk header. In the examples displayed in Figure <a href="#fig:RChunk">1.6</a> five arguments are used:</p>
<ul>
<li><code>include = FALSE</code> prevents code and results from appearing in the finished file. R Markdown still runs the code in the chunk, and the results can be used by other chunks.</li>
<li><code>echo = FALSE</code> prevents code, but not the results from appearing in the finished file. This is a useful way to embed figures.</li>
<li><code>message = FALSE</code> prevents messages that are generated by code from appearing in the finished file.</li>
<li><code>warning = FALSE</code> prevents warnings that are generated by code from appearing in the finished.</li>
<li><code>fig.cap = "..."</code> adds a caption to graphical results.</li>
</ul>
<p>We will delve more into chunk options in part C of chapter 1, but in the meantime please see the R Markdown Reference Guide for more details.</p>
<div class="figure"><span id="fig:RChunk"></span>
<img src="Figures/code-1-options.png" alt="Example of code chunks." width="100%" />
<p class="caption">
Figure 1.6: Example of code chunks.
</p>
</div>
</div>
</div>
<div id="inline-code" class="section level3" number="1.2.10">
<h3><span class="header-section-number">1.2.10</span> Inline code</h3>
<p>Code results can be inserted directly into the text of a <code>.Rmd</code> file by enclosing the code with <code>r</code>.</p>
<p>R Markdown will always:</p>
<ul>
<li>Display the results of inline code, but not the code.</li>
<li>Apply relevant text formatting to the results.</li>
</ul>
<p>As a result, inline output is indistinguishable from the surrounding text. <strong>Warning:</strong> Inline expressions do not take <em>knitr</em> options and is therefore less versatile. We usually use inline code to perform simple stats (e.g. 4x4; 16)</p>
</div>
<div id="check-spelling" class="section level3" number="1.2.11">
<h3><span class="header-section-number">1.2.11</span> Check spelling</h3>
<p>There are three ways to access spell checking in an R Markdown document in RStudio:</p>
<ol style="list-style-type: decimal">
<li>A spell check button <img src="Figures/ABC.png" /> to the right of the save button.</li>
<li><code>Edit &gt; Check Spelling...</code></li>
<li>The F7 key.</li>
</ol>
</div>
<div id="exercises" class="section level3" number="1.2.12">
<h3><span class="header-section-number">1.2.12</span> Exercises</h3>
<p>Students will work individually to complete the following exercises:</p>
<ol style="list-style-type: decimal">
<li>Create an <code>*.Rmd</code> file entitled <code>Exercises chapter 1: part A</code> and select <code>HTML</code> as output format.</li>
<li>Save this document as <code>Exe_chap1_partA.Rmd</code> in a sub-folder called <code>Exercises</code> located in:</li>
</ol>
<ul>
<li><code>Reproducible_Science/Chapters/Chapter_1</code></li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Practice syntax to do:</li>
</ol>
<ul>
<li>headers,</li>
<li>lists,</li>
<li>include R code chunk and inline code.</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Confirm that your syntax works by knitting your document and inspecting the output.</li>
</ol>
<p>To further learn syntax and protocols, please look at associated files provided by the instructor (see above for more details).</p>
</div>
</div>
<div id="partB" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> PART B: Tables, Figures and References</h2>
<p>The aim of this tutorial is to provide students with the expertise to generate reproducible reports using <em>bookdown</em> <span class="citation">(<a href="#ref-bookdown2016" role="doc-biblioref">Xie, 2016</a>, <a href="#ref-R-bookdown" role="doc-biblioref">2020a</a>)</span> and allied R packages (see <a href="#appendix-1">Appendix 1</a> for a full list). Unlike functions implemented in the R <em>rmarkdown</em> package <span class="citation">(<a href="#ref-rmarkdown2018" role="doc-biblioref">Xie et al., 2018</a>, which was better suited to generating <code>PDF</code> reproducible reports)</span>, <em>bookdown</em> allows to use ONE unified set of functions to generate <code>HTML</code> and <code>PDF</code> documents. In addition, the same approach and functions are used to process tables and figures as well as cross-reference those in the main body of the text. In this tutorial, we will also cover procedures to cite references in the text, automatically generate a bibliography/references section and format citations to journal styles as well as generating an Appendix containing citations of all R packages used to conduct your research (and produce the report).</p>
<div id="learning-outcomes-1" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Learning outcomes</h3>
<p>This tutorial is devoted to part B of chapter 1 and provides students with opportunities to learn procedures to:</p>
<ul>
<li>Set your R Markdown environment:
<ul>
<li>Install dependencies.</li>
<li>YAML metadata section.</li>
<li>Load required R packages.</li>
<li>Generate citation file of R packages used to produce the report.</li>
<li>Generate Appendix with citations for all R packages.</li>
<li>Generate Appendix with R package versions used to produce report.</li>
</ul></li>
<li>Insert tables and figures in R Markdown document.</li>
<li>Cross-reference tables and figures in the text.</li>
<li>Cite references in the text and add a bibliography/references section.</li>
<li>Format citations to journal styles.</li>
</ul>
</div>
<div id="associated-files-supporting-this-tutorial" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Associated files supporting this tutorial</h3>
<p>Please refer to <a href="#Files">section</a> for more details on supporting files and their locations on the shared Google Drive.</p>
</div>
<div id="set-your-r-markdown-environment" class="section level3" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Set your R Markdown environment</h3>
<div id="install-dependencies" class="section level4" number="1.3.3.1">
<h4><span class="header-section-number">1.3.3.1</span> Install dependencies</h4>
<p>To execute this tutorial the following R packages have to be installed on your computer using code provided below:</p>
<pre class="r"><code>install.packages(c(&quot;knitr&quot;, &quot;rmarkdown&quot;, &quot;bookdown&quot;, &quot;formattable&quot;, 
    &quot;kableExtra&quot;, &quot;dplyr&quot;, &quot;magrittr&quot;, &quot;prettydoc&quot;, &quot;htmltools&quot;, 
    &quot;knitcitations&quot;))</code></pre>
</div>
<div id="tex-distribution" class="section level4" number="1.3.3.2">
<h4><span class="header-section-number">1.3.3.2</span> TeX distribution</h4>
<p>If you are planning to create <code>PDF</code> documents, you will need to install a <code>TeX</code> distribution on your computers. Please refer to this website for more details: <a href="https://www.latex-project.org/get/" class="uri">https://www.latex-project.org/get/</a></p>
<div id="set-miktex-for-compiling-pdf-documents-on-windows-computers" class="section level5" number="1.3.3.2.1">
<h5><span class="header-section-number">1.3.3.2.1</span> Set MiKTeX for compiling PDF documents on Windows computers</h5>
<p>Several students working on Windows computers shared difficulties in compiling <code>PDF</code> documents in RStudio. This issue is associated to <code>MiKTeX</code> preventing RStudio to install or update <code>TeX</code> packages required to knit your documents.</p>
<p>To solve this issue apply the following procedure:</p>
<ol style="list-style-type: decimal">
<li>Start <code>MiKTeX</code> console by searching and clicking <code>MiKTeX Console</code> in the application launcher.</li>
<li>Enable automatic package installation by:</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>Clicking on <code>Settings</code> tab.</li>
<li>Ticking the radio button <code>Always install missing packages on-the-fly</code> under the “You can choose whether missing packages are to be installed on-the-fly” header ().</li>
</ol>
<ol start="3" style="list-style-type: decimal">
<li>Restarting <code>RStudio</code> and you should be able to knit <code>pdf</code> documents.</li>
</ol>
<div class="figure"><span id="fig:MikTex"></span>
<img src="Figures/MikTex.png" alt="Snapshot of the MikTex Console showing the procedure to always install packages on-the-fly." width="100%" />
<p class="caption">
Figure 1.7: Snapshot of the MikTex Console showing the procedure to always install packages on-the-fly.
</p>
</div>
</div>
</div>
<div id="yaml-metadata-section" class="section level4" number="1.3.3.3">
<h4><span class="header-section-number">1.3.3.3</span> YAML metadata section</h4>
<p>The YAML metadata section allows users to provide arguments (refereed to as fields) to convert their R Markdown document into its final form. Here, we will be using functions implemented in the <em>knitr</em> <span class="citation">(<a href="#ref-knitr2015" role="doc-biblioref">Xie, 2015</a>, <a href="#ref-R-knitr" role="doc-biblioref">2020b</a>)</span> and <em>bookdown</em> packages <span class="citation">(<a href="#ref-bookdown2016" role="doc-biblioref">Xie, 2016</a>, <a href="#ref-R-bookdown" role="doc-biblioref">2020a</a>)</span> to define (field names as declared in the YAML metadata section are provided between parenthesis):</p>
<ol style="list-style-type: decimal">
<li>Title (<code>title</code>).</li>
<li>Subtitle (<code>subtitle</code>).</li>
<li>Author(s) (<code>author</code>).</li>
<li>Date (<code>date</code>).</li>
<li>Output format(s) (<code>output</code>).</li>
<li>Citations link (<code>link-citations</code>).</li>
<li>Font size (<code>fontsize</code>).</li>
<li>Bibliography file(s) (<code>bibliography</code>).</li>
<li>Format for citations to follow journal styles (<code>csl</code>).</li>
</ol>
<p>The YAML code provided below outputs either an <code>HTML</code> or <code>PDF</code> document (see <code>output</code> field) with a table of content (see <code>toc</code> field) and generates in text citations and bibliography section as declared in the <code>AmJBot.csl</code> file (under the <code>csl</code> field).</p>
<pre class="r"><code>--- 
title: &#39;Your title&#39;
subtitle: &quot;Your subtitle&quot;
author: &quot;Your name&quot;
date: &quot;`r Sys.Date()`&quot;
output:
  bookdown::html_document2: 
    toc: TRUE
  bookdown::pdf_document2:
    toc: TRUE
link-citations: yes
fontsize: 12pt
bibliography: [Bibliography_Reproducible_Science_2.bib, packages.bib] 
csl: AmJBot.csl
---</code></pre>
<p><strong>Warning:</strong> <code>.bib</code> and <code>.csl</code> files have to be stored in the same working directory as your <code>.Rmd</code> file.</p>
<div id="step-by-step-procedure" class="section level5" number="1.3.3.3.1">
<h5><span class="header-section-number">1.3.3.3.1</span> Step-by-step procedure</h5>
<p>Do the following to set your YAML metadata section:</p>
<ol style="list-style-type: decimal">
<li>Create a new R Markdown document.</li>
<li>Save the <code>.Rmd</code> document into a new project folder in <code>Reproducible_Science/Chapters/Chapter_1/</code>.</li>
<li>Copy <code>Bibliography_Reproducible_Science_2.bib</code> and <code>AmJBot.csl</code> in your project folder. These files are available on the Shared Google Drive folder:</li>
</ol>
<ul>
<li><code>Reproducible_Science/Chapters/Chapter_1/Tutorial_files</code></li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Edit the YAML metadata section as shown in the above code.</li>
</ol>
<p><strong>Note:</strong></p>
<ul>
<li>You can use <code>R</code> functions in the YAML metadata section using inline R code (see part A for more details). Here, we use <code>Sys.Date()</code> to automatically date the output document.</li>
<li>The <code>bibliography</code> field includes two <code>BibTeX</code> files, the first contains your regular citations (of publications cited in the text; see <a href="#the-bibliography-file">The bibliography file</a>), whereas the second is generated by <code>knitr::write_bib()</code> and contains citations for all R packages used to generate this report (see below for more details).</li>
</ul>
</div>
</div>
<div id="knitting-procedure" class="section level4" number="1.3.3.4">
<h4><span class="header-section-number">1.3.3.4</span> Knitting procedure</h4>
<p>Since you have declared two output documents in the YAML metadata section and that those are specific to <code>bookdown</code> functions, you will have to select which output format you want to use to compile your document by clicking on the drop-down list on the left side of the <code>Knit</code> button (see Figure <a href="#fig:knitout">1.8</a>). To use <code>bookdown</code> functions, please make sure to select one of the following options (see Figure <a href="#fig:knitout">1.8</a>): <code>Knit to html_document2</code> or <code>Knit to pdf_document2</code>.</p>
<div class="figure" style="text-align: center"><span id="fig:knitout"></span>
<img src="Figures/knit_drop_down.png" alt="Snapshot of RStudio console showing the drop-down list associated to Knit button." width="100%" />
<p class="caption">
Figure 1.8: Snapshot of RStudio console showing the drop-down list associated to Knit button.
</p>
</div>
</div>
<div id="load-required-r-packages" class="section level4" number="1.3.3.5">
<h4><span class="header-section-number">1.3.3.5</span> Load required R packages</h4>
<p>It is best practice to add an R code chunk directly under the YAML metadata section to load all the required R packages used to produce your report. This feature will also allow to automatically generate a citation file with all R packages used to generate your report (see below). Applying this approach will contribute to improving the reproducibility of your research!</p>
<div id="step-by-step-procedure-1" class="section level5" number="1.3.3.5.1">
<h5><span class="header-section-number">1.3.3.5.1</span> Step-by-step procedure</h5>
<ol style="list-style-type: decimal">
<li>Include an R code chunk directly under your YAML metadata section.</li>
<li>Name code chunk <code>packages</code> and set options line as follows:</li>
</ol>
<ul>
<li><code>echo=FALSE</code>,</li>
<li><code>warning=FALSE</code>,</li>
<li><code>include=FALSE</code>.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Add the following code to load required packages to produce your report:</li>
</ol>
<pre><code>#Load packages
library(knitr)
library(rmarkdown)
library(bookdown)
library(formattable)
library(kableExtra)
library(dplyr)
library(magrittr)
library(prettydoc)
library(htmltools)
library(knitcitations)
library(devtools)</code></pre>
</div>
</div>
<div id="generate-citation-file-of-r-packages-used-to-produce-the-report" class="section level4" number="1.3.3.6">
<h4><span class="header-section-number">1.3.3.6</span> Generate citation file of R packages used to produce the report</h4>
<p>I don’t know about you, but I am always struggling to properly cite R packages in my publications. If you want to retrieve the citation for an R package, you can use the base R function <code>citation()</code>. For instance, citations for <em>knitr</em> can be obtained as follow:</p>
<pre class="r"><code># Generate citation for knitr
citation(&quot;knitr&quot;)</code></pre>
<pre><code>## 
## To cite the &#39;knitr&#39; package in publications use:
## 
##   Yihui Xie (2020). knitr: A General-Purpose Package for Dynamic Report
##   Generation in R. R package version 1.30.
## 
##   Yihui Xie (2015) Dynamic Documents with R and knitr. 2nd edition.
##   Chapman and Hall/CRC. ISBN 978-1498716963
## 
##   Yihui Xie (2014) knitr: A Comprehensive Tool for Reproducible
##   Research in R. In Victoria Stodden, Friedrich Leisch and Roger D.
##   Peng, editors, Implementing Reproducible Computational Research.
##   Chapman and Hall/CRC. ISBN 978-1466561595
## 
## To see these entries in BibTeX format, use &#39;print(&lt;citation&gt;,
## bibtex=TRUE)&#39;, &#39;toBibtex(.)&#39;, or set
## &#39;options(citation.bibtex.max=999)&#39;.</code></pre>
<p>If you want to generate those latter citation entries in <a href="#bibtex-format">BibTeX format</a>, you can pass the returned object of <code>citation()</code> to <code>toBibtex()</code> as follows:</p>
<pre class="r"><code># Generate citation for knitr in BibTex format Note that
# there is no citation identifiers. Those will be
# automatically generated in our next code.
toBibtex(citation(&quot;knitr&quot;))</code></pre>
<pre><code>## @Manual{,
##   title = {knitr: A General-Purpose Package for Dynamic Report Generation in R},
##   author = {Yihui Xie},
##   year = {2020},
##   note = {R package version 1.30},
##   url = {https://yihui.org/knitr/},
## }
## 
## @Book{,
##   title = {Dynamic Documents with {R} and knitr},
##   author = {Yihui Xie},
##   publisher = {Chapman and Hall/CRC},
##   address = {Boca Raton, Florida},
##   year = {2015},
##   edition = {2nd},
##   note = {ISBN 978-1498716963},
##   url = {https://yihui.org/knitr/},
## }
## 
## @InCollection{,
##   booktitle = {Implementing Reproducible Computational Research},
##   editor = {Victoria Stodden and Friedrich Leisch and Roger D. Peng},
##   title = {knitr: A Comprehensive Tool for Reproducible Research in {R}},
##   author = {Yihui Xie},
##   publisher = {Chapman and Hall/CRC},
##   year = {2014},
##   note = {ISBN 978-1466561595},
##   url = {http://www.crcpress.com/product/isbn/9781466561595},
## }</code></pre>
<p>To use citation entries generated from <code>toBibtex()</code>, you have to copy the output to a <code>.bib</code> file and save it in your working directory. You will then be able to cite references found in this document directly in your R Markdown. This can be done by adding the following code to your <code>packages</code> R code chunk:</p>
<pre class="r"><code># Generate BibTex citation file for all R packages used to
# produce report
knitr::write_bib(.packages(), file = &quot;packages.bib&quot;)</code></pre>
<p>The <code>.packages()</code> argument returns the names of all packages loaded in the current R session. This makes sure all packages being used will have their citation entries written to the <code>.bib</code> file. Finally, to be able to cite those references (see <a href="#citation-identifier">Citation identifier</a>) in your text, the <a href="#yaml-metadata-section">YAML metadata section</a> has to be edited. See <a href="#appendix-1">Appendix 1</a> for a full list of references associated to the R packages used to generate this report.</p>
</div>
<div id="generate-appendix-with-citations-for-all-r-packages" class="section level4" number="1.3.3.7">
<h4><span class="header-section-number">1.3.3.7</span> Generate Appendix with citations for all R packages</h4>
<p>Although a bibliography/references section will be provided at the end of your document to cite in text references (see <a href="#references-1">References</a>), it is customed to add citations for all R packages used to generate the research in <a href="#appendix-1">Appendix 1</a>. We will learn here the procedure to assemble such Appendix.</p>
<div id="step-by-step-procedure-2" class="section level5" number="1.3.3.7.1">
<h5><span class="header-section-number">1.3.3.7.1</span> Step-by-step procedure</h5>
<ol style="list-style-type: decimal">
<li>Include Appendix after bibliography/references section.</li>
</ol>
<ul>
<li>This is done by using <code>&lt;div id="refs"&gt;&lt;/div&gt;</code> as shown below:</li>
</ul>
<pre class="r"><code># References

&lt;div id=&quot;refs&quot;&gt;&lt;/div&gt;

# (APPENDIX) Appendix {-}

# Appendix 1</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Insert an R code chunk directly under <code># Appendix</code> to read in and print citations saved in <code>packages.bib</code>. This is done as follows:</li>
</ol>
<pre class="r"><code>### Load R package
library(&quot;knitcitations&quot;)
### Process and print citations in packages.bib Clear all
### bibliography that could be in the cash
cleanbib()
# Set pandoc as the default output option for bib
options(citation_format = &quot;pandoc&quot;)
# Read and print bib from file
read.bibtex(file = &quot;packages.bib&quot;)</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Edit your R code chunk options line as follows to correctly print out references:
<code>{r generateBibliography, results="asis", echo=FALSE, warning = FALSE, message=FALSE}</code></li>
<li>Knit your code to check that it produces the right output (see <a href="#knitting-procedure">Knitting procedure</a>). See <a href="#appendix-1">Appendix 1</a> to get an idea of the output.</li>
</ol>
</div>
</div>
<div id="generate-appendix-with-r-package-versions-used-to-produce-report" class="section level4" number="1.3.3.8">
<h4><span class="header-section-number">1.3.3.8</span> Generate Appendix with R package versions used to produce report</h4>
<p>In addition to providing citations to R packages, you might also would like to provide full information on R package versions and your operating systems. With R, the simplest (but a useful and important) approach to document your R environment is to report the output of <code>sessionInfo()</code> (or <code>devtools::session_info()</code>). Among other information, this will show all the packages and their versions that are loaded in the session you used to run your analysis. If someone
wants to recreate your analysis, they will know which packages they will need to install, what versions and on which operating systems the code was executed. For instance, here is the output of <code>sessionInfo()</code> showing the R version and packages that I used to create this document:</p>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 3.6.1 (2019-07-05)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS Mojave 10.14.6
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] DiagrammeR_1.0.6.1   data.tree_1.0.0      kableExtra_1.2.1    
##  [4] dplyr_1.0.2          kfigr_1.2            devtools_2.3.2      
##  [7] usethis_2.0.0        formatR_1.7          knitcitations_1.0.10
## [10] bookdown_0.21        rmarkdown_2.6        knitr_1.30          
## 
## loaded via a namespace (and not attached):
##  [1] tidyselect_1.1.0   xfun_0.20          remotes_2.2.0      purrr_0.3.4       
##  [5] colorspace_2.0-0   generics_0.1.0     vctrs_0.3.6        testthat_3.0.1    
##  [9] viridisLite_0.3.0  htmltools_0.5.0    yaml_2.2.1         rlang_0.4.10      
## [13] pkgbuild_1.2.0     pillar_1.4.7       glue_1.4.2         withr_2.3.0       
## [17] RColorBrewer_1.1-2 sessioninfo_1.1.1  lifecycle_0.2.0    plyr_1.8.6        
## [21] stringr_1.4.0      munsell_0.5.0      rvest_0.3.6        visNetwork_2.0.9  
## [25] htmlwidgets_1.5.3  memoise_1.1.0      evaluate_0.14      callr_3.5.1       
## [29] ps_1.5.0           fansi_0.4.1        highr_0.8          Rcpp_1.0.6        
## [33] scales_1.1.1       desc_1.2.0         pkgload_1.1.0      webshot_0.5.2     
## [37] jsonlite_1.7.2     fs_1.5.0           digest_0.6.27      stringi_1.5.3     
## [41] processx_3.4.5     rprojroot_2.0.2    bibtex_0.4.2.3     cli_2.2.0         
## [45] tools_3.6.1        magrittr_2.0.1     tibble_3.0.4       RefManageR_1.2.12 
## [49] crayon_1.3.4       pkgconfig_2.0.3    ellipsis_0.3.1     xml2_1.3.2        
## [53] prettyunits_1.1.1  lubridate_1.7.9.2  assertthat_0.2.1   httr_1.4.2        
## [57] rstudioapi_0.13    R6_2.5.0           compiler_3.6.1</code></pre>
<p>I have also used the approach described above to add this information in <a href="#appendix-2">Appendix 2</a>.</p>
</div>
</div>
<div id="all-set-good-to-go" class="section level3" number="1.3.4">
<h3><span class="header-section-number">1.3.4</span> All set, good to go!</h3>
<p>We have now set our R Markdown environment and can start populating it! This means that you will be inserting your text and other code chunks directly under the <code>packages</code> code chunk. The <a href="#references-1">References</a> section constitutes the end of the main body of your document. If you want to add Appendices, do so under <a href="#appendix-1">Appendix 1</a>, appendices will be labelled differently from the main body of the document.</p>
</div>
<div id="insert-tables-and-figures-in-r-markdown-document" class="section level3" number="1.3.5">
<h3><span class="header-section-number">1.3.5</span> Insert tables and figures in R Markdown document</h3>
<div id="tables" class="section level4" number="1.3.5.1">
<h4><span class="header-section-number">1.3.5.1</span> Tables</h4>
<p>There will be more details about figures in chapter 9; however this tutorial introduces key concepts related to table making in R Markdown, more specifically on the following topics:</p>
<ul>
<li>Creating a table in R.</li>
<li>Assigning a table caption.</li>
<li>Providing a unique label to the R code chunk allowing further cross-referencing in the text.</li>
<li>Displaying the table in the document.</li>
</ul>
<div id="step-by-step-protocol" class="section level5" number="1.3.5.1.1">
<h5><span class="header-section-number">1.3.5.1.1</span> Step-by-step protocol</h5>
<p>Here, you will learn the R Markdown syntax and R code required to replicate the grading scale presented in the Syllabus (see Table <a href="#tab:tabgrades">1.1</a>):</p>
<table class="table table-striped" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:tabgrades">Table 1.1: </span>Grading scale applied in this class.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Percentage
</th>
<th style="text-align:left;">
Grade
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
100-98
</td>
<td style="text-align:left;">
A+
</td>
</tr>
<tr>
<td style="text-align:left;">
97.9-93
</td>
<td style="text-align:left;">
A
</td>
</tr>
<tr>
<td style="text-align:left;">
92.9-90
</td>
<td style="text-align:left;">
A-
</td>
</tr>
<tr>
<td style="text-align:left;">
89.9-88
</td>
<td style="text-align:left;">
B+
</td>
</tr>
<tr>
<td style="text-align:left;">
87.9-83
</td>
<td style="text-align:left;">
B
</td>
</tr>
<tr>
<td style="text-align:left;">
82.9-80
</td>
<td style="text-align:left;">
B-
</td>
</tr>
<tr>
<td style="text-align:left;">
79.9-78
</td>
<td style="text-align:left;">
C+
</td>
</tr>
<tr>
<td style="text-align:left;">
77.9-73
</td>
<td style="text-align:left;">
C
</td>
</tr>
<tr>
<td style="text-align:left;">
72.9-70
</td>
<td style="text-align:left;">
C-
</td>
</tr>
<tr>
<td style="text-align:left;">
69.9-68
</td>
<td style="text-align:left;">
D+
</td>
</tr>
<tr>
<td style="text-align:left;">
67.9-60
</td>
<td style="text-align:left;">
D
</td>
</tr>
<tr>
<td style="text-align:left;">
59.9-0
</td>
<td style="text-align:left;">
F
</td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>Use the same <code>.Rmd</code> document as above to practice working with tables.</li>
<li>Add a first-level header entitled <code>Tables</code>.</li>
<li>Insert an R code chunk under your header by clicking on the <code>Insert</code> button <img src="Figures/insert.png" /> in the editor toolbar.</li>
<li>Write the following R code in the code chunk:</li>
</ol>
<pre class="r"><code>grades &lt;- data.frame(Percentage = c(&quot;100-98&quot;, &quot;97.9-93&quot;, &quot;92.9-90&quot;, 
    &quot;89.9-88&quot;, &quot;87.9-83&quot;, &quot;82.9-80&quot;, &quot;79.9-78&quot;, &quot;77.9-73&quot;, &quot;72.9-70&quot;, 
    &quot;69.9-68&quot;, &quot;67.9-60&quot;, &quot;59.9-0&quot;), Grade = c(&quot;A+&quot;, &quot;A&quot;, &quot;A-&quot;, 
    &quot;B+&quot;, &quot;B&quot;, &quot;B-&quot;, &quot;C+&quot;, &quot;C&quot;, &quot;C-&quot;, &quot;D+&quot;, &quot;D&quot;, &quot;F&quot;))
knitr::kable(grades, caption = &quot;Grading scale applied in this class.&quot;) %&gt;% 
    kable_styling(c(&quot;striped&quot;, &quot;scale_down&quot;))</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Edit the code chunk options line by adding the following arguments (each argument should be separated by a comma):</li>
</ol>
<ul>
<li><code>echo=FALSE</code></li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>Add the unique label <code>tabgrades</code> in the chunk options line (just after <code>{r</code>) to enable further cross-referencing.</li>
<li>Test your code to check that it produces the expected table (using the <code>Run</code> button).</li>
<li>Knit your document using the <code>Knit</code> button <img src="Figures/knit_2.png" /> on the editor toolbar (remember to select your output format; Figure <a href="#fig:knitout">1.8</a>).</li>
</ol>
</div>
</div>
<div id="figures" class="section level4" number="1.3.5.2">
<h4><span class="header-section-number">1.3.5.2</span> Figures</h4>
<p>There will be more details about figures in chapter 10; however this tutorial introduces key concepts related to figure making in R Markdown, more specifically on the following topics:</p>
<ul>
<li>Creating a figure in R (based on the <code>cars</code> dataset; Figure <a href="#fig:cars">1.9</a>).</li>
<li>Assigning a figure caption.</li>
<li>Providing a unique label to the R code chunk allowing further cross-referencing in the text.</li>
<li>Displaying the figure in the document.</li>
</ul>
<div class="figure"><span id="fig:cars"></span>
<img src="Chapters_files/figure-html/cars-1.png" alt="Plot of cars' speed in relation to distance." width="100%" />
<p class="caption">
Figure 1.9: Plot of cars’ speed in relation to distance.
</p>
</div>
<div id="step-by-step-protocol-1" class="section level5" number="1.3.5.2.1">
<h5><span class="header-section-number">1.3.5.2.1</span> Step-by-step protocol</h5>
<p>Here, you will learn the R Markdown syntax and R code required to replicate Figure <a href="#fig:cars">1.9</a>:</p>
<ol style="list-style-type: decimal">
<li>Use the same <code>.Rmd</code> document as above to practice working with figures.</li>
<li>Add a first-level header entitled <code>Figures</code>.</li>
<li>Insert an R code chunk under your header by clicking on the <code>Insert</code> button <img src="Figures/insert.png" /> in the editor toolbar.</li>
<li>Write the following R code in the code chunk:</li>
</ol>
<pre class="r"><code>summary(cars)
plot(cars)</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Edit the code chunk options line by adding the following arguments (each argument should be separated by a comma):</li>
</ol>
<ul>
<li><code>echo=FALSE</code></li>
<li><code>results="hide"</code></li>
<li><code>fig.cap="Plot of cars' speed in relation to distance."</code></li>
<li><code>out.width = '100%'</code></li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>Add the unique label <code>cars</code> in the chunk options line (just after <code>{r</code>) to enable further cross-referencing.</li>
<li>Test your code to check that it produces the expected plot (using the <code>Run</code> button).</li>
<li>Knit your document using the <code>Knit</code> button <img src="Figures/knit_2.png" /> on the editor toolbar (remember to select your output format; Figure <a href="#fig:knitout">1.8</a>).</li>
</ol>
</div>
</div>
</div>
<div id="cross-reference-tables-and-figures-in-the-text" class="section level3" number="1.3.6">
<h3><span class="header-section-number">1.3.6</span> Cross-reference tables and figures in the text</h3>
<p>Cross-referencing tables and figures in the main body of your R Markdown document can easily be done using the <code>\@ref()</code> function implemented in the <em>bookdown</em> package.</p>
<div id="general-syntax" class="section level4" number="1.3.6.1">
<h4><span class="header-section-number">1.3.6.1</span> General syntax</h4>
<p>The general syntax is as follows:</p>
<pre class="r"><code># Cross-referencing tables in main body of text
\@ref(tab:code_chunk_ID)

# Cross-referencing figures in main body of text
\@ref(fig:code_chunk_ID)</code></pre>
</div>
<div id="step-by-step-procedure-3" class="section level4" number="1.3.6.2">
<h4><span class="header-section-number">1.3.6.2</span> Step-by-step procedure</h4>
<p>To cross-reference the <code>tabgrades</code> table type:</p>
<p><code>\@ref(tab:tabgrades)</code>, which translates into <a href="#tab:tabgrades">1.1</a>.</p>
<p>To cross-reference the <code>cars</code> figure type:</p>
<p><code>\@ref(fig:cars)</code>, which translates into <a href="#fig:cars">1.9</a>.</p>
<p>Note the this syntax doesn’t automatically include the <code>Table</code> or <code>Figure</code> handles in front of the cross-reference. You will have to manually add <code>Table</code> or <code>Figure</code> in front of your <code>\@ref()</code> function.</p>
</div>
</div>
<div id="bib" class="section level3" number="1.3.7">
<h3><span class="header-section-number">1.3.7</span> Citing references in text and adding a bibliography/references section</h3>
<div id="the-bibliography-file" class="section level4" number="1.3.7.1">
<h4><span class="header-section-number">1.3.7.1</span> The bibliography file</h4>
<p>To cite references in the R Markdown document those have to be saved in a bibliography file using the <code>BibTeX</code> format. Other formats can be used, but the <code>BibTeX</code> format is open-source and easy to edit. Please see this webpage for more details on other formats: <a href="https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html" class="uri">https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html</a></p>
<p>Most journals allow saving citation of publications directly in <code>BibTeX</code> format, but when this feature is not available formats can be converted using online services (e.g. EndNote to BibTeX: <a href="https://www.bruot.org/ris2bib/" class="uri">https://www.bruot.org/ris2bib/</a>).</p>
<div id="procedure-to-do-prior-to-citing-references-in-an-r-markdown-document" class="section level5" number="1.3.7.1.1">
<h5><span class="header-section-number">1.3.7.1.1</span> Procedure to do prior to citing references in an R Markdown document</h5>
<ol style="list-style-type: decimal">
<li>Save all your <code>BibTeX</code> references in a text file and make sure to add the <code>.bib</code> extension.</li>
<li>This file has to be deposited in the same folder as your <code>.Rmd</code> file.</li>
<li>You will be inserting the name of your references file in the <a href="#yaml-metadata-section">YAML metadata section</a>.</li>
<li>You can visit this <a href="https://academic.oup.com/botlinnean/article/186/4/435/4736317?searchresult=1">webpage</a> and click on the <code>Cite</code> icon to download a citation in <code>.bibtex</code> format. More details on the <code>BibTeX</code> format is provided below.</li>
<li>References formatted in <code>BibTeX</code> format are available in associated file:</li>
</ol>
<ul>
<li><code>Bibliography_Reproducible_Science_2.bib</code>.</li>
</ul>
</div>
</div>
<div id="specifying-a-bibliography-in-the-r-markdown-file" class="section level4" number="1.3.7.2">
<h4><span class="header-section-number">1.3.7.2</span> Specifying a bibliography in the R Markdown file</h4>
<p>The Pandoc program can automatically generate citations in the text and a bibliography/references section following various journal styles. In order to use this feature, you need to specify a bibliography file in the <a href="#yaml-metadata-section">YAML metadata section</a>.</p>
</div>
<div id="bibtex-format" class="section level4" number="1.3.7.3">
<h4><span class="header-section-number">1.3.7.3</span> BibTeX format</h4>
<p>Please find below an example of a reference formatted in <code>BibTeX</code> format:</p>
<pre class="r"><code># Example of BibTex format for Baker (2016) published in Nature
@Article{Baker_2016,
  doi = {10.1038/533452a},
  url = {https://doi.org/10.1038/533452a},
  year = {2016},
  month = {may},
  publisher = {Springer Nature},
  volume = {533},
  number = {7604},
  pages = {452--454},
  author = {Monya Baker},
  title = {1,500 scientists lift the lid on reproducibility},
  journal = {Nature},
}</code></pre>
</div>
<div id="citation-identifier" class="section level4" number="1.3.7.4">
<h4><span class="header-section-number">1.3.7.4</span> Citation identifier</h4>
<p>The unique citation identifier of a reference (<code>Baker_2016</code> in the example above) is set by the user in the <code>BibTeX</code> citation file (see first line in the example provided above). This unique identifier is used to refer to the reference/publication in the R Markdown document and also allows citing references and generating the bibliography/references section.</p>
</div>
<div id="citing-references" class="section level4" number="1.3.7.5">
<h4><span class="header-section-number">1.3.7.5</span> Citing references</h4>
<p>Citations go inside square brackets (<code>[]</code>) and are separated by semicolons. Each citation must have a key, composed of <code>@</code> + the citation identifier (see above) as stored into the <code>BibTeX</code> file.</p>
<p>Please find below some examples on citation protocols:</p>
<pre class="r"><code>#Syntax
Blah blah [see @Baker_2016, pp. 33-35; also @Smith2016, ch. 1].
Blah blah [@Baker_2016; @Smith2016].</code></pre>
<p>Once knitted (using the <img src="Figures/knit_2.png" /> button), the above code/syntax turns into:</p>
<p>Blah blah <span class="citation">(see <a href="#ref-Baker_2016" role="doc-biblioref">Baker, 2016 pp. 33–35</a>; also <a href="#ref-Smith2016" role="doc-biblioref">Smith et al., 2016</a>, ch. 1)</span>.</p>
<p>Blah blah <span class="citation">(<a href="#ref-Baker_2016" role="doc-biblioref">Baker, 2016</a>; <a href="#ref-Smith2016" role="doc-biblioref">Smith et al., 2016</a>)</span>.</p>
<p>A minus sign (-) before the <code>@</code> will suppress mention of the author in the citation. This can be useful when the author is already mentioned in the text:</p>
<pre class="r"><code>#Syntax
Baker says blah blah [-@Baker_2016].</code></pre>
<p>Once knitted, the above code/syntax turns into:</p>
<p>Baker says blah blah <span class="citation">(<a href="#ref-Baker_2016" role="doc-biblioref">2016</a>)</span>.</p>
<p>You can also write an in-text citation, as follows:</p>
<pre class="r"><code>#Syntax
@Baker_2016 says blah.
@Baker_2016 [p. 1] says blah.</code></pre>
<p>Once knitted, the above code/syntax turns into:</p>
<p><span class="citation"><a href="#ref-Baker_2016" role="doc-biblioref">Baker</a> (<a href="#ref-Baker_2016" role="doc-biblioref">2016</a>)</span> says blah.</p>
<p><span class="citation"><a href="#ref-Baker_2016" role="doc-biblioref">Baker</a> (<a href="#ref-Baker_2016" role="doc-biblioref">2016 p. 1</a>)</span> says blah.</p>
<div id="practice-citing-references" class="section level5" number="1.3.7.5.1">
<h5><span class="header-section-number">1.3.7.5.1</span> Practice citing references</h5>
<p>Students have to use their <code>.Rmd</code> document to practice citing references in the text using procedures described above. To clearly define where you practice citing references, please do so under a <code>Citing references</code> header.</p>
</div>
</div>
</div>
<div id="adding-a-bibliographyreferences-section" class="section level3" number="1.3.8">
<h3><span class="header-section-number">1.3.8</span> Adding a bibliography/references section</h3>
<p>Upon knitting, a bibliography/references section will be automatically generated at the end of the document. Usually, we recommend adding a References header just after the last paragraph of the document as displayed below:</p>
<pre class="r"><code>last paragraph...

# References</code></pre>
<p>The bibliography will be inserted after this header (please see References section of this tutorial for more details).</p>
<div id="formatting-citations-to-journal-styles" class="section level4" number="1.3.8.1">
<h4><span class="header-section-number">1.3.8.1</span> Formatting citations to journal styles</h4>
<p>In this section, we are studying how your bibliography can be automatically formatted following a journal style. This is achieved by providing the name of a citation style file (containing the protocol to format citations and bibliography following a journal style) in the YAML metadata section.</p>
</div>
<div id="what-is-the-citation-style-language-csl" class="section level4" number="1.3.8.2">
<h4><span class="header-section-number">1.3.8.2</span> What is the citation style language (CSL)?</h4>
<p>The <strong>C</strong>itation <strong>S</strong>tyle <strong>L</strong>anguage (CSL) was developed by an open-source project and aims at facilitating scholarly publishing by automating the formatting of citations and bibliographies. This project has developed the CSL and maintains a crowd sourced repository with over 8000 free CSL citation styles. Please see the following website for more details: <a href="https://citationstyles.org" class="uri">https://citationstyles.org</a></p>
</div>
<div id="csl-repositories" class="section level4" number="1.3.8.3">
<h4><span class="header-section-number">1.3.8.3</span> CSL repositories</h4>
<p>There are two main CSL repositories:</p>
<ul>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/citation-style-language/styles" class="uri">https://github.com/citation-style-language/styles</a></li>
<li><strong>Zotero Style Repository:</strong> <a href="https://www.zotero.org/styles" class="uri">https://www.zotero.org/styles</a></li>
</ul>
</div>
<div id="how-to-use-a-csl-file-in-an-r-markdown-to-format-citations-and-bibliography" class="section level4" number="1.3.8.4">
<h4><span class="header-section-number">1.3.8.4</span> How to use a CSL file in an R Markdown to format citations and bibliography?</h4>
<p>Please follow the steps below to format your citations and bibliography following the citation style provided in a CSL file:</p>
<ol style="list-style-type: decimal">
<li>Download the CSL file using repositories provided above. Some journals provide their CSL files on their websites (one has been made available for you to use in the associated files: <code>AmJBot.csl</code>).</li>
<li>Save the CSL file in the same working directory as the <code>.Rmd</code> file.</li>
<li>Edit the YAML metadata section as follows to specify the CSL file:</li>
</ol>
<pre class="r"><code># Add a &quot;csl&quot; argument and provide name of the CSL file (here AmJBot.csl) 
---
title: &quot;Sample Document&quot;
output:
  bookdown::html_document2: 
    toc: TRUE
  bookdown::pdf_document2:
    toc: TRUE
bibliography: bibliography.bib
csl: AmJBot.csl
---</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Knit the R Markdown document using the <code>Knit</code> <img src="Figures/knit_2.png" /> button. The Pandoc program will use the information stored in the YAML metadata section to format the bibliography (citations and bibliography section) following the citation style provided in the CSL file. Do not forget to add a <code>References</code> header at the end of your <code>.Rmd</code> document.</li>
</ol>
</div>
</div>
</div>
<div id="partC" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> PART C: Advanced R and R Markdown settings</h2>
<div id="learning-outcomes-2" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Learning outcomes</h3>
<p>This tutorial is devoted to part C of chapter 1 and provides students with opportunities to learn procedures to:</p>
<ul>
<li>Set your working directory.</li>
<li>Set global options for code chunks related to:
<ul>
<li>text,</li>
<li>code decoration,</li>
<li>caching,</li>
<li>plots (output format and resolution),</li>
<li>positioning figures (close to associated code chunks).</li>
</ul></li>
</ul>
</div>
<div id="associated-files-supporting-this-tutorial-1" class="section level3" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Associated files supporting this tutorial</h3>
<p>Please refer to <a href="#Files">section</a> for more details on supporting files and their locations on the shared Google Drive.</p>
</div>
<div id="set-your-working-directory" class="section level3" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Set your working directory</h3>
<p>Unlike R scripts where you have to set your working directory or provide the path to your files, the approach implemented in R Markdown document (<code>.Rmd</code>) automatically sets your working directory to the location of your <code>.Rmd</code> file. This procedure is done by <code>knitr</code> functions. <code>knitr</code> expects all declared files to be located in the same path as your <code>.Rmd</code> file or in a subfolder within this working directory. The main reason for this approach is to maximize portability of your R Markdown project, which is usually composed of a set of files (see Figure <a href="#fig:projstr">1.10</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:projstr"></span>
<img src="Figures/Project_structure.png" alt="Snapshot of the project structure associated to part C of Chapter 1. External figures used in the document are in Figures, whereas those generated by the document are saved in Figures MS." width="100%" />
<p class="caption">
Figure 1.10: Snapshot of the project structure associated to part C of Chapter 1. External figures used in the document are in Figures, whereas those generated by the document are saved in Figures MS.
</p>
</div>
<div id="instructions-to-setup-your-working-directory" class="section level4" number="1.4.3.1">
<h4><span class="header-section-number">1.4.3.1</span> Instructions to setup your working directory</h4>
<p>Before knitting your document, you will be testing your code and this requires to set your working directory. The can be done in RStudio by clicking (see Figure <a href="#fig:setwd">1.11</a>):</p>
<p><code>Session --&gt; Set Working Directory --&gt; To Source File Location</code></p>
<div class="figure"><span id="fig:setwd"></span>
<img src="Figures/Setwkd.png" alt="Snapshot of RStudio showing procedure to set your working directory to allow testing your code prior to knitting." width="100%" />
<p class="caption">
Figure 1.11: Snapshot of RStudio showing procedure to set your working directory to allow testing your code prior to knitting.
</p>
</div>
</div>
</div>
<div id="set-global-options-for-code-chunks" class="section level3" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> Set global options for code chunks</h3>
<p>To improve code reproducibility and efficiency and to follow publication requirements, it is customed to include a “code chunk” at the beginning of your <code>.Rmd</code> file to set global options applying to the whole document. Those settings are related to the following elements of your code:</p>
<ul>
<li>text results.</li>
<li>code decoration.</li>
<li>caching code.</li>
<li>plots (or figures).</li>
<li>positioning figures.</li>
</ul>
<p>These general settings will be set using the <code>opts_chunk()</code> function implemented in <code>knitr</code> <span class="citation">(<a href="#ref-R-knitr" role="doc-biblioref">Xie, 2020b</a>)</span>. The following website contains valuable information on code chunk options:</p>
<ul>
<li><a href="https://yihui.name/knitr/options/" class="uri">https://yihui.name/knitr/options/</a></li>
</ul>
<div id="the-opts_chunkset-function" class="section level4" number="1.4.4.1">
<h4><span class="header-section-number">1.4.4.1</span> The opts_chunk$set() function</h4>
<p>The <code>knitr</code> function <code>opts_chunk$set()</code> is used to change the default global options in an <code>.Rmd</code> document.</p>
<p>Before starting, a few special notes should be known on the options:</p>
<ol style="list-style-type: decimal">
<li>Chunk options must be written in one line; no line breaks are allowed inside chunk options.</li>
<li>Avoid spaces and periods (<code>.</code>) in chunk labels and directory names.</li>
<li>All option values must be valid R expressions just like how we write function arguments.</li>
</ol>
<p>Here we will be discussing each part of the settings individually, but those will have to be merged into one code chunk in your document entitled <code>setup</code> (please see below for more details).</p>
</div>
<div id="text-results" class="section level4" number="1.4.4.2">
<h4><span class="header-section-number">1.4.4.2</span> Text results</h4>
<p>This section deals with settings related to text results generated by code chunks.</p>
<p>Please find below an example of options that could be applied across code chunks:</p>
<pre class="r"><code># Setup options for text results
opts_chunk$set(echo = TRUE, warning = TRUE, message = TRUE, include = TRUE)</code></pre>
<div id="explanations-of-the-text-results-options" class="section level5" number="1.4.4.2.1">
<h5><span class="header-section-number">1.4.4.2.1</span> Explanations of the text results options</h5>
<ul>
<li><code>echo = TRUE</code>: Include all R source codes in the output file.</li>
<li><code>warning = TRUE</code>: Preserve warnings (produced by <code>warning()</code>) in the output like we run R code in a terminal.</li>
<li><code>message = TRUE</code>: Preserve messages emitted by <code>message()</code> (similar to warning)</li>
<li><code>include = TRUE</code>: Include all chunk outputs in the final output document.</li>
</ul>
<p>If you want some of the text results to have different options, please adjust those in their specific code chunks. This comment is valid for all the other general settings.</p>
</div>
</div>
<div id="code-decoration" class="section level4" number="1.4.4.3">
<h4><span class="header-section-number">1.4.4.3</span> Code decoration</h4>
<p>This section deals with settings related to code decoration (i.e. how it is outputted in the final <code>pdf</code> document) generated by code chunks.</p>
<p>Please find below an example of options that could be applied across code chunks:</p>
<pre class="r"><code># Setup options for code decoration
opts_chunk$set(tidy = TRUE, tidy.opts = list(blank = FALSE, width.cutoff = 60), 
    highlight = TRUE)</code></pre>
<div id="explanations-of-the-code-decoration-options" class="section level5" number="1.4.4.3.1">
<h5><span class="header-section-number">1.4.4.3.1</span> Explanations of the code decoration options</h5>
<ul>
<li><code>tidy = TRUE</code>: Use <code>formatR::tidy_source()</code> to reformat the code. Please see <code>tidy.opts</code> below.</li>
<li><code>tidy.opts = list(blank = FALSE, width.cutoff = 60)</code>: This provides a list of options to be passed to the function determined by the <code>tidy</code> option. Here we format the code to avoid blank lines and with a width cutoff of 60 characters.</li>
<li><code>highlight = TRUE</code>: This highlights the source code.</li>
</ul>
</div>
</div>
<div id="caching-code" class="section level4" number="1.4.4.4">
<h4><span class="header-section-number">1.4.4.4</span> Caching code</h4>
<p>To compile your <code>.Rmd</code> document faster (especially if you have computing intensive tasks), you can cache the output of your code into files associated to each of your code chunks. This process allows compute intensive chunks to be saved and the output used later without being re-run.</p>
<p>The <em>knitr</em> package has options to only evaluate cached chunks when necessary, but this has to be set by users. Such procedure creates a unique MD5 digest (= a data storage technique) of each chunk to track when changes are present. When the option <code>cache=TRUE</code> (there are other, more granular settings; see below), the chunk will only be evaluated in the following scenarios:</p>
<ul>
<li>There are no cached results (either this is the first time running or the results were moved/deleted).</li>
<li>The code chunk has been modified.</li>
</ul>
<p>The following code allows implementing this procedure to your document:</p>
<pre class="r"><code># Setup options for code cache
opts_chunk$set(cache = 2, cache.path = &quot;cache/&quot;)</code></pre>
<div id="explanations-of-the-caching-code-options" class="section level5" number="1.4.4.4.1">
<h5><span class="header-section-number">1.4.4.4.1</span> Explanations of the caching code options</h5>
<ul>
<li>Besides <code>TRUE</code> and <code>FALSE</code> for the chunk option <code>cache</code>, advanced users can also consider more granular cache by using numeric values for <code>cache = 0, 1, 2, 3</code>. <code>0</code> means <code>FALSE</code>, and <code>3</code> is equivalent to <code>TRUE</code>. For <code>cache = 1</code>, the results of the computation are loaded from the cache, so the code is not evaluated again, but everything else is still executed, such the output hooks and saving recorded plots to files. For <code>cache = 2</code> (used here), it is very similar to <code>1</code>, and the only difference is that the recorded plots will not be re-saved to files when the plot files already exist, which might save some time when the plots are big.</li>
<li><code>cache.path = "cache/"</code>: Directory where cache files will be saved. You don’t have to create the directory before executing the code, it will be created automatically by <em>knitr</em>.</li>
</ul>
</div>
</div>
<div id="plots" class="section level4" number="1.4.4.5">
<h4><span class="header-section-number">1.4.4.5</span> Plots</h4>
<p>Plots are a major element of your research and they are at the core of your figures. We can take advantage of options implemented in the <code>knitr</code> package to output plots meeting publication requirements. This will save precious time during the writing phase of your research (= no need to fiddle with the size and resolution of figures to meet journal policies).</p>
<p>Please find below an example of options that could be applied across code chunks:</p>
<pre class="r"><code># Setup options for plots
opts_chunk$set(fig.path = &quot;Figures_MS/&quot;, dev = c(&quot;pdf&quot;, &quot;png&quot;), 
    dpi = 300)</code></pre>
<div id="explanations-of-the-caching-plots-options" class="section level5" number="1.4.4.5.1">
<h5><span class="header-section-number">1.4.4.5.1</span> Explanations of the caching plots options</h5>
<ul>
<li><code>fig.path = "Figures_MS/""</code>: Set directory to save figures generated by the R Markdown document. As above, this folder doesn’t need to exist prior to executing the code chunks. Files will be save based on code chunk title and assigned figure number.</li>
<li><code>dev = c('pdf', 'png')</code>: Save figures in both <code>pdf</code> and <code>png</code> formats.</li>
<li><code>dpi = 300</code>: The DPI (dots per inch) for bitmap devices (dpi * inches = pixels). Please look at publishing requirements to set this parameter appropriately.</li>
</ul>
<p>It is worth noting that you might be using external figures in your <code>.Rmd</code> document. To avoid confusions between figures generated by the <code>.Rmd</code> document and those coming from outside, it is best practice to have them saved in two different subfolders (see Figure <a href="#fig:projstr">1.10</a> for more details).</p>
</div>
<div id="additional-plots-options" class="section level5" number="1.4.4.5.2">
<h5><span class="header-section-number">1.4.4.5.2</span> Additional plots options</h5>
<p>Some journals have specific requirements on figure dimensions. You can easily set these by using the following option:</p>
<ul>
<li><code>fig.dim</code>: (NULL; numeric) if a numeric vector of length 2, it gives <code>fig.width</code> and <code>fig.height</code>, e.g., <code>fig.dim = c(5, 7)</code>.</li>
</ul>
</div>
</div>
<div id="positioning-figures" class="section level4" number="1.4.4.6">
<h4><span class="header-section-number">1.4.4.6</span> Positioning figures</h4>
<p>Positioning figures close to their code chunks is critical and can get sorted by adding another <code>opts_chunk$set()</code> code line in your <code>setup</code> R code chunk. This is done by invoking the <code>fig.pos</code> argument and setting it to <code>"H"</code>. <strong>Warning:</strong> Setting this argument might generate errors when documents are knitted as <code>pdf</code> documents. If it happens, please comment this line using <code>#</code> and knit again.</p>
<pre class="r"><code>## Locate figures as close as possible to requested position
## (=code)
opts_chunk$set(fig.pos = &quot;H&quot;)</code></pre>
</div>
</div>
<div id="applying-global-changes-to-all-code-chunks" class="section level3" number="1.4.5">
<h3><span class="header-section-number">1.4.5</span> Applying global changes to all code chunks</h3>
<p>In this section, we will collate all global settings discussed above into a code chunk entitled <code>setup</code>, which will be placed under the YAML metadata section. In addition to containing the global settings, it is advisable to also include a code section devoted to loading required R packages in the <code>setup</code> code chunk.</p>
<p>Please find below the code for the <code>setup</code> code chunk based on the options presented above:</p>
<pre class="r"><code># Load packages
## Add any packages specific to your code
library(&quot;knitr&quot;)
library(&quot;bookdown&quot;)
# Chunk options: see http://yihui.name/knitr/options/ ###
## Text results
opts_chunk$set(echo = TRUE, warning = TRUE, message = TRUE, include = TRUE)
## Code decoration
opts_chunk$set(tidy = TRUE, tidy.opts = list(blank = FALSE, width.cutoff = 60), 
    highlight = TRUE)
## Caching code
opts_chunk$set(cache = 2, cache.path = &quot;cache/&quot;)
## Plots
opts_chunk$set(fig.path = &quot;Figures_MS/&quot;, dev = c(&quot;pdf&quot;, &quot;png&quot;), 
    dpi = 300)
## Locate figures as close as possible to requested position
## (=code)
opts_chunk$set(fig.pos = &quot;H&quot;)</code></pre>
<div id="settings-of-the-setup-r-code-chunk" class="section level4" number="1.4.5.1">
<h4><span class="header-section-number">1.4.5.1</span> Settings of the <code>setup</code> R code chunk</h4>
<p>When inserting the above code into an R code chunk, please set the options of the chunk as follows:</p>
<ul>
<li><code>setup</code>: Unique ID of the code chunk.</li>
<li><code>include = FALSE</code>: Nothing will be written into the output document, but the code will be evaluated and plot files will be generated (if there are any plots in the chunk).</li>
<li><code>cache = FALSE</code>: Code chunk will not be cached (see above for more details).</li>
<li><code>message = FALSE</code>: Messages emitted by <code>message()</code> will not be preserved.</li>
</ul>
<p>Options (and their associated arguments) in the code chunk have to be separated by commas.</p>
</div>
</div>
<div id="an-exercise-to-work-on-learning-objectives" class="section level3" number="1.4.6">
<h3><span class="header-section-number">1.4.6</span> An exercise to work on learning objectives</h3>
<p>Please conduct the above exercise to get accustomed with the material presented in the tutorial. This exercise is divided into six steps as follows:</p>
<ol style="list-style-type: decimal">
<li>Open RStudio, create and save a <code>.Rmd</code> document (<strong>Tip:</strong> save the file in a new folder).</li>
<li>Set your working directory according to file location.</li>
<li>Insert an R code chunk (using the <code>Insert</code> <img src="Figures/insert.png" /> button) and entitle it <code>setup</code>. This code chunk will be used to define the global settings for the following options as implemented in the <code>opts_chunk$set()</code> function:</li>
</ol>
<ul>
<li>Text results.</li>
<li>Code decoration.</li>
<li>Caching code.</li>
<li>Plots.</li>
<li>Positioning of figures.</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Use the R code provided below (which generates a plot) to learn more about the effect of global settings on code outputs.</li>
<li>Once the file is completed, compile your document using the <code>Knit</code> <img src="Figures/knit_2.png" /> button. Please pay attention to the outputs in your folder.</li>
<li>Use the <code>bookdown</code> <code>\@ref()</code> function to cite your figure/plot in the text.</li>
</ol>
</div>
<div id="an-r-code-to-generate-a-plot-cross-reference-it-in-text" class="section level3" number="1.4.7">
<h3><span class="header-section-number">1.4.7</span> An R code to generate a plot &amp; cross-reference it in text</h3>
<p>The R code provided below is associated to step 4 of the exercise and it produces the plot displayed in Figure <a href="#fig:PlotFig">1.12</a>.</p>
<div class="figure"><span id="fig:PlotFig"></span>
<img src="Chapters_files/figure-html/PlotFig-1.png" alt="Plot of y ~ x." width="672" />
<p class="caption">
Figure 1.12: Plot of y ~ x.
</p>
</div>
<p>To get there:</p>
<ol style="list-style-type: decimal">
<li>Insert an R code chunk (using the <code>Insert</code> <img src="Figures/insert.png" /> button) and set the following options and associated arguments:</li>
</ol>
<ul>
<li><code>Plot</code>: Unique ID of code chunk.</li>
<li><code>fig.cap="Plot of y ~ x."</code>: Figure caption.</li>
<li><code>fig.show="asis"</code>: Figure display.</li>
<li><code>out.width = '100%'</code>: Figure width on the page.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Enter the following R code in the code chunk.</li>
</ol>
<pre class="r"><code># Generate a set of observations (n=100) that have a normal
# distribution
x &lt;- rnorm(100)
# Add a small amount of noise to x to generate a new vector
# (y)
y &lt;- jitter(x, 1000)
# Plot y ~ x
plot(x, y)</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Test your code to make sure it does what it is supposed to do (using the <code>Run</code> <img src="Figures/Run.png" /> button).</li>
<li>Go to step 5 in the above section and complete the exercise.</li>
</ol>
</div>
</div>
<div id="partD" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> PART D: User Defined Functions in R</h2>
<div id="learning-outcomes-3" class="section level3" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Learning outcomes</h3>
<p>This tutorial provides students with opportunities to gain the following skills by:</p>
<ul>
<li>Defining what is a function and its applicability.</li>
<li>Learning the syntax to implement user-defined functions in R.</li>
<li>Learning R specific functions associated to producing and loading functions: <code>return()</code>, <code>source()</code>.</li>
<li>Providing some background on R lists (<code>list()</code>) and their applicability to functions returning multiple values.</li>
<li>Developing, implementing and applying user-defined functions returning single and multiple values.</li>
<li>Learning protocols to implement defensive programming to your code.</li>
</ul>
</div>
<div id="what-do-you-need-to-complete-this-tutorial" class="section level3" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> What do you need to complete this tutorial?</h3>
<p>To complete part D, please create a new R script document (Figure <a href="#fig:Rscript">1.13</a>) and save it in your working directory. All the code and functions presented here should be reported in your R script.</p>
<div class="figure"><span id="fig:Rscript"></span>
<img src="Figures/R_script.png" alt="Snapshot of RStudio showing procedure to create a new R script document." width="100%" />
<p class="caption">
Figure 1.13: Snapshot of RStudio showing procedure to create a new R script document.
</p>
</div>
</div>
<div id="introduction-1" class="section level3" number="1.5.3">
<h3><span class="header-section-number">1.5.3</span> Introduction</h3>
<p>This tutorial aims at providing an introduction to functions, more specifically, we will be studying the user defined functions (UDFs) as implemented in R. UDFs allow users to write their own functions and make them available in the R Global Environment (using the <code>source()</code> function) or ultimately in <a href="https://r-pkgs.org">R packages</a>.</p>
<p>To gain this knowledge, students will be conducting three exercises to learn about the following topics:</p>
<ol style="list-style-type: decimal">
<li>Develop, implement and apply function returning a single value.</li>
<li>Develop, implement and apply function returning multiple values.</li>
<li>Implement defensive programming to your code to support debugging.</li>
</ol>
<p>To show the broad applications of the teaching material, we will be using mathematical examples. Before delving into these topics, the instructor is providing some general context and touch upon what a function is and when it is best applied as well as best practices to write pseudocode/code (more during Chapter 4) and approaches to calling R functions.</p>
</div>
<div id="what-is-a-function" class="section level3" number="1.5.4">
<h3><span class="header-section-number">1.5.4</span> What is a function?</h3>
<p>In programming, you use functions to incorporate sets of instructions that you want to use repeatedly or that, because of their complexity, are better self-contained in a sub program and called when needed. <strong>A function is a piece of code written to carry out a specified task</strong>; it can or can not accept arguments or parameters and it can or can not return one or more values.</p>
</div>
<div id="functions-in-r" class="section level3" number="1.5.5">
<h3><span class="header-section-number">1.5.5</span> Functions in R</h3>
<p>There exist many terms to define and express functions, subroutines, procedures, method, etc., but for the purposes of this tutorial, you will ignore these distinctions, which are often semantic and reminiscent of other older programming languages (see here for more details on <a href="http://programmers.stackexchange.com/questions/123159/what-are-the-specific-meanings-of-the-terms-functions-methods-procedures-and?rq=1">semantics</a>). In our context, those definitions are less important, because in R we only have functions.</p>
<div id="r-syntax-for-function" class="section level4" number="1.5.5.1">
<h4><span class="header-section-number">1.5.5.1</span> R syntax for function</h4>
<p>In R, according to the base documentation, you define a function with the following construct:</p>
<pre class="r"><code>function(arglist) {
    body
}</code></pre>
<p>The code between the curly braces is the <code>body</code> of the function.</p>
<p>When you use built-in functions, the only thing you need to worry about is how to effectively communicate the correct input arguments (<code>arglist</code>) and manage the return value(s), if there are any. To know more about arguments associated with a specific function you can access its documentation by using the following syntax (entered in the R console):</p>
<pre class="r"><code>#General syntax
?function() 

#Example with read.csv()
?read.csv()</code></pre>
</div>
<div id="user-defined-functions-udfs-in-r" class="section level4" number="1.5.5.2">
<h4><span class="header-section-number">1.5.5.2</span> User defined functions (UDFs) in R</h4>
<p>R allows users to define their own functions, which are based on the following syntax:</p>
<pre class="r"><code>function.name &lt;- function(arguments){
   computations on the arguments
   some more code
   return values
}</code></pre>
<p>So, in most cases, a function has a name (here <code>function.name</code>), some arguments (here <code>arguments</code>) used as input to the function (declared within the <code>()</code> following the keyword ‘function’); a body, which is the code within the curly braces <code>{}</code>, where you carry out the computation; and can have one or more return values (the output). You define the function similarly to variables, by “assigning” the directive <code>function(arguments)</code> to the “variable” <code>function.name</code>, followed by the rest.</p>
</div>
</div>
<div id="best-practice-to-writing-code" class="section level3" number="1.5.6">
<h3><span class="header-section-number">1.5.6</span> Best practice to writing code</h3>
<p>This topic will be covered in chapter 4, but here is an outline of the best practice to write code and functions in R. <strong>Before delving into code writing, we will usually work on developing a pseudocode, which aims at providing a high-level description of the tasks that will have to be performed by the function.</strong> Once this job done, we will then start writing the code by turning the tasks identified into the pseudocode into real R code. This will be done by searching for existing R functions allowing to execute each task described in the pseudocode and if they don’t exist develop new functions (this task might require some additional pseudocode). Please find below more detailed definitions of the two concepts described here.</p>
<div id="writing-pseudocode" class="section level4" number="1.5.6.1">
<h4><span class="header-section-number">1.5.6.1</span> Writing pseudocode</h4>
<p>Pseudocode is an informal high-level description of the operating principle of a computer program or other algorithm. It uses the structural conventions of a normal programming language (here R), but is intended for human reading rather than machine reading. Here, you will establish the big steps (and their associated tasks) and tie R functions (existing or that have to be made) to those steps. This provides the backbone of your code and will support writing it.</p>
</div>
<div id="writing-code" class="section level4" number="1.5.6.2">
<h4><span class="header-section-number">1.5.6.2</span> Writing code</h4>
<p>Writing clear, reproducible code has (at least) three main benefits. Firstly, it makes returning to the code much easier a few months down the line; whether revisiting an old project, or making revisions following peer review. Secondly, the results of your analysis are more easily scrutinized by the readers of your paper, meaning it is easier to show their validity. Thirdly, having clean and reproducible code available can encourage greater uptake of new methods that you have developed.</p>
</div>
</div>
<div id="loading-and-calling-udfs" class="section level3" number="1.5.7">
<h3><span class="header-section-number">1.5.7</span> Loading and calling UDFs</h3>
<p>When you will be working on your project, it is highly likely that you will have developed multiple UDFs tailored to your research. In this case, it would be appropriate to create a new folder entitled <code>R_functions</code>, which will be located in the same directory as your R scripts (see Figure <a href="#fig:Structure">1.14</a>). Save all your UDFs as independent files (e.g. <code>check.install.pkg.R</code>) into the <code>R_functions</code> folder.</p>
<div class="figure"><span id="fig:Structure"></span>
<img src="Figures/Example_project_structure.png" alt="Example file structure of a simple analysis project. See Chapter 4 for more details" width="100%" />
<p class="caption">
Figure 1.14: Example file structure of a simple analysis project. See Chapter 4 for more details
</p>
</div>
<div id="the-source-function-read-r-code-from-a-file" class="section level4" number="1.5.7.1">
<h4><span class="header-section-number">1.5.7.1</span> The <code>source()</code> function: Read R code from a file</h4>
<p>Once your project will be properly structured (see Figure <a href="#fig:Structure">1.14</a>), it will be easy to call specific UDFs into any R script by using the <code>source()</code> function.</p>
<p>For instance, to load the <code>check.install.pkg()</code> (saved in <code>R_functions/check.install.pkg.R</code>) into the Global Environment enter the following code into the R console (see Figure <a href="#fig:sourceUDF">1.15</a>):</p>
<pre class="r"><code>source(&quot;R_functions/check.install.pkg.R&quot;)</code></pre>
<div class="figure"><span id="fig:sourceUDF"></span>
<img src="Figures/source_view.png" alt="Snapshot of RStudio showing output of source() function and the UDF made available in the Global Environment. You can also view the code unperpinning the UDF." width="100%" />
<p class="caption">
Figure 1.15: Snapshot of RStudio showing output of source() function and the UDF made available in the Global Environment. You can also view the code unperpinning the UDF.
</p>
</div>
<p>Below, you will find some R code allowing to load all your UDFs stored in <code>R_functions</code> folder. This code is very handy when you have several UDFs associated to your pipeline.</p>
<pre class="r"><code>### Load all UDFs stored in R_functions
# 1. Create vector with names of UDF files in R_functions
# (with full path)
files_source &lt;- list.files(&quot;R_functions&quot;, full.names = T)
# 2. Iterative sourcing of all UDFs
sapply(files_source, source)</code></pre>
</div>
</div>
<div id="call-your-udfs" class="section level3" number="1.5.8">
<h3><span class="header-section-number">1.5.8</span> Call your UDFs</h3>
<p>Once loaded into your Global Environment (see Figure <a href="#fig:sourceUDF">1.15</a> for an example), you will be able to call your functions by typing their names directly into the console. For instance:</p>
<pre class="r"><code># Check if ape package is installed, if not install it and
# then load it
check.install.pkg(pkg = c(&quot;knitr&quot;))</code></pre>
<pre><code>## [1] &quot;Check if packages are installed&quot;
## [1] &quot;Load packages&quot;</code></pre>
<pre><code>## knitr 
##  TRUE</code></pre>
</div>
<div id="exercise-1-develop-implement-and-apply-function-returning-a-single-value" class="section level3" number="1.5.9">
<h3><span class="header-section-number">1.5.9</span> Exercise 1: Develop, implement and apply function returning a single value</h3>
<p>In this exercise, we will be working on developing a function that returns a single value, but how do we tell our UDF to return the value? In R, this task is accomplished with the <code>return()</code> function.</p>
<div id="aim" class="section level4" number="1.5.9.1">
<h4><span class="header-section-number">1.5.9.1</span> Aim</h4>
<p>Develop, implement and apply a UDF to calculate the square of a number.</p>
<p>In math, the squared symbol (<span class="math inline">\(^2\)</span>) is an arithmetic operator that signifies multiplying a number by itself. The “square” of a number is the product of the number and itself. Multiplying a number by itself is called “squaring” the number.</p>
</div>
<div id="pseudocode" class="section level4" number="1.5.9.2">
<h4><span class="header-section-number">1.5.9.2</span> Pseudocode</h4>
<p>Although straightforward, the function will have to execute the following tasks:</p>
<ol style="list-style-type: decimal">
<li>Store number inputted by user into an object entitled <code>base</code> as part of the argument(s) of the function.<br />
</li>
<li>Infer square of <code>base</code> by multiplying number by itself.</li>
<li>Save output of task 2 into an object called <code>sq</code>.</li>
<li>Return <code>sq</code> object to user (here a single value). To return <code>sq</code>, we will be using the <code>return()</code> function.</li>
</ol>
<p>This also means that the class of the <strong>input</strong> provided by user has to be <strong>numeric</strong> and the <strong>output</strong> will also be <strong>numeric</strong>. We will further discuss this topic during the third exercise. The class of an object can be checked by using the <code>class()</code> function. Note: This function will be useful for implementing defensive programming.</p>
</div>
<div id="turning-your-pseudocode-into-a-function" class="section level4" number="1.5.9.3">
<h4><span class="header-section-number">1.5.9.3</span> Turning your pseudocode into a function</h4>
<p>In this section, we will implement the pseudocode proposed above into a function entitled <code>square_number()</code>. This function requires one argument from the user (<code>base</code>, which is a number) and returns the square of that number (here square of <code>base</code> = <code>base</code>*<code>base</code>).</p>
<pre class="r"><code>## Create a UDF in R to calculate square number:
# - argument: base (= one number)
# - output: square of base (= one number)
square_number &lt;- function(base) {
    # Infer square of base and save it into object
    sq &lt;- base * base
    # Return sq
    return(sq)
}</code></pre>
<p>Write the code associated to the <code>square_number</code> into your new R script (saved in your working directory) and load function by executing all lines associated to function. Please carry on populating this document with the rest of the exercises.</p>
</div>
<div id="loading-your-function-into-the-global-environment" class="section level4" number="1.5.9.4">
<h4><span class="header-section-number">1.5.9.4</span> Loading your function into the Global Environment</h4>
<p>Before being able to use your UDF, execute the code associated to the <code>square_number()</code> function in the console. The UDF should now be loaded in the Global Environment and therefore be available for use. To verify that the UDF is loaded, please check the Environment panel in RStudio (see Figure <a href="#fig:envir">1.16</a>).</p>
<div class="figure"><span id="fig:envir"></span>
<img src="Figures/Environment_RStudio.png" alt="Close-up of the Environment panel in RStudio showing that the UDF is loaded in the Global Environment and can be used." width="100%" />
<p class="caption">
Figure 1.16: Close-up of the Environment panel in RStudio showing that the UDF is loaded in the Global Environment and can be used.
</p>
</div>
</div>
<div id="applying-your-function" class="section level4" number="1.5.9.5">
<h4><span class="header-section-number">1.5.9.5</span> Applying your function</h4>
<p>The R language is quite flexible and allows functions to be applied to a single value (e.g. <code>base = 2</code>) or a vector (e.g. <code>base = c(2,4,16,23,45)</code>). Please see below for more example:</p>
<ol style="list-style-type: decimal">
<li>Apply function to one value:</li>
</ol>
<pre class="r"><code># Square number of 2
square_number(base = 2)</code></pre>
<pre><code>## [1] 4</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Apply function to a vector containing multiple values:</li>
</ol>
<pre class="r"><code># Create vector with numbers
bases &lt;- c(2, 4, 16, 23, 45)
# Apply function to vector
square_number(base = bases)</code></pre>
<pre><code>## [1]    4   16  256  529 2025</code></pre>
</div>
</div>
<div id="exercise-2-develop-implement-and-apply-function-returning-multiple-values" class="section level3" number="1.5.10">
<h3><span class="header-section-number">1.5.10</span> Exercise 2: Develop, implement and apply function returning multiple values</h3>
<p>In our previous exercise we developed a function returning only one value. As part of your research, there will be multiple instances where you will be performing multiple actions onto your data, which will call for multiple values to be outputted by the function. To do so, we will be <strong>harvesting the different outputs of the function into a list, which will be returned to the users</strong> (using <code>return()</code>).</p>
<div id="what-is-a-list-in-r" class="section level4" number="1.5.10.1">
<h4><span class="header-section-number">1.5.10.1</span> What is a list in R?</h4>
<p>Lists are R objects containing elements of different types such as numbers, strings, vectors or another list inside it. A list can also contain a matrix or a function as its elements. Lists are created using the <code>list()</code> function.</p>
</div>
<div id="creating-a-list" class="section level4" number="1.5.10.2">
<h4><span class="header-section-number">1.5.10.2</span> Creating a list</h4>
<p>Find below an example to create a list containing strings, numbers, vectors and a logical values:</p>
<pre class="r"><code># Create a list containing strings, numbers, vectors and a
# logical value
list_data &lt;- list(&quot;Red&quot;, 51.3, 72, c(21, 32, 11), TRUE)
# Print object
print(list_data)</code></pre>
<pre><code>## [[1]]
## [1] &quot;Red&quot;
## 
## [[2]]
## [1] 51.3
## 
## [[3]]
## [1] 72
## 
## [[4]]
## [1] 21 32 11
## 
## [[5]]
## [1] TRUE</code></pre>
</div>
<div id="naming-list-elements" class="section level4" number="1.5.10.3">
<h4><span class="header-section-number">1.5.10.3</span> Naming list elements</h4>
<p>The list elements can be given names and they can be accessed using these names (see below):</p>
<pre class="r"><code># Create a list containing a vector, a matrix and a list
list_data &lt;- list(c(&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;), matrix(c(3, 9, 5, 1, 
    -2, 8), nrow = 2), list(&quot;green&quot;, 12.3))
# Give names to the elements in the list
names(list_data) &lt;- c(&quot;1st_Quarter&quot;, &quot;A_Matrix&quot;, &quot;An_inner_list&quot;)
# Show the list
print(list_data)</code></pre>
<pre><code>## $`1st_Quarter`
## [1] &quot;Jan&quot; &quot;Feb&quot; &quot;Mar&quot;
## 
## $A_Matrix
##      [,1] [,2] [,3]
## [1,]    3    5   -2
## [2,]    9    1    8
## 
## $An_inner_list
## $An_inner_list[[1]]
## [1] &quot;green&quot;
## 
## $An_inner_list[[2]]
## [1] 12.3</code></pre>
</div>
<div id="accessing-list-elements" class="section level4" number="1.5.10.4">
<h4><span class="header-section-number">1.5.10.4</span> Accessing list elements</h4>
<p>Elements of the list can be accessed by the index of the element in the list. In case of named lists it can also be accessed using the names. We use the same example as above to illustrate procedure to access list elements:</p>
<pre class="r"><code># Create a list containing a vector, a matrix and a list
list_data &lt;- list(c(&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;), matrix(c(3, 9, 5, 1, 
    -2, 8), nrow = 2), list(&quot;green&quot;, 12.3))
# Give names to the elements in the list
names(list_data) &lt;- c(&quot;1st_Quarter&quot;, &quot;A_Matrix&quot;, &quot;An_inner_list&quot;)
# Access the first element of the list
print(list_data[1])</code></pre>
<pre><code>## $`1st_Quarter`
## [1] &quot;Jan&quot; &quot;Feb&quot; &quot;Mar&quot;</code></pre>
<pre class="r"><code># Access the thrid element. As it is also a list, all its
# elements will be printed
print(list_data[3])</code></pre>
<pre><code>## $An_inner_list
## $An_inner_list[[1]]
## [1] &quot;green&quot;
## 
## $An_inner_list[[2]]
## [1] 12.3</code></pre>
<pre class="r"><code># Access the list element using the name of the element
print(list_data$A_Matrix)</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3    5   -2
## [2,]    9    1    8</code></pre>
</div>
<div id="lets-go-back-to-our-exercise" class="section level4" number="1.5.10.5">
<h4><span class="header-section-number">1.5.10.5</span> Let’s go back to our exercise</h4>
<p>Now that you have more knowledge about list objects, we will be working on an <strong>exercise aiming at developing and implementing a UDF to calculate the log and square of a number</strong>.</p>
</div>
<div id="pseudocode-and-associated-udf" class="section level4" number="1.5.10.6">
<h4><span class="header-section-number">1.5.10.6</span> Pseudocode and associated UDF</h4>
<p>Each student is tasked to:</p>
<ol style="list-style-type: decimal">
<li>Develop a pseudocode to execute the UDF.</li>
<li>Implement the pseudocode into a UDF.</li>
<li>Apply and test your code/function.</li>
</ol>
</div>
<div id="solution-proposed-by-the-instructor" class="section level4" number="1.5.10.7">
<h4><span class="header-section-number">1.5.10.7</span> Solution proposed by the instructor</h4>
<p>Please find below the solution proposed by the instructor:</p>
<pre class="r"><code>## Create a user defined function in R to calculate log and
## square of a number:
# argument: base (= one number)
# output: log and square of base (= two numbers) returned in
# a list
my_log_square &lt;- function(base) {
    # log (base 10)
    log_value &lt;- log(base)
    # Square of base
    square_value &lt;- base^2
    # Return both objects
    return(list(log_val = log_value, square_val = square_value))
}
# Call the function
my_log_square(base = 2)</code></pre>
<pre><code>## $log_val
## [1] 0.6931472
## 
## $square_val
## [1] 4</code></pre>
</div>
</div>
<div id="exercise-3-implement-defensive-programming-to-your-code-to-support-debugging" class="section level3" number="1.5.11">
<h3><span class="header-section-number">1.5.11</span> Exercise 3: Implement defensive programming to your code to support debugging</h3>
<div id="background-information-and-examples" class="section level4" number="1.5.11.1">
<h4><span class="header-section-number">1.5.11.1</span> Background information and examples</h4>
<p>Defensive programming is a technique to ensure that code fails with well-defined errors, i.e. where you know it should not work. <strong>The key here is to ‘fail fast’ and ensure that the code throws an error as soon as something unexpected happens</strong>. This creates a little more work for the programmer, but it makes debugging code a lot easier at a later date.</p>
<p>In order to demonstrate how to apply defensive programming to your code, a new function will be defined:</p>
<pre class="r"><code># Define a power function (exp_number): y = x^n
# - Arguments: base (= x) and power (= n)
# - Output: a number (y)
exp_number &lt;- function(base, power) {
    exp &lt;- base^power
    return(exp)
}
# Call function
exp_number(base = 2, power = 5)</code></pre>
<pre><code>## [1] 32</code></pre>
<p>You can employ defensive programming on the <code>exp_number</code> function defined above. The function requires that both arguments are of class numeric, if you were to provide a string (e.g. a word) as input, you would get an error:</p>
<pre class="r"><code># Example where we don&#39;t respect the class associated with
# the argument base
exp_number(base = &quot;hello&quot;, power = 5)</code></pre>
<pre><code>## Error in base^power: non-numeric argument to binary operator</code></pre>
<p>If you add in a line of code to test the data type of the inputs, you get a more meaningful error.</p>
<pre class="r"><code># Define a power function (exp_number): y = x ^n
# - Arguments: base (= x) and power (= n)
# - Output: a number (y)
exp_number &lt;- function(base, power) {
    # This if statement tests if classes of base and power are
    # numeric.
    # If one of them is not numeric it stops and return
    # meaningful message
    if (class(base) != &quot;numeric&quot; | class(power) != &quot;numeric&quot;) {
        stop(&quot;Both base and power inputs must be numeric&quot;)
    }
    exp &lt;- base^power
    return(exp)
}
# Call function
exp_number(base = &quot;hello&quot;, power = 5)</code></pre>
<pre><code>## Error in exp_number(base = &quot;hello&quot;, power = 5): Both base and power inputs must be numeric</code></pre>
<p>Although in this case debugging the error would not have taken long, in more complicated functions you are likely to either have less meaningful error messages, or code that runs for some time before it fails. By applying defensive programming and adding in these checks to the code, you can find unexpected behavior sooner and with more meaningful error messages.</p>
</div>
<div id="your-turn-to-implement-defensive-programming" class="section level4" number="1.5.11.2">
<h4><span class="header-section-number">1.5.11.2</span> Your turn to implement defensive programming</h4>
<p>Update <code>my_log_square()</code> to verify the class of <code>base</code> argument and print a meaningful error message if the class is not numeric.</p>
</div>
</div>
</div>
<div id="partE" class="section level2" number="1.6">
<h2><span class="header-section-number">1.6</span> PART E: Interactive tutorials</h2>
<p>The objective of this section is to provide students with some tools and ideas to design their bioinformatic tutorials (for PART 2). Here, students will have an overview of the tools implemented in the R package <a href="https://rstudio.github.io/learnr/index.html"><em>learnr</em></a>, which was developed to produce interactive tutorials. Although developed in R, the interactive tutorials are designed to be conducted in web browsers (but it could also be entirely done within RStudio).</p>
<p>The interactive tutorial presented here is subdivided into five topics:</p>
<ol style="list-style-type: decimal">
<li><strong>Introduction</strong>: This part sets the scene and provides some background information on the tutorial.</li>
<li><strong>Exercise</strong>: The aim of the exercise is presented together with a pseudocode (with associated R functions) outlying steps to design and implement an R code to complete the exercise. Students are asked to develop their R codes and execute them in the code chunk. You can type your code directly in the window/console and execute it using the <code>R Code</code> button. The instructor has also provided the solution to the exercise, which could be accessed by pressing the <code>Solution</code> button available in the top banner of the code chunk window.</li>
<li><strong>Questions</strong>: These questions are designed to test students’ knowledge of the code.</li>
<li><strong>Solution</strong>: A commented solution proposed by the instructor is available in a code chunk. Students can execute the code and inspect outputs produced to generate the final answer.</li>
<li><strong>YouTube tutorial</strong>: Here, a short YouTube video presents the procedure to launch a <em>learn</em> interactive tutorial and briefly presents the exercise. The main objective of this video is to show students that it is quite easy to integrate a video into their tutorials.</li>
</ol>
<p>Finally, the instructor wants to stress that students are not obliged to design their tutorials using <em>learnr</em>. You can also use the R Markdown language/syntax and output tutorials in HTML or PDF formats (more on this subject in Chapter 1).</p>
<p>This document highlights steps to execute the interactive tutorial designed by the instructor.</p>
<div id="installation-of-required-package" class="section level3" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> Installation of required package</h3>
<p>Open RStudio and install the <em>learnr</em> package from CRAN by typing the following command in the console:</p>
<pre class="r"><code>install.packages(&quot;learnr&quot;)</code></pre>
</div>
<div id="files-location-description" class="section level3" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> Files location &amp; description</h3>
<p>Files associated to this tutorial are deposited on the <a href="https://drive.google.com/drive/folders/1eZyjGQ478vaKiGD01hcryyNtdGp9t1J7?usp=sharing">Google Drive</a> under this path:
<code>Reproducible_Science -&gt; Bioinformatic_tutorials -&gt; Intro_interactive_tutorial</code></p>
<p>There are two main files:</p>
<ul>
<li><code>README.html</code>: The documentation to install R package and run interactive tutorial.</li>
<li><code>EEB603_Interactive_tutorial.Rmd</code>: The interactive tutorial written in R Markdown, but requiring functions from <em>learnr</em>.</li>
</ul>
</div>
<div id="youtube-video" class="section level3" number="1.6.3">
<h3><span class="header-section-number">1.6.3</span> YouTube video</h3>
<p>The instructor has made a video explaining the procedure to launch the interactive tutorial (based on option 1; see below) as well as some additional explanations related to the exercise.</p>
<ul>
<li><a href="https://youtu.be/ALSpVwymZbM" class="uri">https://youtu.be/ALSpVwymZbM</a></li>
</ul>
</div>
<div id="running-tutorial" class="section level3" number="1.6.4">
<h3><span class="header-section-number">1.6.4</span> Running tutorial</h3>
<ol style="list-style-type: decimal">
<li>Download the <code>Intro_interactive_tutorial</code> folder and save it on your local computer.</li>
<li>Set working directory to location of <code>EEB603_Interactive_tutorial.Rmd</code>.</li>
</ol>
<ul>
<li>This can be done as follows in RStudio: <code>Session -&gt; Set Working Directory -&gt; Choose Directory...</code>.</li>
<li>You can also use the <code>setwd()</code> function to set your working directory (e.g. <code>setwd("~/Documents/Course_Reproducible_Science/Timetable/Intro_interactive_tutorial")</code>).</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Running tutorial. There are two options to run the integrative tutorial:</li>
</ol>
<ul>
<li><strong>Option 1:</strong> Open <code>EEB603_Interactive_tutorial.Rmd</code> in RStudio and press the <code>Run Document</code> button on the upper side bar to launch the tutorial. It will appear in the <code>Viewer</code> panel (on right bottom corner). You can open the interactive tutorial in your web browser by clicking on the third icon at the top of the viewer panel. This procedure is also explained in the <a href="https://youtu.be/ALSpVwymZbM">Youtube video</a>.</li>
<li><strong>Option 2:</strong> Type the following command in the console. This will open a window in RStudio. You can also open the tutorial in your web browser by pressing the <code>Open in Browser</code> button.</li>
</ul>
<pre class="r"><code>rmarkdown::run(&quot;EEB603_Interactive_tutorial.Rmd&quot;)</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Enjoy going through the tutorial!</li>
</ol>
</div>
<div id="learning-syntax-to-develop-interactive-tutorials" class="section level3" number="1.6.5">
<h3><span class="header-section-number">1.6.5</span> Learning syntax to develop interactive tutorials</h3>
<p>The procedure to develop interactive tutorials using <em>learnr</em> is presented <a href="https://rstudio.github.io/learnr/index.html">here</a>. To learn more about the syntax, the instructor encourages you to open <code>EEB603_Interactive_tutorial.Rmd</code> in RStudio and inspect the document. This will allow learning syntax and associated procedures to:</p>
<ul>
<li>Design exercises (with embedded R code chunks and associated solutions).</li>
<li>Include multiple choices questions.</li>
<li>Embed a YouTube video.</li>
</ul>
</div>
</div>
</div>
<div id="chapter-2" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Chapter 2</h1>
<div id="introduction-2" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Introduction</h2>
<p>In this chapter, we are investigating the causes leading to irreproducible science and discussing ways to mitigate this crisis. We are using results from the survey published by <span class="citation"><a href="#ref-Baker_2016" role="doc-biblioref">Baker</a> (<a href="#ref-Baker_2016" role="doc-biblioref">2016</a>)</span> as baseline to support our discussions.</p>
</div>
<div id="teaching-material" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Teaching material</h2>
<p>The <code>pdf</code> of the presentation can be downloaded <a href="Chapters_files/Chapter_2_Reproducibility_crisis.pdf">here</a>. The pdf of <span class="citation"><a href="#ref-Baker_2016" role="doc-biblioref">Baker</a> (<a href="#ref-Baker_2016" role="doc-biblioref">2016</a>)</span> is available on our shared Google Drive at this path:</p>
<p><code>Reproducible_Science &gt; Publications &gt; Baker_Nature_2016.pdf</code></p>
</div>
</div>
<div id="chap3" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Chapter 3</h1>
<p>The presentation slides for this chapter can be downloaded <a href="Chapters_files/Chapter_3_Scientific_process.pdf">here</a>.</p>
<p>Improving the reliability and efficiency of scientific research will increase the credibility of the published scientific literature and accelerate discovery. In this chapter, we will survey measures that can be adopted to optimize key elements of the scientific process by especially focusing on: methods, reporting and dissemination, reproducibility, evaluation and incentives. These measures aim at minimizing threats to the scientific process therefore making it more open and transparent (). While studying this topic keep this citation from <a href="https://en.wikipedia.org/wiki/Richard_Feynman">Richard Feynman</a> in mind:</p>
<blockquote>
<p><em>The first principle is that you must not fool yourself – and you are the easiest person to fool.</em></p>
</blockquote>
<div class="figure" style="text-align: center"><span id="fig:ThreatReproSci"></span>
<img src="Figures/Threats2reproducible_science.png" alt="Overview of the scientific process and threats preventing reproducibility of the study (indicated in red). Abbreviations: HARKing: hypothesizing after the results are known; P-hacking: data dredging." width="80%" />
<p class="caption">
Figure 3.1: Overview of the scientific process and threats preventing reproducibility of the study (indicated in red). Abbreviations: HARKing: hypothesizing after the results are known; P-hacking: data dredging.
</p>
</div>
<div id="scientific-process-in-a-nutshell" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Scientific process in a nutshell</h2>
<p>The scientific process can be subdivided into six phases (Figure <a href="#fig:ThreatReproSci">3.1</a>):</p>
<ol style="list-style-type: decimal">
<li>Ask a question, review literature and generate hypothesis<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</li>
<li>Design study.</li>
<li>Collect data.</li>
<li>Analyze data and test hypothesis.</li>
<li>Interpret results.</li>
<li>Publish and/or conduct next experiment.</li>
</ol>
<p>In order to facilitate the understanding of the material taught in this chapter, the six phases of the scientific process are split into three categories reflecting the study’s progress:</p>
<ul>
<li>Pre-study: including phases 1 and 2.</li>
<li>Study: including phases 3 to 5.</li>
<li>Post-study: including phase 6.</li>
</ul>
<p>The distinction of those categories is very important to ensure the reproducibility and transparency of the study and to avoid falling into the traps described in Figure <a href="#fig:ThreatReproSci">3.1</a>. For instance, considering the pre-study category as an independent step in the scientific process will promote study pre-registration and therefore avoid HARKing, P-hacking and publication bias (see Figure <a href="#fig:ThreatReproSci">3.1</a> and the <a href="#gloss">Glossary</a> section). The recognition of the post-study category is also very important since it encourages pre- and post-publication reviews therefore supporting a better dissemination and transparency of your research.</p>
</div>
<div id="threats-to-the-scientific-process" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Threats to the scientific process</h2>
<p>A hallmark of scientific creativity is the ability to see novel and unexpected patterns in data. However, a major challenge for scientists is to be open to new and important insights while simultaneously avoiding being misled by our tendency to see structure in randomness. The combination of:</p>
<ol style="list-style-type: lower-roman">
<li><strong>Apophenia:</strong> the tendency to see patterns in random data.</li>
<li><strong>Confirmation bias:</strong> the tendency to focus on evidence that is in line with our expectations or favored explanation.</li>
<li><strong>Hindsight bias (also known as knew-it-all-along effect):</strong> the tendency to see an event as having been predictable only after it has occurred.</li>
</ol>
<p>Those factors can easily lead us to false conclusions and therefore be threats to our scientific process. Some of these threats (e.g. HARKing, P-hacking) are displayed in Figure <a href="#fig:ThreatReproSci">3.1</a> and definitions are provided in the Glossary section.</p>
</div>
<div id="chapter-content" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Chapter content</h2>
<p>Our <strong>objective is to tackle threats by providing measures to ensure reproducibility and transparency</strong>. Following the approach proposed by <span class="citation"><a href="#ref-Munafo" role="doc-biblioref">Munafo et al.</a> (<a href="#ref-Munafo" role="doc-biblioref">2017</a>)</span>, the measures studied in this chapter to ensure research reproducibility and transparency are organized into five categories. In addition, when possible, categories contain specific working themes designed to minimize the threats discussed above (see Figure <a href="#fig:ThreatReproSci">3.1</a>).</p>
<ol style="list-style-type: decimal">
<li><strong>Methods</strong>
<ul>
<li>Protecting against cognitive biases.</li>
<li>Improving methodological training.</li>
<li>Improving chain of evidence supporting (identification of) biodiversity occurrences.</li>
<li>Implementing independent methodological support.</li>
<li>Encouraging collaboration and team science.</li>
</ul></li>
<li><strong>Reporting &amp; dissemination</strong>
<ul>
<li>Promoting study pre-registration.</li>
<li>Improving the quality of reporting.</li>
<li>Promoting linkage of publication, data, code &amp; analyses into a unified environment (see <a href="#chap1">chapter 1</a>).</li>
</ul></li>
<li><strong>Reproducibility</strong>
<ul>
<li>Promoting transparency and open science.</li>
</ul></li>
<li><strong>Evaluation</strong>
<ul>
<li>Diversifying peer review: pre- and post-publication reviews.</li>
</ul></li>
<li><strong>Incentives</strong></li>
</ol>
<p>These measures are not intended to be exhaustive, but aim at providing a broad, practical and evidence-based set of actions that can be implemented by researchers, institutions, journals and funders. They will also provide a road map for students to design their thesis projects.</p>
</div>
<div id="publications-and-web-resources" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Publications and web resources</h2>
<p>This chapter is mostly based on the following publications:</p>
<ul>
<li><span class="citation"><a href="#ref-Kerr1998" role="doc-biblioref">Kerr</a> (<a href="#ref-Kerr1998" role="doc-biblioref">1998</a>)</span> - On HARKing (see Glossary section).</li>
<li><span class="citation"><a href="#ref-Nosek2012" role="doc-biblioref">Nosek et al.</a> (<a href="#ref-Nosek2012" role="doc-biblioref">2012</a>)</span> - On incentives.</li>
<li><span class="citation"><a href="#ref-Nosek1422" role="doc-biblioref">Nosek et al.</a> (<a href="#ref-Nosek1422" role="doc-biblioref">2015</a>)</span> - On promoting an open research culture.</li>
<li><span class="citation"><a href="#ref-Baker_2016" role="doc-biblioref">Baker</a> (<a href="#ref-Baker_2016" role="doc-biblioref">2016</a>)</span> - Results of reproducible survey.</li>
<li><span class="citation"><a href="#ref-Munafo" role="doc-biblioref">Munafo et al.</a> (<a href="#ref-Munafo" role="doc-biblioref">2017</a>)</span> - Provides framework for measures proposed in this chapter.</li>
<li><span class="citation"><a href="#ref-Nosek2600" role="doc-biblioref">Nosek et al.</a> (<a href="#ref-Nosek2600" role="doc-biblioref">2018</a>)</span> - On the pre-registration revolution.</li>
<li><span class="citation"><a href="#ref-Troudet2018" role="doc-biblioref">Troudet et al.</a> (<a href="#ref-Troudet2018" role="doc-biblioref">2018</a>)</span> - On accuracy of biodiversity occurrences available in GBIF.</li>
</ul>
<p>The website of the <strong>Center for Open Science</strong> (<a href="https://cos.io" class="uri">https://cos.io</a>) was also used to design the chapter content.</p>
</div>
<div id="methods" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Methods</h2>
<p>This section describes measures that can be implemented when performing research (including, for example, study design, methods, statistics, and collaboration).</p>
<div id="protecting-against-cognitive-biases" class="section level3" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Protecting against cognitive biases</h3>
<p>There is a substantial literature on the difficulty of avoiding cognitive biases. An effective solution to mitigate self-deception and unwanted biases is blinding. In some research contexts, participants and data collectors can be blinded to the experimental condition that participants are assigned to, and to the research hypotheses, while the data analyst can be blinded to key parts of the data. For example, during data preparation and cleaning (see chapters 6, 7), the identity of experimental conditions or the variable labels can be masked so that the output is not interpretable in terms of the research hypothesis.</p>
<p>Pre-registration of the study design, primary outcome(s) and analysis plan (see the Promoting study pre-registration section below) is a highly effective form of blinding because the data do not exist and the outcomes are not yet known.</p>
</div>
<div id="improving-methodological-training" class="section level3" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Improving methodological training</h3>
<p>Research design and statistical analysis are mutually dependent. Common misperceptions, such as the interpretation of <em>P</em> values, limitations of null-hypothesis significance testing, the meaning and importance of statistical power, the accuracy of reported effect sizes, and the likelihood that a sample size that generated a statistically significant finding will also be adequate to replicate a true finding, could all be addressed through improved statistical training. These concepts are presented in BIOL603, ADVANCED BIOMETRY.</p>
</div>
<div id="improving-chain-of-evidence-supporting-identification-of-biodiversity-occurrences" class="section level3" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> Improving chain of evidence supporting (identification of) biodiversity occurrences</h3>
<div id="are-occurrences-in-gbif-scientifically-sound" class="section level4" number="3.5.3.1">
<h4><span class="header-section-number">3.5.3.1</span> Are occurrences in GBIF scientifically sound?</h4>
<p>Primary biodiversity occurrence data are at the core of research in Ecology &amp; Evolution. They are, however, no longer gathered as they used to be and the mass-production of observation-based (OB) occurrences is overthrowing the collection of specimen-based (SB) occurrences. <span class="citation"><a href="#ref-Troudet2018" role="doc-biblioref">Troudet et al.</a> (<a href="#ref-Troudet2018" role="doc-biblioref">2018</a>)</span> analyzed 536 million occurrences from the Global Biodiversity Information Facility (<a href="https://www.gbif.org">GBIF</a>) database<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> and concluded that from 1970 to 2016 the proportion of occurrences marked as traceable to tangible material (i.e., SB occurrences) fell from 68% to 18%. Moreover, the authors added that most of those specimen based-occurrences could not be readily traced back to a specimen because the necessary information was missing. This alarming trend (i.e. the low traceability of occurrences and therefore the low confidence of species identifications based on those observations) threatens the reproducibility of biodiversity research. For instance, low confidence in species identifications prevents mining into larger databases (to infer e.g. species distribution, ecology, phenology, conservation status, phylogenetic position) to gather data allowing testing hypotheses.</p>
<p>Overall, in their study, <span class="citation"><a href="#ref-Troudet2018" role="doc-biblioref">Troudet et al.</a> (<a href="#ref-Troudet2018" role="doc-biblioref">2018</a>)</span> advocated that SB occurrences must be gathered, as a warrant to allow both repeating ecological and evolutionary studies and conducting rich and diverse investigations. They also suggested that when impossible to secure, voucher specimens must be replaced with OB occurrences combined with ancillary data (e.g., pictures, recordings, samples, DNA sequences). Ancillary data are instrumental for the usefulness of biodiversity occurrences and sadly those tend not to be shared. Such approach will allow ensuring that primary biodiversity data collected lately do not partly become obsolete when doubtful.</p>
</div>
<div id="specimens-are-more-than-just-dead-stuff-stored-in-dusty-cabinets" class="section level4" number="3.5.3.2">
<h4><span class="header-section-number">3.5.3.2</span> Specimens are more than just dead stuff stored in dusty cabinets</h4>
<p>Underpinning biodiversity occurrence with specimens (deposited in Natural History Museums and Botanical Gardens) allow:</p>
<ul>
<li>Confirming species identifications.</li>
<li>Gathering ecological data from label (e.g. GPS point, vegetation type, soil).</li>
<li>Gathering morphological features (conduct measurements allowing e.g. assessing phenotypic variability across species range).</li>
<li>Sampling tissues to support additional inferences:
<ul>
<li>molecular analyses (e.g. genotyping or sequencing).</li>
<li>anatomical analyses.</li>
<li>physiological analyses (e.g. infer diet based on carbon isotope analyses).</li>
<li>etc…</li>
</ul></li>
</ul>
<p>Those additional data provided by specimens are key in the data collecting phase and will allow further analyses to thoroughly test hypotheses. We fully understand that SB occurrences can be problematic to process (especially in Ecology), but we would urge students to consider gathering ancillary data to back-up their observations and make sure their analyses are reproducible.</p>
</div>
</div>
<div id="implementing-independent-methodological-support" class="section level3" number="3.5.4">
<h3><span class="header-section-number">3.5.4</span> Implementing independent methodological support</h3>
<p>The need for independent methodological support is well-established in some areas — many clinical trials, for example, have multidisciplinary trial steering committees to provide advice and oversee the design and conduct of the trial. The need for these committees grew out of the well-understood financial conflicts of interest that exist in many clinical trials. Including independent researchers (particularly methodologists with no personal investment in a research topic) in the design, monitoring, analysis or interpretation of research outcomes may mitigate some of those influences, and can be done either at the level of the individual research project or through a process facilitated by a funding agency.</p>
</div>
<div id="encouraging-collaboration-and-team-science" class="section level3" number="3.5.5">
<h3><span class="header-section-number">3.5.5</span> Encouraging collaboration and team science</h3>
<p>Studies of statistical power persistently find it to be below (sometimes well below) 50%, across both time and the different disciplines studied <span class="citation">(see <a href="#ref-Munafo" role="doc-biblioref">Munafo et al., 2017</a> and references therein)</span>. Low statistical power increases the likelihood of obtaining both false-positive and false-negative results, meaning that it offers no advantage if the purpose is to accumulate knowledge. Despite this, low-powered research persists because of dysfunctional incentives, poor understanding of the consequences of low power, and lack of resources to improve power. Team science is a solution to the latter problem — instead of relying on the limited resources of single investigators, distributed collaboration across many study sites facilitates high-powered designs and greater potential for testing generalizability across the settings and populations sampled. This also brings greater scope for multiple theoretical and disciplinary perspectives, and a diverse range of research cultures and experiences, to be incorporated into a research project.</p>
</div>
</div>
<div id="reporting-and-dissemination" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Reporting and dissemination</h2>
<p>This section describes measures that can be implemented when communicating research (including, for example, reporting standards, study pre-registration, and disclosing conflicts of interest).</p>
<div id="promoting-study-pre-registration" class="section level3" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> Promoting study pre-registration</h3>
<p><strong>Progress in science relies in part on generating hypotheses with existing observations and testing hypotheses with new observations.</strong> This distinction between postdiction<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> and prediction is appreciated conceptually, but is not respected in practice. Mistaking generation of postdictions with testing of predictions reduces the credibility of research findings. However, ordinary biases in human reasoning, such as hindsight bias, make it hard to avoid this mistake. An effective solution is to define the research questions and analysis plan before observing the research outcomes —a process called pre-registration. Pre-registration distinguishes analyses and outcomes that result from predictions from those that result from postdictions. A variety of practical strategies are available to make the best possible use of pre-registration in circumstances that fall short of the ideal application, such as when the data are pre-existing. Services are now available for pre-registration across all disciplines, facilitating a rapid increase in the practice. Widespread adoption of pre-registration will increase distinctiveness between hypothesis generation and hypothesis testing and will improve the credibility of research findings (in term of research quality and transparency).</p>
<p>In its simplest form study pre-registration <span class="citation">(see <a href="#ref-Nosek2600" role="doc-biblioref">Nosek et al., 2018</a>)</span> may simply comprise the registration of the basic study design, but it can also include a detailed pre-specification of the study procedures, outcomes and statistical analysis plan.</p>
<p>Study pre-registration was introduced to address two major problems:</p>
<ol style="list-style-type: lower-roman">
<li>Publication bias.</li>
<li>Analytical flexibility (in particular outcome switching).</li>
</ol>
<p>Please see the Glossary section for definitions of these concepts.</p>
</div>
<div id="improving-the-quality-of-reporting" class="section level3" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> Improving the quality of reporting</h3>
<p><strong>Pre-registration will improve discoverability of research, but discoverability does not guarantee usability.</strong> Poor usability reflects difficulty in evaluating what was done, in reusing the methodology to assess reproducibility, and in incorporating the evidence into systematic reviews and meta-analyses. Improving the quality and transparency in the reporting of research is necessary to address this.</p>
<div id="TOP" class="section level4" number="3.6.2.1">
<h4><span class="header-section-number">3.6.2.1</span> The Transparency and Openness Promotion (TOP) guidelines: A mean to improve usability</h4>
<p>TOP guidelines <span class="citation">(published in <a href="#ref-Nosek1422" role="doc-biblioref">Nosek et al., 2015</a>)</span> offer standards as a basis for journals and funders to incentivize or require greater transparency in planning and reporting of research. More precisely, TOP guidelines include eight modular standards, each with three levels of increasing stringency (). Journals are selecting which of the eight transparency standards they wish to implement and also select a level of implementation for each. These features provide flexibility for adoption depending on disciplinary variation, but simultaneously establish community standards.</p>
<div id="top-transparency-modular-standards" class="section level5" number="3.6.2.1.1">
<h5><span class="header-section-number">3.6.2.1.1</span> TOP transparency modular standards</h5>
<p>Please find below the list of eight TOP modular standards:</p>
<ol style="list-style-type: decimal">
<li>Citation standards (citation of data sets etc.).</li>
<li>Data transparency (data archiving).</li>
<li>Analytic methods transparency (code archiving).</li>
<li>Research materials transparency (materials archiving).</li>
<li>Design and analysis transparency (reporting of details of methods and results).</li>
<li>Pre-registration of studies (registering study prior to initiation).</li>
<li>Pre-registration of analysis plans (registering analysis plan prior to study initiation).</li>
<li>Replication (a study designed to replicate a previously published study).</li>
</ol>
<p>Each category template text for three levels of transparency: Level 1, Level 2, and Level 3 (). Adopting journals select among the levels based on readiness to adopt milder to stronger transparency standards for authors and researchers. There are many factors that will influence level selection including considerations for implementation, and concordance with disciplinary norms and expectations.</p>
<div class="figure"><span id="fig:TOP"></span>
<img src="Figures/TableSummary.png" alt="Table presenting the TOP standards and their associated levels of transparency." width="100%" />
<p class="caption">
Figure 3.2: Table presenting the TOP standards and their associated levels of transparency.
</p>
</div>
<p>Over 1,000 journals or organizations have implemented one or more TOP-compliant policy as of August 2018 (e.g. <em>Ecology Letters</em>, <em>The Royal Society</em>, <em>Science</em>). The full list of journals implementing TOP guidelines is available at this url: <a href="https://osf.io/2sk9f/" class="uri">https://osf.io/2sk9f/</a></p>
</div>
</div>
</div>
<div id="promoting-linkage-of-publication-data-code-and-analyses-into-a-unified-environment" class="section level3" number="3.6.3">
<h3><span class="header-section-number">3.6.3</span> Promoting linkage of publication, data, code and analyses into a unified environment</h3>
<p>The material presented in chapter 1 focusing on R Markdown (as implemented in RStudio) is a response to the need to provide a unified environment linking publication, code and data.</p>
<p>The Center for Open Science also proposes a platform called “Open Science Framework” or OSF to achieve the same goal (). <a href="https://cos.io/our-products/osf/">OSF</a> is a free and open source project management repository that supports researchers across their entire project life-cycle. As a collaboration tool, OSF helps researchers work on projects privately with a limited number of collaborators and make parts of their projects public, or make all the project publicly accessible for broader dissemination with citable, discoverable DOIs. As a workflow system, OSF enables connections to the many products researchers already use to streamline their process and increase efficiency.</p>
<p>With OSF’s workflow and storage integrations, researchers can really manage their entire projects from one place. The OSF workflow connects the valuable research tools researchers are already using, so that they can effectively share the story of their research projects and eliminate data silos and information gaps (). OSF ecosystem is designed to allow all those tools to work together the way researchers’ do, removing barriers to collaboration and knowledge ().</p>
<div class="figure" style="text-align: center"><span id="fig:OSF"></span>
<img src="Figures/new-lifecycle.original_OSF.png" alt="Overview of the OSF workflow and connections with other widely used software." width="80%" />
<p class="caption">
Figure 3.3: Overview of the OSF workflow and connections with other widely used software.
</p>
</div>
</div>
</div>
<div id="reproducibility" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Reproducibility</h2>
<p>This section describes measures that can be implemented to support verification of research (including, for example, sharing data and methods).</p>
<div id="promoting-transparency-and-open-science" class="section level3" number="3.7.1">
<h3><span class="header-section-number">3.7.1</span> Promoting transparency and open science</h3>
<p><strong>Science is a social enterprise: independent and collaborative groups work to accumulate knowledge as a public good.</strong> The credibility of scientific claims is rooted in the evidence supporting them, which includes the methodology applied, the data acquired, the process of methodology implementation, and data analysis and outcome interpretation. Claims become credible by the community reviewing, criticizing, extending and reproducing the supporting evidence. However, without transparency, claims only achieve credibility based on trust in the confidence or authority of the originator. <strong>Transparency is superior to trust.</strong></p>
<p><strong>Open science refers to the process of making the content and process of producing evidence and claims transparent and accessible to others.</strong> Transparency is a scientific ideal, and adding ‘open’ should therefore be redundant. In reality, science often lacks openness: many published articles are not available to people without a personal or institutional subscription, and most data, materials and code supporting research outcomes are not made accessible, for example, in a public repository (however this is rapidly changing with several initiatives, e.g., <a href="https://datadryad.org">Dryad</a> digital repository).</p>
<p>Very little of the research process (for example, study protocols, analysis workflows, peer review) is accessible because, historically, there have been few opportunities to make it accessible even if one wanted to do so. This has motivated calls for open access, open data and open workflows (including analysis pipelines), but there are substantial barriers to meeting these ideals, including vested financial interests (particularly in scholarly publishing) and few incentives for researchers to pursue open practices.</p>
<div id="promoting-open-science-is-good-but-open-costs-fall-onto-researchers" class="section level4" number="3.7.1.1">
<h4><span class="header-section-number">3.7.1.1</span> Promoting open science is good, but “open” costs fall onto researchers…</h4>
<p>To promote open science, several open-access journals were recently created (e.g. <a href="https://www.biomedcentral.com/p/the-bmc-series-journals"><em>BMC</em></a>, <a href="https://www.frontiersin.org"><em>Frontiers</em></a>, <a href="https://www.plos.org"><em>PLoS</em></a>). These journals facilitate sharing of scientific research (and associated methods, data and code), but they are quite expensive (&gt;$1500 on average). Waivers can be obtained for researchers based in certain countries or institutions can sponsor those initiatives and have a certain amount of papers per year published for “free.” However, if you do not fall into one of these categories, it will be quite challenging to pay for these costs without support from a grant (NSF is making an effort to promote open-science). The EEB program might be able to support some of those costs, but it will vary on the yearly budget (and when you ask).</p>
</div>
</div>
</div>
<div id="evaluation" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Evaluation</h2>
<p>This section describes measures that can be implemented when evaluating research (including, for example, peer review).</p>
<div id="diversifying-peer-review-pre--and-post-publication-reviews" class="section level3" number="3.8.1">
<h3><span class="header-section-number">3.8.1</span> Diversifying peer review: pre- and post-publication reviews</h3>
<p>For most of the history of scientific publishing, two functions have been confounded — evaluation and dissemination. Journals have provided dissemination via sorting and delivering content to the research community, and gate-keeping via peer review to determine what is worth disseminating. However, with the advent of the internet, individual researchers are no longer dependent on publishers to bind, print and mail their research to subscribers. Dissemination is now easy and can be controlled by researchers themselves (see examples of preprint publishers below).</p>
<p>With increasing ease of dissemination, the role of publishers as a gate-keeper is declining. Nevertheless, the other role of publishing — evaluation — remains a vital part of the research enterprise. Conventionally, a journal editor will select a limited number of reviewers to assess the suitability of a submission for a particular journal. However, more diverse evaluation processes are now emerging, allowing the collective wisdom of the scientific community to be harnessed. For example, some preprint services support public comments on manuscripts, a form of pre-publication review that can be used to improve the manuscript (see below). Other services, such as PubMed Commons and PubPeer, offer public platforms to comment on published works facilitating post-publication peer review. At the same time, some journals are trialing ‘results-free’ review, where editorial decisions to accept are based solely on review of the rationale and study methods alone (that is, results-blind; for instance, <a href="https://journals.plos.org/plosone/"><em>PLoS ONE</em></a> is applying this approach.).</p>
<p>Both pre- and post-publication peer review mechanisms dramatically accelerate and expand the evaluation process. By sharing preprints, researchers can obtain rapid feedback on their work from a diverse community, rather than waiting several months for a few reviews in the conventional, closed peer review process. Using post-publication services, reviewers can make positive and critical commentary on articles instantly, rather than relying on the laborious, uncertain and lengthy process of authoring a commentary and submitting it to the publishing journal for possible publication.</p>
<div id="preprint-services-to-disseminate-your-research-early-and-even-get-feedbacks" class="section level4" number="3.8.1.1">
<h4><span class="header-section-number">3.8.1.1</span> Preprint services to disseminate your research early and even get feedbacks</h4>
<p><a href="https://www.biorxiv.org"><strong>bioRxiv</strong></a> (pronounced “bio-archive”) is a free online archive and distribution service for unpublished preprints in the life sciences. It is operated by Cold Spring Harbor Laboratory, a not-for-profit research and educational institution. By posting preprints on bioRxiv, authors are able to make their findings immediately available to the scientific community and receive feedback on draft manuscripts before they are submitted to journals.</p>
<p>Articles are not peer-reviewed, edited, or typeset before being posted online. However, all articles undergo a basic screening process for offensive and/or non-scientific content and for material that might pose a health or bio-security risk and are checked for plagiarism. No endorsement of an article’s methods, assumptions, conclusions, or scientific quality by Cold Spring Harbor Laboratory is implied by its appearance in bioRxiv. An article may be posted prior to, or concurrently with, submission to a journal but should not be posted if it has already been accepted for publication by a journal.</p>
<p><a href="https://peerj.com/preprints-search/"><strong>PeerJ Preprints</strong></a> is a ‘preprint server’ for the Biological Sciences, Environmental Sciences, Medical Sciences, Health Sciences and Computer Sciences. A PeerJ Preprint is a draft of an article, abstract, or poster that has not yet been peer-reviewed for formal publication. Submit a draft, incomplete, or final version of your work for free.</p>
<p>Submissions to PeerJ Preprints are not formally peer-reviewed. Instead they are screened by PeerJ staff to ensure that they fit the subject area; do not contravene any of their policies; and that they can reasonably be considered a part of the academic literature. If a submission is found to be unsuitable in any of these respects then it will not be accepted for posting. Content which is considered to be non-scientific or pseudo-scientific will not pass the screening.</p>
</div>
</div>
</div>
<div id="incentives" class="section level2" number="3.9">
<h2><span class="header-section-number">3.9</span> Incentives</h2>
<p><strong>Publication is the currency of academic science and increases the likelihood of employment, funding, promotion and tenure.</strong> However, not all research is equally publishable. Positive, novel and clean results are more likely to be published than negative results, replications and results with loose ends; as a consequence, researchers are incentivized to produce the former, even at the cost of accuracy <span class="citation">(see <a href="#ref-Nosek2012" role="doc-biblioref">Nosek et al., 2012</a>)</span>. These incentives ultimately increase the likelihood of false positives in the published literature. Shifting the incentives therefore offers an opportunity to increase the credibility and reproducibility of published results.</p>
<p>Funders, publishers, societies, institutions, editors, reviewers and authors all contribute to the cultural norms that create and sustain dysfunctional incentives. Changing the incentives is therefore a problem that requires a coordinated effort by all stakeholders to alter reward structures. There will always be incentives for innovative outcomes — those who discover new things will be rewarded more than those who do not. However, there can also be incentives for efficiency and effectiveness — those who conduct rigorous, transparent and reproducible research could be rewarded more than those who do not. There are promising examples of effective interventions for nudging incentives. For example, journals are adopting:</p>
<ul>
<li>Badges to acknowledge open practices.</li>
<li>Registered Reports as a results-blind publishing model.</li>
<li>TOP guidelines to promote openness and transparency.</li>
</ul>
<p>Collectively, and at scale, such efforts can shift incentives such that what is good for the scientist is also good for science — rigorous, transparent and reproducible research practices producing credible results.</p>
</div>
<div id="gloss" class="section level2" number="3.10">
<h2><span class="header-section-number">3.10</span> Glossary</h2>
<p><strong>HARKing:</strong> HARKing (hypothesizing after the results are known ) is defined as presenting a <em>post hoc</em> hypothesis (i.e., one based on or informed by one’s results) in one’s research report as if it were, in fact, an <em>a priori</em> hypothesis.</p>
<p><strong>Outcome switching:</strong> refers to the possibility of changing the outcomes of interest in the study depending on the observed results. A researcher may include ten variables that could be considered outcomes of the research, and — once the results are known — intentionally or unintentionally select the subset of outcomes that show statistically significant results as the outcomes of interest. The consequence is an increase in the likelihood that reported results are spurious by leveraging chance, while negative evidence gets ignored.</p>
<p><strong>P-hacking:</strong> also known as “Data dredging” is the misuse of data analysis to find patterns in data that can be presented as statistically significant when in fact there is no real underlying effect. This is done by performing many statistical tests on the data and only paying attention to those that come back with significant results, instead of stating a single hypothesis about an underlying effect before the analysis and then conducting a single test for it.</p>
<p><strong>Publication bias:</strong> also known as the file drawer problem, refers to the fact that many more studies are conducted than published. Studies that obtain positive and novel results are more likely to be published than studies that obtain negative results or report replications of prior results. The consequence is that the published literature indicates stronger evidence for findings than exists in reality.</p>
</div>
</div>
<div id="chapter-4" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Chapter 4</h1>
<div id="introduction-3" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Introduction</h2>
<p>This chapter is subdivided into two parts as follows:</p>
<ul>
<li><a href="#partDM"><strong>PART A:</strong></a> Data management.</li>
<li><a href="#repcode"><strong>PART B:</strong></a> Reproducible code.</li>
</ul>
</div>
<div id="partDM" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Data management</h2>
<p>The presentation slides for Chapter 4 - part A can be downloaded <a href="Chapters_files/Chapter_4_Data_management.pdf">here</a>.</p>
<div id="introduction-4" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Introduction</h3>
<p>Good data management is fundamental to research excellence. It produces high-quality research data that are accessible to others and usable in the future (see <a href="#TOP">TOP guidelines</a> in chapter 3). The value of data is now explicitly acknowledged through citations (e.g. GBIF and Dryad repositories provide DOIs to cite datasets) so researchers can make a difference to their own careers, as well as to their fields of research, by sharing and making data available for reuse.</p>
<p>This chapter aims at helping students navigate data management firstly by explaining what data and data management are and why data sharing is important, and secondly by providing advice and examples of best practice in data management.</p>
</div>
<div id="literature-and-web-resources" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Literature and web resources</h3>
<p>This chapter is based on:</p>
<ul>
<li><span class="citation"><a href="#ref-DataMan" role="doc-biblioref">British Ecological Society</a> (<a href="#ref-DataMan" role="doc-biblioref">2014a</a>)</span> – A Guide to Data Management in Ecology and Evolution published by the <a href="https://www.britishecologicalsociety.org">British Ecological Society</a>.</li>
<li>UK Managing and Sharing Research Data handbook: <a href="https://data-archive.ac.uk/media/2894/managingsharing.pdf" class="uri">https://data-archive.ac.uk/media/2894/managingsharing.pdf</a></li>
<li>The companion website presenting material for UK Managing and Sharing Research Data handbook: <a href="https://www.ukdataservice.ac.uk/manage-data/handbook/" class="uri">https://www.ukdataservice.ac.uk/manage-data/handbook/</a></li>
</ul>
</div>
<div id="what-are-research-data" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> What are research data?</h3>
<p><strong>Research data are the factual pieces of information used to test research hypotheses.</strong> Data can be classified into five categories:</p>
<ul>
<li><strong>Observational:</strong> Data which are tied to time and place and are irreplaceable (e.g. field observations, weather station readings, satellite data).</li>
<li><strong>Experimental:</strong> Data generated in a controlled or partially controlled environment, which can be reproduced, although it may be expensive to do so (e.g. field plots or greenhouse experiments, chemical analyses).</li>
<li><strong>Simulation:</strong> Data generated from models (e.g. climate or population modelling).</li>
<li><strong>Derived:</strong> Data which are not collected directly but inferred from (an)other data file(s) (e.g. a population biomass which has been calculated from population density and average body size data).</li>
<li><strong>Metadata:</strong> Data about data (more about this category later).</li>
</ul>
<p>A key challenge facing researchers today is the need to work with different data sources. It is not uncommon for projects to integrate any combination of data types into a single analysis, even drawing on data from disciplines outside Ecology and Evolution. As research becomes increasingly collaborative and interdisciplinary, issues surrounding data management are growing in prevalence.</p>
</div>
<div id="the-data-life-cycle" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> The data life cycle</h3>
<p>Data have a longer lifespan than the project they were created for, as illustrated by the data life-cycle displayed in Figure <a href="#fig:LifeCycle">4.1</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:LifeCycle"></span>
<img src="Figures/Data_lifecycle.png" alt="The data lifecycle" width="60%" />
<p class="caption">
Figure 4.1: The data lifecycle
</p>
</div>
<p>Some projects may only focus on certain parts of the data life-cycle, such as primary data creation, or reusing others’ data. Other projects may go through several revolutions of the cycle. Either way, most researchers will work with data at all stages throughout their career.</p>
</div>
<div id="why-should-i-manage-data" class="section level3" number="4.2.5">
<h3><span class="header-section-number">4.2.5</span> Why should I manage data?</h3>
<p>Data management concerns how you plan for all stages of the data life-cycle and implement this plan throughout the research project. Done effectively it will ensure that the data life-cycle is kept in motion. It will also keep the research process efficient and ensure that your data meet all the expectations set by you, funders, research institutions, legislation and publishers (e.g. copyright, data protection).</p>
<p>In order to bring some perspective on this topic, ask yourself this question:</p>
<blockquote>
<p><em>Would a colleague be able to take over my project tomorrow if I disappeared, or make sense of the data without talking to me?</em></p>
</blockquote>
<p>If you can answer <strong>YES</strong>, then you are managing your data well!</p>
<div id="the-benefits-of-good-data-management-include" class="section level4" number="4.2.5.1">
<h4><span class="header-section-number">4.2.5.1</span> The benefits of good data management include:</h4>
<ul>
<li>Ensuring data are accurate, complete, authentic and reliable.</li>
<li>Increasing research efficiency.</li>
<li>Saving time and money in the long run – ‘undoing’ mistakes is frustrating.</li>
<li>Meeting funder requirements.</li>
<li>Minimizing the risk of data loss.</li>
<li>Preventing duplication by others.</li>
<li>Facilitating data sharing.</li>
</ul>
</div>
</div>
<div id="why-should-i-share-my-data" class="section level3" number="4.2.6">
<h3><span class="header-section-number">4.2.6</span> Why should I share my data?</h3>
<p>It is increasingly common for funders and publishers to mandate data sharing wherever possible. In addition, some funding bodies require data managing and sharing plans as part of grant applications (e.g. NSF). Sharing data can be daunting, but data are valuable resources and their usefulness could extend beyond the original purpose for which they were created. Benefits of sharing data include:</p>
<ul>
<li>Increasing the impact and visibility of research.</li>
<li>Encouraging collaborations and partnerships with other researchers.</li>
<li>Maximizing transparency and accountability.</li>
<li>Encouraging the improvement and validation of research methods.</li>
<li>Reducing costs of duplicating data collection.</li>
<li>Advancing science by letting others use data in innovative ways.</li>
</ul>
<div id="there-are-circumstances-where-data-cant-be-shared" class="section level4" number="4.2.6.1">
<h4><span class="header-section-number">4.2.6.1</span> There are circumstances where data can’t be shared!</h4>
<ul>
<li>If the datasets contain sensitive information about endangered or threatened species.</li>
<li>If the data contain personal information – sharing them may be a breach of protocol (and even break the law).</li>
<li>If parts of the data are owned by others – you may not have the rights to share them.</li>
</ul>
<p>During the planning stages of your project determine which of your data can’t and shouldn’t be shared. Journal data archiving policies recognize these reasons for not sharing.</p>
</div>
</div>
<div id="planning-data-management" class="section level3" number="4.2.7">
<h3><span class="header-section-number">4.2.7</span> Planning data management</h3>
<p>Regardless of whether your funder requires you to have a data management or sharing plan as part of a grant application, having such a plan in place before you begin your research project will mean that you are prepared for any data management issues that may come your way (see the Data management checklist section below).</p>
<div id="before-you-start-planning" class="section level4" number="4.2.7.1">
<h4><span class="header-section-number">4.2.7.1</span> Before you start planning</h4>
<p>Here are few things that you should consider before planning your data management workflow:</p>
<ul>
<li>Check funder specifications for data management plans.</li>
<li>Consult with your institution (especially regarding resources and policies).</li>
<li>Consider your budget.</li>
<li>Talk to your supervisor, colleagues and collaborators.</li>
</ul>
</div>
<div id="what-are-the-key-things-to-consider-when-planning" class="section level4" number="4.2.7.2">
<h4><span class="header-section-number">4.2.7.2</span> What are the key things to consider when planning?</h4>
<ul>
<li><strong>Time:</strong> Writing a data management plan may well take a significant amount of time. It is not as simple as filling out a template or working through a checklist of things to include. Planning for data management should be thorough before the research project starts to ensure that data management is embedded throughout the research process.</li>
<li><strong>Design according to your needs:</strong> Data management should be planned and implemented with the purpose of the research project in mind.</li>
<li><strong>Roles and responsibilities:</strong> Creating a data management plan may be the responsibility of one single person, but data management implementation may involve various people at different stages. One of the major uses of a data management plan is to enable coordinated working and communication among researchers on a project.</li>
<li><strong>Review:</strong> Plan how data management will be reviewed throughout the project and adapted if necessary; this will help to integrate data management into the research process and ensure that the best data management practices are being implemented. Reviewing will also help to catch any issues early on, before they turn into bigger problems.</li>
</ul>
</div>
</div>
<div id="creating-data" class="section level3" number="4.2.8">
<h3><span class="header-section-number">4.2.8</span> Creating data</h3>
<p>In the data life-cycle (Figure <a href="#fig:LifeCycle">4.1</a>), creating datasets occurs as a researcher collects data in the field or lab, and digitizes them to end up with a raw dataset.</p>
<pre><code># Workflow associated with creating data

Collect data (in the field and/or lab) --&gt; Digitize data --&gt; Raw dataset

!! Perform quality checks @ each step to validate data !!</code></pre>
<p><strong>Quality control during data collection is important</strong> because often there is only one opportunity to collect data from a given situation. Researchers should be critical of methods before collection begins – high-quality methods will result in high-quality data. Likewise, when collection is under way, detailed documentation of the collection process should be kept as evidence of quality.</p>
<div id="key-things-to-consider-during-data-collection" class="section level4" number="4.2.8.1">
<h4><span class="header-section-number">4.2.8.1</span> Key things to consider during data collection</h4>
<ul>
<li>Logistical issues in the field (what are the challenges associated with your fieldwork (e.g. no power to re-charge your batteries?).</li>
<li>Calibration of instruments (is the balance that I plan using accurate enough to weigh my samples?).</li>
<li>Taking multiple measurements/observations/samples (to e.g. ensure statistical accuracy or cover genetic variation within population).</li>
<li>Creating a template (and associated protocols) for use during data collection to ensure that all information is collected consistently, especially if there are multiple collectors.</li>
<li>Describing any conditions during data collection that might affect the quality of the data (e.g. impact of weather conditions, tropical storm, on wildlife observations).</li>
<li>Creating an accompanying questionnaire for multiple collectors, asking them any questions which may affect the quality of the data (this could account for slight differences observed during analytical phase of project. In other words, account for the effect of data collecting on analyses).</li>
<li>Widening the possible applications of data, and therefore increasing their impact, by adding variables and parameters to data. For instance, wider landscape variables, which will encourage reuse and potentially open up new avenues for research.</li>
</ul>
</div>
</div>
<div id="data-digitization" class="section level3" number="4.2.9">
<h3><span class="header-section-number">4.2.9</span> Data digitization</h3>
<p>Data may be collected directly in a digital form using devices that feed results straight into a computer/tablet or they may be collected as hand-written notes. Either way, there will be some level of processing involved to end up with a digital raw dataset.</p>
<p>Key things to consider during data digitization include:</p>
<ul>
<li>Designing a database structure to organize data and data files (i.e. making sure that observations have unique IDs).</li>
<li>Using a consistent format for each data file – e.g. one row represents a complete record and the columns represent all the parameters that make up that record (this is known as spreadsheet format).</li>
<li>Atomizing data – make sure that only one piece of data is in each entry (this greatly helps analyses).</li>
<li>Using plain text characters (e.g. ASCII, Unicode) to ensure data are readable by a maximum number of software programmes.</li>
<li>Using code – coding assigns a numerical value to variables and allows for statistical analysis of data. Keep coding simple.</li>
<li>Describing the contents of your data files in a <code>Readme.txt</code> file or even better in protocol files (later attached as appendixes of your manuscript), or other metadata standard, including a definition of each parameter, the units used and codes for missing values.</li>
<li>Keeping raw data raw.</li>
</ul>
</div>
<div id="processing-data" class="section level3" number="4.2.10">
<h3><span class="header-section-number">4.2.10</span> Processing data</h3>
<p><strong>Data should be processed into a format that is suited to subsequent analyses and ensures long-term usability.</strong> Data are at risk of being lost if the hardware and software originally used to create and process them are rendered obsolete. Therefore, data should be well organized, structured, named and versioned in standard formats that can be interpreted in the future (see the Data structure and organisation of files section below).</p>
<p>Here are some guidelines to ensure best processing of data (Figure <a href="#fig:LifeCycle">4.1</a>):</p>
<ul>
<li><strong>File formats:</strong> Data should be written in <em>non-proprietary formats</em>, also known as open standard formats. These files can be used and implemented by anyone, as opposed to proprietary formats which can only be used by those with the correct software installed. The most common format used for spreadsheet data are comma-separated values files (<code>.csv</code>). Other non-proprietary formats include: plain text files (<code>.txt</code>) for text; and <code>GIF</code>, <code>JPEG</code> and <code>PNG</code> for images.</li>
<li><strong>File names and folders:</strong> To keep track of data and know how to find them, digital files and folders should be structured and well organized. Use a folder hierarchy that fits the structure of the project and ensure that it is used consistently. Drawing a folder map which details where specific data are saved may be particularly useful if others will be accessing folders, or if there is simply a lot to navigate (store this information in the <code>Readme.txt</code> file).</li>
<li><strong>File names should be:</strong>
<ul>
<li>unique,</li>
<li>descriptive,</li>
<li>succinct,</li>
<li>naturally ordered and consistent,</li>
<li>describing the project, file contents, location, date, researcher’s initials and version.</li>
</ul></li>
<li><strong>File names should not</strong> include spaces – these can cause problems with scripting and metadata.</li>
<li><strong>Quality assurance:</strong> Checking that data have been edited, cleaned, verified and validated to create a reliable masterfile which will become the basis for further analyses (tyding up data so that they are ready for analyses). Use a scripting language, such as R, to process your data for quality checking so that all steps are documented.<br />
<strong>Assurance checks may include:</strong>
<ul>
<li>Identifying estimated values, missing values or double entries.</li>
<li>Performing statistical analyses to check for questionable or impossible values and outliers (which may just be typos from data entry).</li>
<li>Checking the format of the data for consistency across the dataset.</li>
<li>Checking the data against similar data to identify potential problems.</li>
</ul></li>
<li><strong>Version control:</strong> Once the masterfile has been finalized, keeping track of ensuing versions of this file can be challenging, especially if working with collaborators in different locations. A version control strategy will help locate required versions, and clarify how versions differ from one another.<br />
<strong>Version control best practice includes:</strong>
<ul>
<li>Deciding how many and which versions to keep.</li>
<li>Using a systematic file naming convention, using filenames that include the version number and status of the file (e.g. v1_draft, v2_internal, v3_final).</li>
<li>Record what changes took place to create the version in a separate file (e.g. a version table).</li>
<li>Mapping versions if they are stored in different locations.</li>
<li>Synchronizing versions across different locations.</li>
<li>Ensuring any cross-referenced information between files is also subject to version control.</li>
</ul></li>
</ul>
</div>
<div id="data-structure-and-organisation-of-files" class="section level3" number="4.2.11">
<h3><span class="header-section-number">4.2.11</span> Data structure and organisation of files</h3>
<p>Inferring the directory tree structure of your project provides a simple and efficient way to summarize the data structure and organization of files related to your project (see above). In UNIX, this can be easily achieved by using the <em>tree</em> package as shown in Figure <a href="#fig:TreeDir">4.2</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:TreeDir"></span>
<img src="Figures/Tree_directory.png" alt="Infer directory tree structure using the UNIX tree package." width="60%" />
<p class="caption">
Figure 4.2: Infer directory tree structure using the UNIX tree package.
</p>
</div>
<div id="the-unix-tree-package-a-way-to-support-data-structure-organisation" class="section level4" number="4.2.11.1">
<h4><span class="header-section-number">4.2.11.1</span> The UNIX <em>tree</em> package: A way to support data structure &amp; organisation</h4>
<p>The UNIX <em>tree</em> package was used here to infer the directory structure of the folder <code>Project_ID/</code> and several arguments were set to obtain data on files that could be used to check for file names and location as well as version control:</p>
<ul>
<li><code>-s</code>: Print the size of each file in bytes along with the name.</li>
<li><code>-D</code>: Print the date of the last modification time or if <code>-c</code> is used, the last status change time for the file listed.</li>
</ul>
<p>To install the <em>tree</em> package on your Mac, do the following:</p>
<pre class="r"><code>#Install tree by typing the following code in a terminal
brew install tree</code></pre>
</div>
</div>
<div id="documenting-data" class="section level3" number="4.2.12">
<h3><span class="header-section-number">4.2.12</span> Documenting data</h3>
<p>Producing good documentation and metadata ensures that data can be understood and used in the long term (Figure <a href="#fig:LifeCycle">4.1</a>). Documentation (i.e. the manual associated with your data) describes the data, explains any manipulations and provides contextual information – no room should be left for others to misinterpret the data.</p>
<p>All documentation requirements should be identified at the planning stages so you are prepared for it during all stages of the data life-cycle, particularly during data creation and processing. This will avoid having to perform a rescue mission in situations where you have forgotten what has happened or when a collaborator has left without leaving any key documentation behind.</p>
<p>Data documentation includes information at project and data levels and should cover the following information.</p>
<div id="project-level" class="section level4" number="4.2.12.1">
<h4><span class="header-section-number">4.2.12.1</span> Project level</h4>
<ul>
<li>The project aim, objectives and hypotheses.</li>
<li>Personnel involved throughout the project, including who to contact with questions.</li>
<li>Details of sponsors.</li>
<li>Data collection methods, including details of instrumentation and environmental conditions during collection, copies of collection instructions if applicable.</li>
<li>Standards used.</li>
<li>Data structure and organisation of files (see Figure <a href="#fig:TreeDir">4.2</a>).</li>
<li>Software used to prepare and read the data.</li>
<li>Procedures used for data processing, including quality control and versioning and the dates these were carried out.</li>
<li>Known problems that may limit data use.</li>
<li>Instructions on how to cite the data.</li>
<li>Intellectual property rights and other licensing considerations.</li>
</ul>
</div>
<div id="data-level" class="section level4" number="4.2.12.2">
<h4><span class="header-section-number">4.2.12.2</span> Data level</h4>
<ul>
<li>Names, labels and descriptions for variables.</li>
<li>Detailed explanation of codes used.</li>
<li>Definitions of acronyms or specialist terminology.</li>
<li>Reasons for missing values.</li>
<li>Derived data created from the raw file, including the code or algorithm used to create them.</li>
</ul>
<p>If a software package such as R is used for processing data, much of the data level documentation will be created and embedded during analysis.</p>
<p><strong>Metadata</strong> help others discover data through searching and browsing online and enable machine-to-machine interoperability of data, which is necessary for data reuse. Metadata are created by using either a data center’s deposit form, a metadata editor, or a metadata creator tool, which can be searched for online. Metadata follow a standard structure and come in three forms:</p>
<ul>
<li>Descriptive – fields such as title, author, abstract and keywords.</li>
<li>Administrative – rights and permissions and data on formatting.</li>
<li>Structural – explanations of e.g. tables within the data.</li>
</ul>
</div>
</div>
<div id="preserving-data" class="section level3" number="4.2.13">
<h3><span class="header-section-number">4.2.13</span> Preserving data</h3>
<p>To protect data from loss and to make sure data are securely stored, good data management should include a strategy for backing up and storing data effectively (see where this step fits in Figure <a href="#fig:LifeCycle">4.1</a>). It is recommended to keep three versions of your data: the original, external/local and external/remote. Talk with your thesis supervisor to isolate best procedure to ensure preservation of your data.</p>
<div id="data-backup" class="section level4" number="4.2.13.1">
<h4><span class="header-section-number">4.2.13.1</span> Data backup</h4>
<p>When designing a backup strategy, thought should be given to the possible means by which data loss could occur. These include:</p>
<ul>
<li>Hardware failure.</li>
<li>Software faults.</li>
<li>Virus infection or hacking.</li>
<li>Power failure.</li>
<li>Human error.</li>
<li>Hardware theft or misplacement (especially common during fieldwork).</li>
<li>Hardware damage (e.g. fire, flood. Again common in the field).</li>
<li>Backups – good backups being overwritten with backups from corrupt data (this happen more often that you would imagine).</li>
</ul>
<p>An ideal backup strategy should provide protection against all the risks, but it can be sensible to consider which are the most likely to occur in any particular context and be aware of these when designing your backup strategy.</p>
<div id="things-to-consider-to-establish-a-backup-plan" class="section level5" number="4.2.13.1.1">
<h5><span class="header-section-number">4.2.13.1.1</span> Things to consider to establish a backup plan</h5>
<ul>
<li>Which files require backup.</li>
<li>Who is responsible for backups.</li>
<li>The frequency of backup needed, this will be affected by how regularly files are updated.</li>
<li>Whether full or incremental backups are needed – consider running a mix of frequent incremental backups (capturing recent data changes) along with periodic full backups (capturing a ‘snapshot’ of the state of all files).</li>
<li>Backup procedures for each location where data are held, e.g. tablets, home-based computers or remote drives.</li>
<li>How to organize and label backup files.</li>
</ul>
</div>
</div>
</div>
<div id="data-storage" class="section level3" number="4.2.14">
<h3><span class="header-section-number">4.2.14</span> Data storage</h3>
<p><strong>Data storage, whether of the original or backed up data, needs to be robust.</strong> This is true whether the data are stored on paper or electronically, but electronic storage raises particular issues.</p>
<div id="guidelines-to-ensure-best-practice-for-electronic-storage-of-data" class="section level4" number="4.2.14.1">
<h4><span class="header-section-number">4.2.14.1</span> Guidelines to ensure best practice for electronic storage of data</h4>
<ul>
<li>Use high-quality storage systems (e.g. media, devices).</li>
<li>Use non-proprietary formats for long-term software readability.</li>
<li>Migrate data files every two to five years to new storage – storage media such as CDs, DVDs and hard drives can degrade over time or become outdated (e.g. floppy disks).</li>
<li>Check stored data regularly to make sure nothing has been lost.</li>
<li>Use different forms of storage for the same data, this also acts as a method of backup, e.g. using remote storage, external hard drives and a network drive.</li>
<li>Label and organize stored files logically to make them easy to locate and access.</li>
<li>Think about encryption: sensitive data may be regarded as protected while on a password-protected computer, but when backed up onto a portable hard drive they may become accessible to anyone – backups may need to be encrypted or secured too.</li>
</ul>
<div id="storage-and-backing-up-of-data" class="section level5" number="4.2.14.1.1">
<h5><span class="header-section-number">4.2.14.1.1</span> Storage and backing-up of data</h5>
<p>Data can be stored and backed up on:</p>
<ul>
<li><strong>Network drives</strong> which are managed by IT staff and are regularly backed up. They ensure secure storage and prohibit unauthorized access to files.</li>
<li><strong>Personal devices</strong> such as laptops and tablets are convenient for short-term, temporary storage but should not be used for storing master files. They are at high risk of being lost, stolen or damaged.</li>
<li><strong>External devices</strong> such as hard drives, USB sticks, CDs and DVDs are often convenient because of their cost and portability. However, they do not guarantee long-term preservation and can also be lost, stolen or damaged. High-quality external devices from reputable manufacturers should be used.</li>
<li><strong>Remote or online services</strong> such as Google Drive or Dropbox use cloud technology to allow users to synchronize files across different computers. They provide some storage space for free but any extra space or functions will have to be bought.</li>
<li><strong>Paper!</strong> If data files are not too big, do not overlook the idea of printing out a paper copy of important ones data files as a complement to electronic storage. It may not be convenient, but ink on paper has proven longevity and system independence (as long as you can remember where you put it)!</li>
</ul>
</div>
</div>
</div>
<div id="sharing-data" class="section level3" number="4.2.15">
<h3><span class="header-section-number">4.2.15</span> Sharing data</h3>
<p>Research data can be shared in many ways and each method of sharing will have advantages and disadvantages. Ways to share data include:</p>
<ul>
<li>Using a disciplinary data center such as Dryad or GenBank.</li>
<li>Depositing data in your research funder’s data center.</li>
<li>Depositing data in university repositories.</li>
<li>Making data available online via open notebooks or project websites (e.g. Open Science Framework from the Center of Open Science).</li>
<li>Using virtual research environments such as SharePoint and Sakai.</li>
</ul>
<p>Institutions, funders and journals have specific policies associated with data sharing and you should read those prior to establishing a data sharing plan. Here we will discuss the advantages of archiving your data in data repositories.</p>
<div id="data-repositories" class="section level4" number="4.2.15.1">
<h4><span class="header-section-number">4.2.15.1</span> Data repositories</h4>
<p>Archiving your data in a repository is a reliable method of sharing data. Data submitted to repositories will have to conform to submission guidelines, which may restrict which data you share via the repository. However, the advantages of sharing data through these centers include:</p>
<ul>
<li>Assurance for others that the data meet quality standards.</li>
<li>Guaranteed long-term preservation.</li>
<li>Data are secure and access can be controlled.</li>
<li>Data are regularly backed up.</li>
<li>Chances of others discovering the data are improved.</li>
<li>Citation methods are specified.</li>
<li>Secondary usage of the data is monitored.</li>
</ul>
</div>
</div>
<div id="reusing-data" class="section level3" number="4.2.16">
<h3><span class="header-section-number">4.2.16</span> Reusing data</h3>
<p><strong>All aspects of data management lead up to data discovery and reuse by others.</strong> Intellectual property rights, licenses and permissions, which concern reuse of data, should be explained in the data documentation and/or metadata.</p>
<p>At this stage of the life-cycle it is important to <strong>state your expectations for the reuse of your data</strong>, e.g. terms of acknowledgment, citation and co-authorship. Likewise, it becomes the <strong>responsibility of others to reuse data effectively</strong>, credit the collectors of the original data, cite the original data and manage any subsequent research to the same effect.</p>
<p>When requesting to use someone else’s data it is important to clearly state the purpose of the request, including the idea you will be addressing and your expectations for co-authorship or acknowledgment. Co-authorship is a complex issue and should be discussed with any collaborators at the outset of a project.</p>
<p><strong>Increasing openness to data and ensuring long-term preservation of data fosters collaboration and transparency, furthering research that aims to answer the big questions in ecology and evolution.</strong> By implementing good data management practices, researchers can ensure that high-quality data are preserved for the research community and will play a role in advancing science for future generations.</p>
</div>
<div id="data-management-checklist" class="section level3" number="4.2.17">
<h3><span class="header-section-number">4.2.17</span> Data management checklist</h3>
<p>The data management checklist from the <a href="https://www.ukdataservice.ac.uk/manage-data/plan/checklist">UK Data Archive</a> will help you design your own data management planning and data sharing. The text is available below:</p>
<div id="planning" class="section level4" number="4.2.17.1">
<h4><span class="header-section-number">4.2.17.1</span> Planning</h4>
<ul>
<li>Who is responsible for which part of data management?</li>
<li>Are new skills required for any activities?</li>
<li>Do you need extra resources to manage data, such as people, time or hardware?</li>
<li>Have you accounted for costs associated with depositing data for longer-term preservation and access?</li>
</ul>
</div>
<div id="documenting" class="section level4" number="4.2.17.2">
<h4><span class="header-section-number">4.2.17.2</span> Documenting</h4>
<ul>
<li>Will others be able to understand your data and use them properly?</li>
<li>Are your structured data self-explanatory in terms of variable names, codes and abbreviations used?</li>
<li>Which descriptions and contextual documentation explain what your data mean, how they were collected and the methods used to create them?</li>
<li>How will you label and organize data, records and files?</li>
<li>Will you be consistent in how data are cataloged?</li>
</ul>
</div>
<div id="formatting" class="section level4" number="4.2.17.3">
<h4><span class="header-section-number">4.2.17.3</span> Formatting</h4>
<ul>
<li>Are you using standardized and consistent procedures to collect, process, transcribe, check, validate and verify data, such as standard protocols, templates or input forms?</li>
<li>Which data formats will you use? Do formats and software enable sharing and long-term sustainability of data, such as non-proprietary software and software based on open standards?</li>
<li>When converting data across formats, do you check that no data, annotation or internal metadata have been lost or changed?</li>
</ul>
</div>
<div id="storing" class="section level4" number="4.2.17.4">
<h4><span class="header-section-number">4.2.17.4</span> Storing</h4>
<ul>
<li>Are your digital and non-digital data, and any copies, held in multiple safe and secure locations?</li>
<li>Do you need to securely store personal or sensitive data? If so, are they properly protected?</li>
<li>If data are collected with mobile devices, how will you transfer and store the data?</li>
<li>If data are held in multiple places, how will you keep track of versions?</li>
<li>Are your files backed up sufficiently and regularly and are backups stored safely?</li>
<li>Do you know which version of your data files is the master?</li>
<li>Who has access to which data during and after research? Is there a need for access restrictions? How will these be managed after you are dead?</li>
<li>How long will you store your data for and do you need to select which data to keep and which to destroy?</li>
</ul>
</div>
<div id="confidentiality-ethics-and-consent" class="section level4" number="4.2.17.5">
<h4><span class="header-section-number">4.2.17.5</span> Confidentiality, ethics and consent</h4>
<ul>
<li>Do your data contain confidential or sensitive information? If so, have you discussed data sharing with the respondents from whom you collected the data?</li>
<li>Are you gaining written consent from respondents to share data beyond your research?</li>
<li>Do you need to anonymise data, for example, to remove identifying information or personal data, during research or in preparation for sharing?</li>
</ul>
</div>
<div id="copyright" class="section level4" number="4.2.17.6">
<h4><span class="header-section-number">4.2.17.6</span> Copyright</h4>
<ul>
<li>Have you established who owns the copyright in your data? Might there be joint copyright?</li>
<li>Have you considered which kind of license is appropriate for sharing your data and what, if any, restrictions there might be on re-use?</li>
<li>If you are purchasing or re-using someone else’s data sources have you considered how that data might be shareable, for example negotiating a new licence with the original supplier?</li>
<li>Can you preserve for the long-term, personal information so that it can be used in the future?</li>
</ul>
</div>
<div id="sharing" class="section level4" number="4.2.17.7">
<h4><span class="header-section-number">4.2.17.7</span> Sharing</h4>
<ul>
<li>Do you intend to make all your data available for sharing or how will you select which data to preserve and share?</li>
<li>How and where will you preserve your research data for the longer-term?</li>
<li>How will you make your data accessible to future users?</li>
</ul>
</div>
</div>
</div>
<div id="repcode" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Reproducible code</h2>
<p>The presentation slides for Chapter 4 - part B can be downloaded <a href="Chapters_files/Chapter_4_Reproducible_code.pdf">here</a>.</p>
<div id="introduction-5" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Introduction</h3>
<p>The following steps have to be fully integrated in order to produce a reproducible code:</p>
<ul>
<li><strong>Step 1:</strong> Establish a reproducible project workflow.</li>
<li><strong>Step 2:</strong> Organize project for reproducibility.</li>
<li><strong>Step 3:</strong> Ensure basic programming standards.</li>
<li><strong>Step 4:</strong> Document and manage dependencies.</li>
<li><strong>Step 5:</strong> Produce a reproducible report (with R Markdown).</li>
<li><strong>Step 6:</strong> Implement a version control protocol (with Git).</li>
<li><strong>Step 7:</strong> Ensure archiving and citation of code.</li>
</ul>
<p>In this chapter, we will cover steps 1 to 4. Steps 5 and 7 have been respectively studied in chapters 1 and 4 (Data management), whereas step 6 will be covered in the bioinformatic tutorial associated to chapter 11.</p>
</div>
<div id="literature-and-web-resources-1" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Literature and web resources</h3>
<p>This chapter is based on:</p>
<ul>
<li><span class="citation"><a href="#ref-RepCode" role="doc-biblioref">British Ecological Society</a> (<a href="#ref-RepCode" role="doc-biblioref">2014c</a>)</span> – <em>A Guide to Reproducible Code in Ecology and Evolution</em> published by the <a href="https://www.britishecologicalsociety.org">British Ecological Society</a>.</li>
<li><span class="citation"><a href="#ref-wickham2014advanced" role="doc-biblioref">Wickham</a> (<a href="#ref-wickham2014advanced" role="doc-biblioref">2014</a>)</span> – <em>Advanced R</em> by Hadley Wickham (<a href="https://adv-r.hadley.nz" class="uri">https://adv-r.hadley.nz</a>)</li>
<li>Hadley Wickham’s R Style Guides: <a href="http://adv-r.had.co.nz/Style.html" class="uri">http://adv-r.had.co.nz/Style.html</a></li>
<li>Absolute vs relative paths: <a href="https://en.wikipedia.org/wiki/Path_(computing)#Absolute_and_relative_paths" class="uri">https://en.wikipedia.org/wiki/Path_(computing)#Absolute_and_relative_paths</a></li>
</ul>
</div>
<div id="draw-a-reproducible-project-workflow" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> “Draw” a reproducible project workflow</h3>
<div class="figure" style="text-align: center"><span id="fig:ReproWorkflow"></span>
<img src="Figures/Reproducible_code_workflow.png" alt="A simple reproducible project workflow." width="100%" />
<p class="caption">
Figure 4.3: A simple reproducible project workflow.
</p>
</div>
<p>An example of a reproducible project workflow is displayed in Figure <a href="#fig:ReproWorkflow">4.3</a>. This workflow serves as a basis for the discussion presented in this chapter.</p>
</div>
<div id="organize-project-for-reproducibility" class="section level3" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Organize project for reproducibility</h3>
<div id="the-repeatable-reproducible-analysis-workflow" class="section level4" number="4.3.4.1">
<h4><span class="header-section-number">4.3.4.1</span> The repeatable, reproducible analysis workflow</h4>
<p>The fundamental idea behind a robust, reproducible analysis is <strong>a clean, repeatable script-based workflow (i.e. the sequence of tasks from the start to the end of a project) linking raw data through to clean data and to final analysis outputs</strong>.</p>
</div>
<div id="principles-of-a-good-analysis-workflow" class="section level4" number="4.3.4.2">
<h4><span class="header-section-number">4.3.4.2</span> Principles of a good analysis workflow</h4>
<p>Please find below some key concepts associated with this task:</p>
<ul>
<li>Start your analysis from copies of your raw data.</li>
<li>Any cleaning, merging, transforming, etc. of data should be done in scripts, not manually.</li>
<li>Split your workflow (scripts) into logical thematic units. For example, you might separate your code into scripts that
<ol style="list-style-type: lower-roman">
<li>load, merge and clean data,</li>
<li>analyse data,</li>
<li>produce outputs like figures and tables.</li>
</ol></li>
<li>Eliminate code duplication by packaging up useful code into custom functions (see Step3 : Ensure basic programming standards). Make sure to <strong>comment your functions thoroughly, explaining their expected inputs and outputs (as well as the associated arguments and their options), and what they are doing and why</strong>.</li>
<li>Document your code and data as comments in your scripts and by producing separate documentation (using the R Markdown format).</li>
<li>Any intermediary outputs generated by your workflow should be kept separate from raw data.</li>
<li>Keep your raw data raw.</li>
</ul>
</div>
<div id="organizing-and-documenting-workflows" class="section level4" number="4.3.4.3">
<h4><span class="header-section-number">4.3.4.3</span> Organizing and documenting workflows</h4>
<p>The simplest and most effective way of documenting your workflow – its inputs and outputs – is through good file system organization, and informative, consistent naming of materials associated with your analysis. The name and location of files should be as informative as possible on what a file contains, why it exists, and how it relates to other files in the project. These principles extend to all files in your project (not just scripts) and are also intimately linked to good research data management (see Chapter 4: Data management).</p>
</div>
<div id="file-system-structure" class="section level4" number="4.3.4.4">
<h4><span class="header-section-number">4.3.4.4</span> File system structure</h4>
<p>It is best to keep all files associated with a particular project in a single root directory. RStudio projects offer a great way to keep everything together in a self-contained and portable (i.e. so they can be moved from computer to computer) manner, allowing internal pathways to data and other scripts to remain valid even when shared or moved.</p>
<div class="figure" style="text-align: center"><span id="fig:ProjStuct"></span>
<img src="Figures/Example_project_structure.png" alt="Example file structure of a simple analysis project. Make sure you left-pad single digit numbers with a zero for the R scripts to avoid having those misordered." width="100%" />
<p class="caption">
Figure 4.4: Example file structure of a simple analysis project. Make sure you left-pad single digit numbers with a zero for the R scripts to avoid having those misordered.
</p>
</div>
<p>There is no single best way to organize a file system. The key is to make sure that the structure of directories and location of files are consistent, informative and works for you. Please find below an example of basic project directory structure (Figure <a href="#fig:ProjStuct">4.4</a>):</p>
<ul>
<li>The <code>data</code> folder contains all input data (and metadata) used in the analysis.</li>
<li>The <code>MS</code> folder contains the manuscript.</li>
<li>The <code>Figures_&amp;_Tables</code> folder contains figures and tables generated by the analyses.</li>
<li>The <code>Output</code> folder contains any type of intermediate or output files (e.g. simulation outputs, models, processed datasets, etc.). You might separate this and also have a <code>cleaned-data</code> folder.</li>
<li>The <code>R_functions</code> folder contains R scripts with function definitions.</li>
<li>The <code>Reports</code> folder contains RMarkdown files that document the analysis or report on results.</li>
<li>The scripts (<code>*.R</code>) that actually do things are stored in the root directory together with the <code>README.md</code> file. If your project has too many scripts, you might consider organizing them in a separate folder.</li>
</ul>
</div>
<div id="using-r-to-infer-data-structure-and-files-organization" class="section level4" number="4.3.4.5">
<h4><span class="header-section-number">4.3.4.5</span> Using R to infer data structure and files organization</h4>
<p>Inferring the directory tree structure of your project provides a simple and efficient way to summarize the data structure and organization of files related to your project as well as track versioning. The R base functions <em>list.files()</em> and <em>file.info()</em> can be combined to obtain information on files stored in your project. Please see code below for an example associated to Figure <a href="#fig:ProjStuct">4.4</a>.</p>
<pre class="r"><code># Produce a list of all files in working directory
# (Project-ID) together with info related to those files
file.info(list.files(path = &quot;Project_ID&quot;, recursive = TRUE, full.name = TRUE))</code></pre>
<pre><code>##                                                         size isdir mode
## Project_ID/Data/species_data.csv                           6 FALSE  644
## Project_ID/Figures_&amp;_Tables/Fig_01_Data_lifecycle.pdf  10282 FALSE  644
## Project_ID/MS/MS_et_al.docx                            11705 FALSE  644
## Project_ID/Output/DataStr_network.html                256368 FALSE  644
## Project_ID/Output/DataStr_tree.pdf                      3611 FALSE  644
## Project_ID/R_functions/check.install.pkg.R               684 FALSE  644
## Project_ID/README.md                                    1000 FALSE  644
## Project_ID/Reports/Documentation.md                       14 FALSE  644
## Project_ID/Scripts/01_download_data.R                     14 FALSE  644
## Project_ID/Scripts/02_clean_data.R                        14 FALSE  644
## Project_ID/Scripts/03_exploratory_analyses.R              14 FALSE  644
## Project_ID/Scripts/04_fit_models.R                        14 FALSE  644
## Project_ID/Scripts/05_generate_figures.R                  14 FALSE  644
##                                                                     mtime
## Project_ID/Data/species_data.csv                      2018-09-12 10:02:55
## Project_ID/Figures_&amp;_Tables/Fig_01_Data_lifecycle.pdf 2018-09-09 10:38:23
## Project_ID/MS/MS_et_al.docx                           2019-09-23 11:51:58
## Project_ID/Output/DataStr_network.html                2019-09-23 13:27:30
## Project_ID/Output/DataStr_tree.pdf                    2019-09-23 13:04:03
## Project_ID/R_functions/check.install.pkg.R            2019-09-10 09:54:03
## Project_ID/README.md                                  2021-10-03 13:32:58
## Project_ID/Reports/Documentation.md                   2018-09-12 08:56:42
## Project_ID/Scripts/01_download_data.R                 2018-09-12 08:56:42
## Project_ID/Scripts/02_clean_data.R                    2018-09-12 08:56:42
## Project_ID/Scripts/03_exploratory_analyses.R          2018-09-12 08:56:42
## Project_ID/Scripts/04_fit_models.R                    2018-09-12 08:56:42
## Project_ID/Scripts/05_generate_figures.R              2018-09-12 08:56:42
##                                                                     ctime
## Project_ID/Data/species_data.csv                      2021-09-28 14:12:19
## Project_ID/Figures_&amp;_Tables/Fig_01_Data_lifecycle.pdf 2021-09-28 14:12:19
## Project_ID/MS/MS_et_al.docx                           2021-09-28 14:12:19
## Project_ID/Output/DataStr_network.html                2021-09-28 14:12:19
## Project_ID/Output/DataStr_tree.pdf                    2021-09-28 14:12:19
## Project_ID/R_functions/check.install.pkg.R            2021-09-28 14:12:19
## Project_ID/README.md                                  2021-10-03 13:32:58
## Project_ID/Reports/Documentation.md                   2021-09-28 14:12:19
## Project_ID/Scripts/01_download_data.R                 2021-09-28 14:12:19
## Project_ID/Scripts/02_clean_data.R                    2021-09-28 14:12:19
## Project_ID/Scripts/03_exploratory_analyses.R          2021-09-28 14:12:19
## Project_ID/Scripts/04_fit_models.R                    2021-09-28 14:12:19
## Project_ID/Scripts/05_generate_figures.R              2021-09-28 14:12:19
##                                                                     atime uid
## Project_ID/Data/species_data.csv                      2021-10-03 13:54:38 502
## Project_ID/Figures_&amp;_Tables/Fig_01_Data_lifecycle.pdf 2021-10-03 13:54:38 502
## Project_ID/MS/MS_et_al.docx                           2021-10-03 13:54:38 502
## Project_ID/Output/DataStr_network.html                2021-10-03 13:54:38 502
## Project_ID/Output/DataStr_tree.pdf                    2021-10-03 13:54:38 502
## Project_ID/R_functions/check.install.pkg.R            2021-10-03 13:54:38 502
## Project_ID/README.md                                  2021-10-03 13:51:38 502
## Project_ID/Reports/Documentation.md                   2021-10-03 13:54:38 502
## Project_ID/Scripts/01_download_data.R                 2021-10-03 13:54:38 502
## Project_ID/Scripts/02_clean_data.R                    2021-10-03 13:54:38 502
## Project_ID/Scripts/03_exploratory_analyses.R          2021-10-03 13:54:38 502
## Project_ID/Scripts/04_fit_models.R                    2021-10-03 13:54:38 502
## Project_ID/Scripts/05_generate_figures.R              2021-10-03 13:54:38 502
##                                                       gid      uname grname
## Project_ID/Data/species_data.csv                       20 svenbuerki  staff
## Project_ID/Figures_&amp;_Tables/Fig_01_Data_lifecycle.pdf  20 svenbuerki  staff
## Project_ID/MS/MS_et_al.docx                            20 svenbuerki  staff
## Project_ID/Output/DataStr_network.html                 20 svenbuerki  staff
## Project_ID/Output/DataStr_tree.pdf                     20 svenbuerki  staff
## Project_ID/R_functions/check.install.pkg.R             20 svenbuerki  staff
## Project_ID/README.md                                   20 svenbuerki  staff
## Project_ID/Reports/Documentation.md                    20 svenbuerki  staff
## Project_ID/Scripts/01_download_data.R                  20 svenbuerki  staff
## Project_ID/Scripts/02_clean_data.R                     20 svenbuerki  staff
## Project_ID/Scripts/03_exploratory_analyses.R           20 svenbuerki  staff
## Project_ID/Scripts/04_fit_models.R                     20 svenbuerki  staff
## Project_ID/Scripts/05_generate_figures.R               20 svenbuerki  staff</code></pre>
</div>
<div id="pseudocode-and-associated-r-script" class="section level4" number="4.3.4.6">
<h4><span class="header-section-number">4.3.4.6</span> Pseudocode and associated R script</h4>
<p>The code presented above could be at the core of a user-defined function that would aim at managing files and ensuring data reliability for your project. To help you define such a function, let’s investigate this further and produce a diagram summarizing your project structure. This objective is achieved in three steps (see Figure <a href="#fig:plotProjStr">4.5</a>):</p>
<ul>
<li><strong>Step 1:</strong> Produce a list of all files in your working directory using <em>file.info</em> and <em>list.files</em> functions. The output of this code is a <code>data.frame</code></li>
<li><strong>Step 2:</strong> Convert the <code>data.frame</code> into a <code>data.tree</code> class object. This is done using the <em>data.tree::as.Node</em> function from the <code>data.tree</code> package.</li>
<li><strong>Step 3:</strong> Prepare and plot diagram of project structure. This is done using set of functions from <code>data.tree</code> and plotting the output using <code>DiagrammR</code> package.</li>
</ul>
<p><strong>WARNING:</strong> Prior to starting the exercise, please go on the shared Google Drive and download the <code>Project_ID</code> folder at this path:</p>
<p><code>Reproducible_Science &gt; Exercises &gt; Chapter_5 &gt; Project_ID</code></p>
<div id="r-code-and-associated-outputs" class="section level5" number="4.3.4.6.1">
<h5><span class="header-section-number">4.3.4.6.1</span> R code and associated outputs</h5>
<pre class="r"><code>### Load R packages
library(data.tree)
library(DiagrammeR)
### Step 1: Produce a list of all files in Project_ID
filesInfo &lt;- file.info(list.files(path = &quot;Project_ID&quot;, recursive = TRUE, 
    full.name = TRUE))
### Step 2: Convert filesInfo into data.tree class
myproj &lt;- data.tree::as.Node(data.frame(pathString = rownames(filesInfo)))
# Inspect output
print(myproj)</code></pre>
<pre><code>##                            levelName
## 1  Project_ID                       
## 2   ¦--Data                         
## 3   ¦   °--species_data.csv         
## 4   ¦--Figures_&amp;_Tables             
## 5   ¦   °--Fig_01_Data_lifecycle.pdf
## 6   ¦--MS                           
## 7   ¦   °--MS_et_al.docx            
## 8   ¦--Output                       
## 9   ¦   ¦--DataStr_network.html     
## 10  ¦   °--DataStr_tree.pdf         
## 11  ¦--R_functions                  
## 12  ¦   °--check.install.pkg.R      
## 13  ¦--README.md                    
## 14  ¦--Reports                      
## 15  ¦   °--Documentation.md         
## 16  °--Scripts                      
## 17      ¦--01_download_data.R       
## 18      ¦--02_clean_data.R          
## 19      ¦--03_exploratory_analyses.R
## 20      ¦--04_fit_models.R          
## 21      °--05_generate_figures.R</code></pre>
<pre class="r"><code>### Step 3: Prepare and plot diagram of project structure (it
### requires DiagrammeR)
# Set general parameters related to graph
data.tree::SetGraphStyle(myproj$root, rankdir = &quot;LR&quot;)
# Set parameters for edges
data.tree::SetEdgeStyle(myproj$root, arrowhead = &quot;vee&quot;, color = &quot;grey&quot;, 
    penwidth = &quot;2px&quot;)
# Set parameters for nodes
data.tree::SetNodeStyle(myproj, style = &quot;rounded&quot;, shape = &quot;box&quot;)
# Apply specific criteria only to children nodes of Scripts
# and R_functions folders
data.tree::SetNodeStyle(myproj$Scripts, style = &quot;box&quot;, penwidth = &quot;2px&quot;)
data.tree::SetNodeStyle(myproj$R_functions, style = &quot;box&quot;, penwidth = &quot;2px&quot;)
# Plot diagram
plot(myproj)</code></pre>
<div class="figure"><span id="fig:plotProjStr"></span>
<div id="htmlwidget-3c97aba4593615c34abb" style="width:576px;height:576px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-3c97aba4593615c34abb">{"x":{"diagram":"digraph {\n\ngraph [rankdir = \"LR\"]\n\n\n\n  \"1\" [label = \"Project_ID\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"2\" [label = \"Data\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"3\" [label = \"species_data.csv\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"4\" [label = \"Figures_&_Tables\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"5\" [label = \"Fig_01_Data_lifecycle.pdf\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"6\" [label = \"MS\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"7\" [label = \"MS_et_al.docx\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"8\" [label = \"Output\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"9\" [label = \"DataStr_network.html\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"10\" [label = \"DataStr_tree.pdf\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"11\" [label = \"R_functions\", style = \"box\", shape = \"box\", penwidth = \"2px\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"12\" [label = \"check.install.pkg.R\", style = \"box\", shape = \"box\", penwidth = \"2px\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"13\" [label = \"README.md\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"14\" [label = \"Reports\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"15\" [label = \"Documentation.md\", style = \"rounded\", shape = \"box\", penwidth = \"\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"16\" [label = \"Scripts\", style = \"box\", shape = \"box\", penwidth = \"2px\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"17\" [label = \"01_download_data.R\", style = \"box\", shape = \"box\", penwidth = \"2px\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"18\" [label = \"02_clean_data.R\", style = \"box\", shape = \"box\", penwidth = \"2px\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"19\" [label = \"03_exploratory_analyses.R\", style = \"box\", shape = \"box\", penwidth = \"2px\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"20\" [label = \"04_fit_models.R\", style = \"box\", shape = \"box\", penwidth = \"2px\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n  \"21\" [label = \"05_generate_figures.R\", style = \"box\", shape = \"box\", penwidth = \"2px\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\"] \n\"1\"->\"2\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"1\"->\"4\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"1\"->\"6\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"1\"->\"8\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"1\"->\"11\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"1\"->\"13\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"1\"->\"14\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"1\"->\"16\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"2\"->\"3\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"4\"->\"5\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"6\"->\"7\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"8\"->\"9\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"8\"->\"10\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"11\"->\"12\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"14\"->\"15\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"16\"->\"17\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"16\"->\"18\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"16\"->\"19\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"16\"->\"20\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n\"16\"->\"21\" [arrowhead = \"vee\", color = \"grey\", penwidth = \"2px\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 4.5: Diagram of project structure for the Project_ID directory. Nodes representing folders and files associated to R code are symbolized by boxes, whereas the others are rounded.
</p>
</div>
</div>
</div>
<div id="informative-consistent-naming" class="section level4" number="4.3.4.7">
<h4><span class="header-section-number">4.3.4.7</span> Informative, consistent naming</h4>
<p>Good naming extends to all files, folders and even objects in your analysis and serves to make the contents and relationships among elements of your analysis understandable, searchable and organised in a logical fashion (see Figure <a href="#fig:ProjStuct">4.4</a> for examples and Chapter 4: Data management for more details).</p>
</div>
</div>
<div id="ensure-basic-programming-standards" class="section level3" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Ensure basic programming standards</h3>
<div id="writing-pseudocode-1" class="section level4" number="4.3.5.1">
<h4><span class="header-section-number">4.3.5.1</span> Writing pseudocode</h4>
<p>Pseudocode is an informal high-level description of the operating principle of a computer program or other algorithm. It uses the structural conventions of a normal programming language (here R), but is intended for human reading rather than machine reading. Here, you will establish the big steps (and their associated tasks) and tie R functions (existing or that have to be made) to those steps. This provides the backbone of your code and will support writing it.</p>
</div>
<div id="writing-code-1" class="section level4" number="4.3.5.2">
<h4><span class="header-section-number">4.3.5.2</span> Writing code</h4>
<p>Writing clear, reproducible code has (at least) three main benefits:
1. It makes returning to the code much easier a few months down the line; whether revisiting an old project, or making revisions following peer review.
2. The results of your analysis are more easily scrutinized by the readers of your paper, meaning it is easier to show their validity.
3. Having clean and reproducible code available can encourage greater uptake of new methods that you have developed.</p>
<p>To write clear and reproducible code, it is recommended to follow the workflow depicted in Figure <a href="#fig:ReproWorkflow">4.3</a>. The following section explains each part of the workflow along with some tips for writing code. Although this workflow would be the ‘gold standard,’ just picking up some of the elements can help to make your code more effective and readable.</p>
</div>
<div id="style-guides" class="section level4" number="4.3.5.3">
<h4><span class="header-section-number">4.3.5.3</span> Style guides</h4>
<p>The foundation of writing readable code is to choose a logical and readable coding style, and to stick to it. Some key elements to consider when developing a coding style are:</p>
<ul>
<li>Using meaningful file names, and numbering these if they are in a sequence (see Figure <a href="#fig:ProjStuct">4.4</a> for examples and Chapter 4: Data management for more details).</li>
</ul>
<pre class="r"><code>### Naming files
# Good
fit-models.R
utility-functions.R

# Bad
foo.r
stuff.r</code></pre>
<ul>
<li>Concise and descriptive object names. Variable names should usually be nouns and function names verbs. Using names of existing variables or functions should be avoided.</li>
</ul>
<pre class="r"><code>### Naming objects
# Good
day_one
day_1

# Bad
first_day_of_the_month
DayOne
dayone
djm1</code></pre>
<ul>
<li>Spacing should be used to improve visual effect: use spaces around operators (<code>=</code>, <code>+</code>, <code>-</code>, <code>&lt;-</code>, etc.), and after commas (much like in a sentence).</li>
</ul>
<pre class="r"><code>### Spacing
# Good
average &lt;- mean(feet / 12 + inches, na.rm = TRUE)

# Bad
average&lt;-mean(feet/12+inches,na.rm=TRUE)</code></pre>
<ul>
<li>Indentation should be with two spaces, not tabs, and definitely not a mixture of tabs and spaces.</li>
</ul>
<pre class="r"><code>### Indentation
long_function_name &lt;- function(a = &quot;a long argument&quot;, 
                               b = &quot;another argument&quot;,
                               c = &quot;another long argument&quot;) {
  # As usual code is indented by two spaces.
}</code></pre>
<ul>
<li>Assignment. Use <code>&lt;-</code>, not <code>=</code>, for assignment.</li>
</ul>
<pre class="r"><code>### Assignment
# Good
x &lt;- 5

# Bad
x = 5</code></pre>
<p>The most important role of a style guide, however, is to introduce consistency to scripts.</p>
</div>
<div id="portable-code-absolute-vs.-relative-paths" class="section level4" number="4.3.5.4">
<h4><span class="header-section-number">4.3.5.4</span> Portable code: Absolute vs. Relative paths</h4>
<p>When working collaboratively, portability between machines is very important, i.e. will your code work on someone else’s computer? Portability is also important if code is being run on another server, for example a High Performance Cluster. One way to improve portability of code is to avoid using absolute paths and use only relative paths (see <a href="https://en.wikipedia.org/wiki/Path_(computing)#Absolute_and_relative_paths" class="uri">https://en.wikipedia.org/wiki/Path_(computing)#Absolute_and_relative_paths</a>).</p>
<p><strong>An absolute path is one that gives the full address to a folder or file. A relative path gives the location of the file from the current working directory.</strong></p>
<p>For example based on <code>species_data.csv</code> stored in the <code>Data</code> folder shown in Figure <a href="#fig:ProjStuct">4.4</a>:</p>
<pre class="r"><code># Absolute path -----------------------------
C:/Project_ID/Data/species_data.csv

Project_ID = Project root folder = working directory

# Relative path ------
Data/species_data.csv</code></pre>
<p>Relative paths are particularly useful when transferring between computers because while I may have stored my project folder in ‘C:/Project_ID/,’ you may have yours stored in ‘C:/Users/My Documents.’ Using relative paths and running from the project folder will ensure that <em>file-not-found errors</em> are avoided.</p>
<p>RStudio is especially designed to help portability of code. For instance, you can easily set the working directory in RStudio by clicking:</p>
<pre class="r"><code>Session &gt; Set Working Directory &gt; To Source File Location</code></pre>
<p>or using the <em>setwd()</em> function. Please see chapter 1 for more details.</p>
</div>
<div id="commenting-code" class="section level4" number="4.3.5.5">
<h4><span class="header-section-number">4.3.5.5</span> Commenting code</h4>
<p>How often have you revisited an old script six months down the line and not been able to figure out what you had been doing? Or have taken on a script from a collaborator and not been able to understand what their code is doing and why? An easy win for making code more readable and reproducible is the liberal, and effective, use of comments. A comment is a line of code that is visible, but does not get run with the rest of the script. In R and Python this is signified by beginning the line with a #.</p>
<p><strong>One good principle to adhere to is to comment the ‘why’ rather than the ‘what’</strong>. The code itself tells the reader what is being done, it is far more important to document the reasoning behind a particular section of code or, if it is doing something nonstandard or complicated, to take some time to describe that section of code.</p>
<p>It is also good practice to use comments to add an overview at the beginning of a script, and commented lines of <code>---</code> to break up the script: e.g. in R</p>
<pre class="r"><code># Load data -------</code></pre>
</div>
<div id="writing-functions" class="section level4" number="4.3.5.6">
<h4><span class="header-section-number">4.3.5.6</span> Writing functions</h4>
<p>Often when you are analyzing data, you need to repeat the same task many times. For example, you might have several files that all need loading and cleaning in the same way, or you might need to perform the same analysis for multiple species or parameters. The best way (by far) to handle those tasks is to write functions and store those in a specific folder (e.g. <code>R_functions</code> in <a href="#fig:ProjStuct">4.4</a>). Those functions will be loaded into the R environment (and therefore made available to users) by using the <code>source()</code> function, which will be placed at the top of your R script. Please see Chapter 1 part D for more details.</p>
</div>
<div id="testing-scientific-code" class="section level4" number="4.3.5.7">
<h4><span class="header-section-number">4.3.5.7</span> Testing scientific code</h4>
<p>In the experimental sciences, rigorous testing is applied to ensure that results are accurate, reproducible and reliable. Testing will show that the experimental setup is doing what it is meant to do and will quantify any systematic biases. Results of experiments will not be trusted without such tests; why should your code be any different? Testing scientific code allows you to be sure that it is working as intended and to understand and quantify any limitations of the code. Using tests can also help to speed up the code development process by finding errors early on.</p>
<p>Although the instructor recognizes the importance of establishing protocols, those tests will be especially relevant if you were to design R packages. However, the instructor would recommend informal testing by loading functions that have been written by the students and running <em>ad hoc</em> tests in the command line to make sure that they perform as expected.</p>
</div>
</div>
<div id="document-and-manage-dependencies" class="section level3" number="4.3.6">
<h3><span class="header-section-number">4.3.6</span> Document and manage dependencies</h3>
<p>Reproducibility is also about making sure someone else can re-use your code to obtain the same results as you (see <a href="#appendix-1">Appendix 1</a> for more details).</p>
<p>For someone else to be able to reproduce the results included in your report, you need to provide more than the code and the data. You also need to document the exact versions of all the packages, libraries, and software you used, and potentially your operating system as well as your hardware.</p>
<p>R itself is very stable, and the core team of developers takes backward compatibility (old code works with recent versions of R) very seriously. However, default values in some functions change, and new functions get introduced regularly. If you wrote your code on a recent version of R and give it to someone who has not upgraded recently, they may not be able to run your code. Code written for one version of a package may produce very different results with a more recent version.</p>
<div id="reporting-r-packages-and-versions" class="section level4" number="4.3.6.1">
<h4><span class="header-section-number">4.3.6.1</span> Reporting R packages and versions</h4>
<p>With R, the simplest (but a useful and important) approach to document your dependencies is to report the output of <code>sessionInfo()</code> (or <code>devtools::session_info()</code>). Among other information, this will show all the packages and their versions that are loaded in the session you used to run your analysis. If someone wants to recreate your analysis, they will know which packages they will need to install. Please see <a href="#appendix-2">Appendix 2</a> for more details.</p>
<p>For instance, here is the output of <code>sessionInfo()</code> showing the R version and packages that I used to create this document:</p>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 3.6.1 (2019-07-05)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS Mojave 10.14.6
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] DiagrammeR_1.0.6.1   data.tree_1.0.0      kableExtra_1.2.1    
##  [4] dplyr_1.0.2          kfigr_1.2            devtools_2.3.2      
##  [7] usethis_2.0.0        formatR_1.7          knitcitations_1.0.10
## [10] bookdown_0.21        rmarkdown_2.6        knitr_1.30          
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.6         lubridate_1.7.9.2  tidyr_1.1.2        prettyunits_1.1.1 
##  [5] ps_1.5.0           visNetwork_2.0.9   assertthat_0.2.1   rprojroot_2.0.2   
##  [9] digest_0.6.27      R6_2.5.0           plyr_1.8.6         evaluate_0.14     
## [13] httr_1.4.2         highr_0.8          pillar_1.4.7       rlang_0.4.10      
## [17] rstudioapi_0.13    callr_3.5.1        desc_1.2.0         webshot_0.5.2     
## [21] RefManageR_1.2.12  stringr_1.4.0      htmlwidgets_1.5.3  munsell_0.5.0     
## [25] compiler_3.6.1     xfun_0.20          pkgconfig_2.0.3    pkgbuild_1.2.0    
## [29] htmltools_0.5.0    tidyselect_1.1.0   tibble_3.0.4       fansi_0.4.1       
## [33] viridisLite_0.3.0  crayon_1.3.4       withr_2.3.0        jsonlite_1.7.2    
## [37] lifecycle_0.2.0    magrittr_2.0.1     scales_1.1.1       bibtex_0.4.2.3    
## [41] cli_2.2.0          stringi_1.5.3      fs_1.5.0           remotes_2.2.0     
## [45] testthat_3.0.1     xml2_1.3.2         ellipsis_0.3.1     vctrs_0.3.6       
## [49] generics_0.1.0     RColorBrewer_1.1-2 tools_3.6.1        glue_1.4.2        
## [53] purrr_0.3.4        processx_3.4.5     pkgload_1.1.0      yaml_2.2.1        
## [57] colorspace_2.0-0   sessioninfo_1.1.1  rvest_0.3.6        memoise_1.1.0</code></pre>
</div>
<div id="using-r-packages-to-help-managing-dependencies-and-recreate-setup" class="section level4" number="4.3.6.2">
<h4><span class="header-section-number">4.3.6.2</span> Using R packages to help managing dependencies and recreate setup</h4>
<p>This will not be covered in this class, but it is worth noting that there are at least two R packages allowing to better manage dependencies and recreate your setup. Those packages are:</p>
<ul>
<li><em>checkpoint</em>: <a href="https://cran.r-project.org/web/packages/checkpoint/vignettes/checkpoint.html" class="uri">https://cran.r-project.org/web/packages/checkpoint/vignettes/checkpoint.html</a></li>
<li><em>packrat</em>: <a href="https://rstudio.github.io/packrat/" class="uri">https://rstudio.github.io/packrat/</a></li>
</ul>
<p>The instructor expects students to discuss with their supervisors to identify if those packages are potentially useful for their projects.</p>
</div>
</div>
</div>
</div>
<div id="chapter-5" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Chapter 5</h1>
<div id="introduction-6" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Introduction</h2>
<p>This chapter is subdivided into two parts as follows:</p>
<ul>
<li><a href="#getpub"><strong>PART A:</strong></a> Getting published.</li>
<li><strong>PART B:</strong> Writing papers in R Markdown.</li>
</ul>
</div>
<div id="getpub" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Getting published</h2>
<div id="why-publish" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Why publish?</h3>
<p><strong>Publishing research results is the one thing that unites scientists across all disciplines</strong>, and it is a necessary part of the scientific process. You can have the best ideas in the world, but if you don’t communicate them clearly enough to be published, your work won’t be acknowledged by the scientific community.</p>
<p>By publishing you are achieving three key goals for yourself and the larger scientific endeavor:</p>
<ul>
<li>Disseminating your research.</li>
<li>Advancing your career.</li>
<li>Advancing science.</li>
</ul>
<p>In biology, publishing research is equal to journal articles.</p>
</div>
<div id="literature-and-web-resources-2" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Literature and web resources</h3>
<p>This chapter is mostly based on the following books, publications and web resources:</p>
<ul>
<li><span class="citation"><a href="#ref-Allen" role="doc-biblioref">Allen et al.</a> (<a href="#ref-Allen" role="doc-biblioref">2014</a>)</span> – Comment published in <em>Nature</em> advocating for a “taxonomy” of author roles.</li>
<li><span class="citation"><a href="#ref-GetPub" role="doc-biblioref">British Ecological Society</a> (<a href="#ref-GetPub" role="doc-biblioref">2014b</a>)</span> – A Guide to Getting Published in Ecology and Evolution published by the <a href="https://www.britishecologicalsociety.org">British Ecological Society</a>.</li>
<li><span class="citation"><a href="#ref-Margaret_OConnor" role="doc-biblioref">Cargill and O’Connor</a> (<a href="#ref-Margaret_OConnor" role="doc-biblioref">2011</a>)</span> – A book entitled “Writing Scientific Research Articles: Strategy and Steps” available to download <a href="http://www.idemployee.id.tue.nl/g.w.m.rauterberg/lecturenotes/2009-Writing_Scientific_Research_Articles.pdf">here</a>.</li>
<li>The Committee on Publication Ethics (COPE) website for general information on publishing ethics (<a href="http://publicationethics.org/" class="uri">http://publicationethics.org/</a>).</li>
<li>COPE: The guide entitled “How to handle authorship disputes: a guide for new researchers” available for download here: <a href="http://publicationethics.org/files/2003pdf12_0.pdf" class="uri">http://publicationethics.org/files/2003pdf12_0.pdf</a></li>
<li><span class="citation"><a href="#ref-Fox2015" role="doc-biblioref">Fox and Burns</a> (<a href="#ref-Fox2015" role="doc-biblioref">2015</a>)</span> – A publication investigating the relationship between manuscript title structure and success in Ecology.</li>
<li>Moore, A. An eBook entitled “Writing Science Well: Techniques, tips and pitfalls” available to download here: <a href="http://www.wiley.com/legacy/wileyblackwell/gmspdfs/69204eBookECR/#/1/" class="uri">http://www.wiley.com/legacy/wileyblackwell/gmspdfs/69204eBookECR/#/1/</a></li>
<li>The Wiley Author Webinars website is full of seminars covering topics such as: How to get published; How to write for scientific publications; Grant funding tips; Understand the peer review process; Improve article/publication discoverability; Ethics in publishing; Open Access; Time management skills. Available here: <a href="https://authorservices.wiley.com/author-resources/Journal-Authors/Prepare/webinars/index.html" class="uri">https://authorservices.wiley.com/author-resources/Journal-Authors/Prepare/webinars/index.html</a></li>
</ul>
</div>
<div id="know-your-message" class="section level3" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Know your message</h3>
<p>Before beginning writing your journal article and thinking where to submit it, it is important to thoroughly understand your own research and <strong>know the key conclusion you want to communicate</strong> (see <a href="#chap3">chapter 3</a>). In other words, <strong>what is your take home message?</strong></p>
<p>Consider your conclusion and ask yourself, is it:</p>
<ul>
<li>New and interesting?</li>
<li>Contributing to a hot topic?</li>
<li>Providing solutions to difficult problems?</li>
</ul>
<p>If you can answer ‘<em>yes</em>’ to all three, you have a good foundation message for a paper.</p>
<p>Shape the whole narrative of your paper around this message.</p>
</div>
<div id="steps-towards-getting-your-research-published" class="section level3" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Steps towards getting your research published</h3>
<p>Once you know your message, getting your research published will be a four steps process:</p>
<ul>
<li>Step 1: Selecting your journal.</li>
<li>Step 2: Writing your manuscript.</li>
<li>Step 3: Submitting your manuscript.</li>
<li>Step 4: Acceptance and publication.</li>
</ul>
<p>Each step will be discussed below. Please seek support from your supervisor to learn more about specifics from you field.</p>
</div>
<div id="step-1-selecting-your-journal" class="section level3" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> Step 1: Selecting your journal</h3>
<p>To target the best journal to publish your research, you need to ask yourself <strong>what audience do I want my paper to reach?</strong></p>
<p>Your manuscript should be tailored to the journal you want to submit to in terms of content and in terms of style (as outlined in journals’ author guidelines). To confirm that a journal is the best outlet to publish your research ask yourself this question: can I relate my research to other papers published in this journal?</p>
<p>Here are some things to consider when choosing which journal to submit to:</p>
<div id="journal-aims-and-scope" class="section level4" number="5.2.5.1">
<h4><span class="header-section-number">5.2.5.1</span> Journal aims and scope</h4>
<p>Look closely at what the journal publishes; manuscripts are often rejected on the basis that they would be more suitable for another journal. There can be crossover between different journals’ aims and scope – differences may be subtle, but all important when it comes to getting accepted.</p>
<p>Do you want your article read by a more specialist audience working on closely related topics to yours, or researchers within your broader discipline?</p>
<p><strong>Once you have decided which journal you are most interested in, make sure that you tailor the article according to its aims and scope.</strong></p>
</div>
<div id="editors-and-editorial-boards" class="section level4" number="5.2.5.2">
<h4><span class="header-section-number">5.2.5.2</span> Editors and editorial boards</h4>
<p>It is a good sign if you recognize the names of the editors and editorial board members of a journal from the work you have already encountered (even better if they contributed to some of the references cited in your manuscript). Research who would likely deal with your paper if you submitted to a journal and find someone who would appreciate reading your paper. You can suggest handling editors in your cover letter or in the submission form, if it allows, but be aware that journals do not have to follow your suggestions and/or requests.</p>
</div>
<div id="impact-factor-and-other-metrics" class="section level4" number="5.2.5.3">
<h4><span class="header-section-number">5.2.5.3</span> Impact factor and other metrics</h4>
<p>Impact factors are the one unambiguous measure widely used to compare journal quality based on citations the journal receives. However, other metrics are becoming more common, e.g. altmetric score measuring the impact of individual articles through online activity (shares on different social media platforms etc.), or article download figures listed next to the published paper.</p>
<p>None of the metrics described here are an exact measure of the quality of the journal or published research. You will have to decide which of these metrics (if any) matter most to your work or your funders and institutions.</p>
</div>
<div id="open-access" class="section level4" number="5.2.5.4">
<h4><span class="header-section-number">5.2.5.4</span> Open access</h4>
<p>Do you need to publish open access (OA)? Some funders mandate it and grant money often has an amount earmarked to cover the article processing charge (APC) required for Gold OA. Some universities have established agreements with publishers whereby their staff get discounts on APCs when publishing in certain journals (or even a quota of manuscripts that can be published for “free” on a yearly basis). If you do not have grant funding, check whether your university or department has got an OA fund that you could tap into.</p>
<p>However, if you are not mandated to publish OA by your funder and/or you do not have the funds to do so, <strong>your paper will still reach your target audience if you select the right journal for your paper. Remember, you can share your paper over email.</strong></p>
</div>
<div id="author-guidelines" class="section level4" number="5.2.5.5">
<h4><span class="header-section-number">5.2.5.5</span> Author guidelines</h4>
<p>Author guidelines will outline the journal’s requirements for submissions:</p>
<ul>
<li>Aims and scope.</li>
<li>Formatting requirements (incl. words limit, numbers of figures, tables, references).</li>
<li>Journal policies (e.g. on data sharing and citation).</li>
</ul>
<p>Always follow the author guidelines, stick to the word limit and tailor your manuscript accordingly. <strong>Remember that papers can be rejected immediately if they do not meet the author guidelines.</strong></p>
</div>
<div id="time-to-publication" class="section level4" number="5.2.5.6">
<h4><span class="header-section-number">5.2.5.6</span> Time to publication</h4>
<p>The length of time a paper takes to be peer reviewed does not correlate to the quality of peer review, but rather reflects the resources a journal has to manage the process (e.g. do they have paid editorial staff or is it managed by full-time academics?).</p>
<p>Journals usually give their average time to a decision on their website, so take note of this if time is a consideration for you.</p>
<p>Some journals also make it clear that they are reviewing for soundness of science rather than novelty and will therefore often have a faster review process (e.g. <em>PLoS ONE</em>).</p>
</div>
<div id="ethics" class="section level4" number="5.2.5.7">
<h4><span class="header-section-number">5.2.5.7</span> Ethics</h4>
<p>Ethics can be divided into two groups:</p>
<ul>
<li><strong>Research ethics:</strong> this term includes aspects such as how you manage sensitive species information, whether you adhere to animal welfare guidelines and regulations or how you deal with data protection.</li>
<li><strong>Publication ethics:</strong> this term concerns practices around the publication process. Standards set across scholarly publishing help define good practice and identify cases of misconduct. The Committee on Publication Ethics (COPE) provides the main forum for advice on ethics within scholarly publishing and has issued several sets of guidelines that help journals, editors and publishers handle cases of misconduct such as data fabrication, peer review fraud, plagiarism, etc.</li>
</ul>
<p>As an author, it helps if you are familiar with what constitutes good practices and what is considered unacceptable. Please see section “Used literature &amp; web resources” for more details on this topic.</p>
</div>
<div id="authorship" class="section level4" number="5.2.5.8">
<h4><span class="header-section-number">5.2.5.8</span> Authorship</h4>
<p>Start talking about authorship and author order for your paper with collaborators at an early stage – before submitting and ideally before writing the paper. To deal with potential issues, ask yourself the question: <strong>Who will do what?</strong></p>
<p>Some journals are now encouraging ‘authorship contribution statements’ so check the journal guidelines to see if this is required and how to format it. Here is an example of an author contributions paragraph:</p>
<p><em>F.F., N.A.B. and S.B. designed study; F.F., E.B., S.P.B., J.M., and S.B. compiled data; F.F., S.B. and J.M. performed analyses; S.I.B., P.M.H., A.L., D.P.L., S.M., H.R., C.R., D.W.S., and P.T. provided material and/or sequences; F.F., J.M. and S.B. wrote the manuscript; all authors critically read and revised the manuscript, and approved the final submitted version.</em></p>
</div>
</div>
<div id="step-2-writing-your-manuscript" class="section level3" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> Step 2: Writing your manuscript</h3>
<div id="planning-to-write" class="section level4" number="5.2.6.1">
<h4><span class="header-section-number">5.2.6.1</span> Planning to write</h4>
<p>Develop a narrative that leads to your main conclusion and develop a backbone around that narrative. The narrative should progress logically, which does not necessarily mean chronologically. Work out approximate word counts for each section to help manage the article structure and keep you on track for word limits.</p>
<p>It is important to <strong>set aside enough time to write your manuscript and – importantly – enough time to edit</strong>, which may actually take longer than the writing itself.</p>
</div>
<div id="structure" class="section level4" number="5.2.6.2">
<h4><span class="header-section-number">5.2.6.2</span> Structure</h4>
<p>The article structure will be defined in the author guidelines, but if the journal’s guidelines permit it, there may be scope to use your own subheadings. <strong>By breaking down your manuscript into smaller sections, you will be communicating your message in a much more digestible form.</strong></p>
<p>Use subheadings to shape your narrative and write each subheading in statement form (e.g. ecological variables do not predict genome size variation).</p>
</div>
<div id="title" class="section level4" number="5.2.6.3">
<h4><span class="header-section-number">5.2.6.3</span> Title</h4>
<p><strong>The title is the most visible part of your paper and it should thus clearly communicates your key message.</strong> Pre-publication, reviewers base their decision on whether to review a paper on the quality of the title and abstract. Post-publication, if you publish in a subscription journal and not OA, the title and abstract are the only freely available parts of your paper, which will turn up in search engines and thus reach the widest audience. <strong>A good title will help you get citations and may even be picked up by the press.</strong></p>
<p>Draft a title before you write your manuscript to help focusing your paper. The title needs to be informative and interesting to make it stand out to reviewers and subsequently readers. Some key tips for a successful title include:</p>
<ul>
<li><strong>Write it in statement form.</strong> When scanning papers, most people skip to the last sentence of the abstract to look for the key message, so make that sentence your title.</li>
<li><strong>Keep it around 15 words</strong> – any longer or shorter and it has more chance of being rejected at peer review.</li>
<li><strong>Use punctuation to split the main message</strong> and qualifier/subtitle e.g. ‘Feeding evolution of a herbivore influences an arthropod community through plants: implications for plant-mediated eco-evolutionary feedback loop.’</li>
<li><strong>Keep it general</strong> – readers prefer titles that emphasize broader conceptual or comparative issues, and these titles fare better both pre- and post-publication than papers with organism-specific titles. Try to avoid using species names, put them in the abstract and keywords instead.</li>
<li><strong>Do not use abbreviations</strong> even if they are familiar in your field. You should keep a broad audience in mind.</li>
<li>Do not use phrases such as ‘The effect of…,’ ‘The involvement of….’ These phrases give the reader scope to question your message – instead tell the reader what they are being told.</li>
</ul>
</div>
<div id="abstract" class="section level4" number="5.2.6.4">
<h4><span class="header-section-number">5.2.6.4</span> Abstract</h4>
<p><strong>Write your abstract after you have written your paper, when you are fully aware of the narrative of your paper.</strong> After the title, the abstract is the most read part of your paper. Abstracts are freely available and affect how discoverable your article is via search engines.</p>
<p>Given its importance, your abstract should:</p>
<ul>
<li>Articulate your new and interesting key message.</li>
<li>Outline the methods and results.</li>
<li>Contextualize the work.</li>
<li>Highlight how your research contributes to the field and its future implications.</li>
<li>Have the last sentence communicating the key message.</li>
</ul>
</div>
<div id="writing-style" class="section level4" number="5.2.6.5">
<h4><span class="header-section-number">5.2.6.5</span> Writing style</h4>
<p><strong>Writing with clarity, simplicity and accuracy</strong> takes practice and we can all get carried away with what we think is ‘academic writing’ (i.e. long words and jargon) but good science speaks for itself. Write short sentences (ca. 12 words on average).</p>
<p><strong>Every extra word you write is another word for a reviewer to disagree with.</strong> Single out the narrative that leads to your main conclusion and write that – it is easy to get side tracked with lots of interesting avenues distracting from your work, but by including those in your paper, you are inviting more criticism from reviewers.</p>
<p>Write in an active, positive voice (e.g. ‘we found this…’ ‘we did this…’) and be direct so that your message is clear. Ambiguous writing is another invitation for reviewers to disagree with you.</p>
<p>In your introduction, state that <strong>your research is timely, important, and why</strong>. Begin each section with that section’s key message and end each section with that message again plus further implications. This will place your work in the broader context that high-quality journals like.</p>
<p>Draft and redraft your work to ensure it flows well and your message is clear and focused throughout. While doing this process, keep the reader in mind at all times (to have a critical look on your research and its presentation).</p>
</div>
<div id="keywords" class="section level4" number="5.2.6.6">
<h4><span class="header-section-number">5.2.6.6</span> Keywords</h4>
<p>Keywords are used by readers to discover your paper. You will increase chances of your paper being discovered through search engines by using them strategically throughout your paper – this is search engine optimization (SEO).</p>
<p>Think of the words you would search for to bring up your paper in a Google search. Try it and see what comes up – are there papers that cover similar research to your own?</p>
<p>Build up a list of 15–20 terms relevant to your paper and divide them into two groups:</p>
<ul>
<li>A core group of around 5 keywords,</li>
<li>A larger group of secondary keywords.</li>
</ul>
<p>Place your core keywords in the title, abstract and subheadings, and the secondary keywords throughout the text and in figures and tables. Repeat keywords in the abstract and text naturally.</p>
</div>
<div id="references" class="section level4" number="5.2.6.7">
<h4><span class="header-section-number">5.2.6.7</span> References</h4>
<p>Reference all sources and do it as you go along (e.g. copy the BibTeX citation into a reference file; see <a href="#bib">chapter 1 part B</a>), then tidy them once the paper is complete.</p>
<p>Make sure that most of your references are recent to demonstrate both that you have a good understanding of current literature, and that your research is relevant to current topics.</p>
</div>
<div id="figures-and-tables" class="section level4" number="5.2.6.8">
<h4><span class="header-section-number">5.2.6.8</span> Figures and tables</h4>
<p><strong>Figures and tables enhance your paper by communicating results or data concisely</strong> (more on this topic in chapters 9 and 10).</p>
<p>Use figures and tables to maintain the flow of your narrative – e.g. instead of trying to describe patterns in your results, create a figure and say ‘see Fig. 1.’ Not only does this keep your word count down, but a well-designed figure can replace 1000 words!</p>
<p>Figures are useful for communicating overall trends and shapes, allowing simple comparisons between fewer elements. Tables should be used to display precise data values that require comparisons between many different elements.</p>
<p>Figure captions and table titles should explain what is presented and highlight the key message of this part of your narrative – the figure/table and its caption/title should be understandable in isolation from the rest of your manuscript.</p>
<p>Check the journal’s author guidelines for details on table and figure formatting, appropriate file types, number of tables and figures allowed and any other specifications that may apply. Material presented in chapter 1 part C can help you produce figures meeting journal expectations.</p>
</div>
<div id="editing" class="section level4" number="5.2.6.9">
<h4><span class="header-section-number">5.2.6.9</span> Editing</h4>
<p>Once you have finished writing your manuscript, put it on ice for a week so you come back to it with fresh eyes. Take your time to read it through. Editing can take more time than you expect, but this is your opportunity to fine-tune and submit the best paper possible. Don’t hesitate to seek support from your thesis committee to fasten and streamline this process.</p>
<p>Key things to look out for when editing include:</p>
<ul>
<li>Spelling and grammar – a surprising amount of errors slip through. If you are a non-native English speaker, ask a native speaker, ideally a colleague who knows a little bit about the subject, to read it through, or use a language-editing service if you have the funds to do so.</li>
<li>Make sure all statements and assumptions are explained.</li>
<li>Remove redundant words or phrases – keep it concise and jargon-free to avoid diluting your message.</li>
<li>Abbreviations – check that they have been expanded on the first use.</li>
<li>Acknowledgements – make sure all funders are clearly mentioned and that all people who contributed in any way are acknowledged.</li>
<li>Keywords – they should be consistent, evenly spaced throughout the text and placed at key points in your manuscript e.g. subheadings.</li>
<li>Make sure you have specifically dealt with the hypothesis set out in the introduction – you’d be surprised at the number of papers submitted that don’t!</li>
<li>Circulate the manuscript to your co-authors to get their comments and final approval before submission.</li>
</ul>
</div>
</div>
<div id="step-3-submitting-your-manuscript" class="section level3" number="5.2.7">
<h3><span class="header-section-number">5.2.7</span> Step 3: Submitting your manuscript</h3>
<p>You are now ready to submit your paper to your chosen journal. Each journal will have a different submission procedure that you will have to adhere to, and most manage their submissions through online submission systems (e.g. ScholarOne Manuscripts).</p>
<p><strong>Only submit your paper for consideration to one journal at a time</strong> otherwise you will be breaching publishing ethics.</p>
<div id="cover-letters" class="section level4" number="5.2.7.1">
<h4><span class="header-section-number">5.2.7.1</span> Cover letters</h4>
<p>A great cover letter can set the stage towards convincing editors to send your paper for review. Write a concise and engaging letter addressed to the editor-in-chief, who may not be an expert in your field or sub-field.</p>
<p>The following points should be covered in your cover letter:</p>
<ul>
<li>State your key message and why your paper is important and relevant to the journal.</li>
<li>State that your paper is not under review in another journal and hasn’t been published before (although you will most likely adhere to that during the submission process and if it is the case you then don’t need to mention this in the cover letter).</li>
<li>The cover letter should be shorter than your abstract and be written in less technical language.</li>
<li>Use it to recommend reviewers (include their emails) and/or a relevant handling editor. Pick suggested reviewers with a good reputation to demonstrate both your knowledge of the field and your belief that your paper can stand up to their scrutiny.</li>
<li>State any potential conflict of interest with other teams and blacklist potential reviewers.</li>
</ul>
</div>
<div id="handling-revisions" class="section level4" number="5.2.7.2">
<h4><span class="header-section-number">5.2.7.2</span> Handling revisions</h4>
<p>Very rarely is a paper immediately accepted – almost all papers go through few rounds of reviews before they get published.</p>
<p>If a decision comes back asking for revisions you should reply to all comments politely. Here are some tips on handling reviewer comments and revising your paper:</p>
<ul>
<li>Look at the reviewer comments with scrutiny and make a list of all the points that need to be addressed.</li>
<li>Start with the minor revisions such as spelling, grammar, inconsistencies – these are often the most numerous but the easiest to correct.</li>
<li>If you disagree with certain comments, disagree politely and with evidence. Do not skip over them when writing your reply.</li>
<li>If things can’t be dealt with in this paper then explain that to the editor – reviewers may try to push their own agenda e.g. ‘why don’t you write this paper instead,’ but you have the right to disagree if you don’t feel it is appropriate to deal with this in your paper.</li>
<li>Respond to comments as thoroughly as you can.</li>
<li>Include a point-by-point response to the reviewer comments in the relevant section of the online system.</li>
</ul>
</div>
<div id="handling-rejection" class="section level4" number="5.2.7.3">
<h4><span class="header-section-number">5.2.7.3</span> Handling rejection</h4>
<p>Reviewers are volunteers, but the service they provide is invaluable – by undergoing peer review, regardless of the outcome, you are receiving some of the best advice from leading experts for free. With this in mind, any feedback you get will be constructive in the end and will lead you on the way to a successful publishing portfolio.</p>
<p>Keep in mind that <strong>feedback is another person’s opinion on what you have done, not on who you are</strong>, and it is up to you to decide what to do with it.</p>
<p>If your paper is rejected look at the reviewer’s comments and use their feedback to improve your paper before resubmitting it.</p>
</div>
<div id="appeals" class="section level4" number="5.2.7.4">
<h4><span class="header-section-number">5.2.7.4</span> Appeals</h4>
<p>If you are unhappy with a reject decision, 99.9% of the time, move on. However, don’t be afraid of appealing if you have well-founded concerns or think that the reviewers have done a bad job. There are instances where journals grant your appeal and allow you to revise your paper, but in the large majority of cases, the decision to reject will be upheld.</p>
</div>
</div>
<div id="step-4-acceptance-and-publication" class="section level3" number="5.2.8">
<h3><span class="header-section-number">5.2.8</span> Step 4: Acceptance and publication</h3>
<p>Congratulations! By now you should have an acceptance email from the editor-in-chief in your inbox. The process from here will vary according to each journal, but the post-acceptance workflow is usually as follows:</p>
<ul>
<li>Your paper will be published online, unedited, but citable as an ‘Accepted Article’ within a week of acceptance (usually a DOI is assigned and your paper is citable at this stage).</li>
<li>Your paper will be copy-edited. The level of copy-editing your paper will receive will vary according to each journal, so it is worth checking your proof thoroughly.</li>
<li>Your paper will be typeset and a proof will be sent to you for checking. Author queries will be marked on the proof. At this stage, only minor corrections related to the typesetting are allowed.</li>
<li>Your finalized proof will be published online in ‘Early View.’</li>
<li>Finally, according to the journal’s schedule, your paper will be placed in an issue (or not if it is an online only journal, e.g. <em>Scientific Reports</em>).</li>
</ul>
<p>It might be then time to coordinate the publication of a press release or post the link of your article on social media to share your joy!</p>
</div>
</div>
</div>
<div id="references-1" class="section level1" number="6">
<h1><span class="header-section-number">6</span> References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Allen" class="csl-entry">
<span class="smallcaps">Allen, L.</span>, <span class="smallcaps">J. Scott</span>, <span class="smallcaps">A. Brand</span>, <span class="smallcaps">M. Hlava</span>, and <span class="smallcaps">M. Altman</span>. 2014. Publishing: Credit where credit is due. <em>Nature</em> 508: 312–313.
</div>
<div id="ref-Baker_2016" class="csl-entry">
<span class="smallcaps">Baker, M.</span> 2016. 1,500 scientists lift the lid on reproducibility. <em>Nature</em> 533: 452–454. Available at: <a href="https://doi.org/10.1038/533452a">https://doi.org/10.1038/533452a</a>.
</div>
<div id="ref-DataMan" class="csl-entry">
<span class="smallcaps">British Ecological Society</span> ed. 2014a. A guide to data management in ecology and evolution. British Ecological Society.
</div>
<div id="ref-GetPub" class="csl-entry">
<span class="smallcaps">British Ecological Society</span> ed. 2014b. A guide to getting published in ecology and evolution. British Ecological Society.
</div>
<div id="ref-RepCode" class="csl-entry">
<span class="smallcaps">British Ecological Society</span> ed. 2014c. A guide to reproducible code in ecology and evolution. British Ecological Society.
</div>
<div id="ref-Margaret_OConnor" class="csl-entry">
<span class="smallcaps">Cargill, M.</span>, and <span class="smallcaps">P. O’Connor</span>. 2011. Writing scientific research articles: Strategy and steps. Wiley-Blackwell.
</div>
<div id="ref-Fox2015" class="csl-entry">
<span class="smallcaps">Fox, C.W.</span>, and <span class="smallcaps">C.S. Burns</span>. 2015. The relationship between manuscript title structure and success: Editorial decisions and citation performance for an ecological journal. <em>Ecology and Evolution</em> 5: 1970–1980. Available at: <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/ece3.1480">https://onlinelibrary.wiley.com/doi/abs/10.1002/ece3.1480</a>.
</div>
<div id="ref-Kerr1998" class="csl-entry">
<span class="smallcaps">Kerr, N.L.</span> 1998. HARKing: Hypothesizing after the results are known. <em>Personality and Social Psychology Review</em> 2: 196–217. Available at:<a href=" https://doi.org/10.1207/s15327957pspr0203_4"> https://doi.org/10.1207/s15327957pspr0203_4</a>.
</div>
<div id="ref-Munafo" class="csl-entry">
<span class="smallcaps">Munafo, M.R.</span>, <span class="smallcaps">B.A. Nosek</span>, <span class="smallcaps">D.V.M. Bishop</span>, <span class="smallcaps">K.S. Button</span>, <span class="smallcaps">C.D. Chambers</span>, <span class="smallcaps">N.P. du Sert</span>, <span class="smallcaps">U. Simonsohn</span>, et al. 2017. <span class="nocase">A manifesto for reproducible science</span>. <em><span>Nature human behaviour</span></em> <span>1</span>: 0021.
</div>
<div id="ref-Nosek1422" class="csl-entry">
<span class="smallcaps">Nosek, B.A.</span>, <span class="smallcaps">G. Alter</span>, <span class="smallcaps">G.C. Banks</span>, <span class="smallcaps">D. Borsboom</span>, <span class="smallcaps">S.D. Bowman</span>, <span class="smallcaps">S.J. Breckler</span>, <span class="smallcaps">S. Buck</span>, et al. 2015. Promoting an open research culture. <em>Science</em> 348: 1422–1425. Available at: <a href="http://science.sciencemag.org/content/348/6242/1422">http://science.sciencemag.org/content/348/6242/1422</a>.
</div>
<div id="ref-Nosek2600" class="csl-entry">
<span class="smallcaps">Nosek, B.A.</span>, <span class="smallcaps">C.R. Ebersole</span>, <span class="smallcaps">A.C. DeHaven</span>, and <span class="smallcaps">D.T. Mellor</span>. 2018. The preregistration revolution. <em>Proceedings of the National Academy of Sciences</em> 115: 2600–2606. Available at: <a href="http://www.pnas.org/content/115/11/2600">http://www.pnas.org/content/115/11/2600</a>.
</div>
<div id="ref-Nosek2012" class="csl-entry">
<span class="smallcaps">Nosek, B.A.</span>, <span class="smallcaps">J.R. Spies</span>, and <span class="smallcaps">M. Motyl</span>. 2012. Scientific utopia: II. Restructuring incentives and practices to promote truth over publishability. <em>Perspectives on Psychological Science</em> 7: 615–631. Available at: <a href="https://doi.org/10.1177/1745691612459058">https://doi.org/10.1177/1745691612459058</a>.
</div>
<div id="ref-Smith2016" class="csl-entry">
<span class="smallcaps">Smith, J.F.</span>, <span class="smallcaps">T.H. Parker</span>, <span class="smallcaps">S. Nakagawa</span>, <span class="smallcaps">J. Gurevitch</span>, <span class="smallcaps">Ecology</span>, and <span class="smallcaps">T.(Tools. for T. in Evolution) Working Group</span>. 2016. Promoting transparency in evolutionary biology and ecology. <em>Systematic Botany</em> 41: 495–497. Available at: <a href="http://www.bioone.org/doi/abs/10.1600/036364416X692262">http://www.bioone.org/doi/abs/10.1600/036364416X692262</a>.
</div>
<div id="ref-Troudet2018" class="csl-entry">
<span class="smallcaps">Troudet, J.</span>, <span class="smallcaps">R. Vignes-Lebbe</span>, <span class="smallcaps">P. Grandcolas</span>, and <span class="smallcaps">F. Legendre</span>. 2018. The increasing disconnection of primary biodiversity data from specimens: How does it happen and how to handle it? <em>Systematic Biology</em>syy044. Available at: <a href="http://dx.doi.org/10.1093/sysbio/syy044">http://dx.doi.org/10.1093/sysbio/syy044</a>.
</div>
<div id="ref-wickham2014advanced" class="csl-entry">
<span class="smallcaps">Wickham, H.</span> 2014. <span>Advanced R</span>. Taylor &amp; Francis. Available at: <a href="https://books.google.com/books?id=PFHFNAEACAAJ">https://books.google.com/books?id=PFHFNAEACAAJ</a>.
</div>
<div id="ref-bookdown2016" class="csl-entry">
<span class="smallcaps">Xie, Y.</span> 2016. Bookdown: Authoring books and technical documents with <span>R</span> markdown. Chapman; Hall/CRC, Boca Raton, Florida. Available at: <a href="https://github.com/rstudio/bookdown">https://github.com/rstudio/bookdown</a>.
</div>
<div id="ref-R-bookdown" class="csl-entry">
<span class="smallcaps">Xie, Y.</span> 2020a. Bookdown: Authoring books and technical documents with r markdown. Available at: <a href="https://github.com/rstudio/bookdown">https://github.com/rstudio/bookdown</a>.
</div>
<div id="ref-knitr2015" class="csl-entry">
<span class="smallcaps">Xie, Y.</span> 2015. Dynamic documents with <span>R</span> and knitr. 2nd ed. Chapman; Hall/CRC, Boca Raton, Florida. Available at: <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
<div id="ref-R-knitr" class="csl-entry">
<span class="smallcaps">Xie, Y.</span> 2020b. Knitr: A general-purpose package for dynamic report generation in r. Available at: <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
<div id="ref-rmarkdown2018" class="csl-entry">
<span class="smallcaps">Xie, Y.</span>, <span class="smallcaps">J.J. Allaire</span>, and <span class="smallcaps">G. Grolemund</span>. 2018. R markdown: The definitive guide. Chapman; Hall/CRC, Boca Raton, Florida. Available at: <a href="https://bookdown.org/yihui/rmarkdown">https://bookdown.org/yihui/rmarkdown</a>.
</div>
</div>
</div>
<div id="appendix-appendices" class="section level1 unnumbered">
<h1>Appendices</h1>
</div>
<div id="appendix-1" class="section level1" number="7">
<h1><span class="header-section-number">A</span> Appendix 1</h1>
<p>Citations of all R packages used to generate this report.</p>
<p>[1] J. Allaire, Y. Xie, J. McPherson, et al. <em>rmarkdown: Dynamic
Documents for R</em>. R package version 2.6. 2020. &lt;URL:
<a href="https://github.com/rstudio/rmarkdown" class="uri">https://github.com/rstudio/rmarkdown</a>&gt;.</p>
<p>[2] C. Boettiger. <em>knitcitations: Citations for Knitr Markdown Files</em>.
R package version 1.0.10. 2019. &lt;URL:
<a href="https://github.com/cboettig/knitcitations" class="uri">https://github.com/cboettig/knitcitations</a>&gt;.</p>
<p>[3] C. Glur. <em>data.tree: General Purpose Hierarchical Data Structure</em>.
R package version 1.0.0. 2020. &lt;URL: <a href="http://github.com/gluc/data.tree" class="uri">http://github.com/gluc/data.tree</a>&gt;.</p>
<p>[4] R. Iannone. <em>DiagrammeR: Graph/Network Visualization</em>. R package
version 1.0.6.1. 2020. &lt;URL:
<a href="https://github.com/rich-iannone/DiagrammeR" class="uri">https://github.com/rich-iannone/DiagrammeR</a>&gt;.</p>
<p>[5] M. C. Koohafkan. <em>kfigr: Integrated Code Chunk Anchoring and
Referencing for R Markdown Documents</em>. R package version 1.2. 2015.
&lt;URL: <a href="https://github.com/mkoohafkan/kfigr" class="uri">https://github.com/mkoohafkan/kfigr</a>&gt;.</p>
<p>[6] R Core Team. <em>R: A Language and Environment for Statistical
Computing</em>. R Foundation for Statistical Computing. Vienna, Austria,
2019. &lt;URL: <a href="https://www.R-project.org/" class="uri">https://www.R-project.org/</a>&gt;.</p>
<p>[7] H. Wickham and J. Bryan. <em>usethis: Automate Package and Project
Setup</em>. R package version 2.0.0. 2020. &lt;URL:
<a href="https://CRAN.R-project.org/package=usethis" class="uri">https://CRAN.R-project.org/package=usethis</a>&gt;.</p>
<p>[8] H. Wickham, R. François, L. Henry, et al. <em>dplyr: A Grammar of
Data Manipulation</em>. R package version 1.0.2. 2020. &lt;URL:
<a href="https://CRAN.R-project.org/package=dplyr" class="uri">https://CRAN.R-project.org/package=dplyr</a>&gt;.</p>
<p>[9] H. Wickham, J. Hester, and W. Chang. <em>devtools: Tools to Make
Developing R Packages Easier</em>. R package version 2.3.2. 2020. &lt;URL:
<a href="https://CRAN.R-project.org/package=devtools" class="uri">https://CRAN.R-project.org/package=devtools</a>&gt;.</p>
<p>[10] Y. Xie. <em>bookdown: Authoring Books and Technical Documents with R
Markdown</em>. ISBN 978-1138700109. Boca Raton, Florida: Chapman and
Hall/CRC, 2016. &lt;URL: <a href="https://github.com/rstudio/bookdown" class="uri">https://github.com/rstudio/bookdown</a>&gt;.</p>
<p>[11] Y. Xie. <em>bookdown: Authoring Books and Technical Documents with R
Markdown</em>. R package version 0.21. 2020. &lt;URL:
<a href="https://github.com/rstudio/bookdown" class="uri">https://github.com/rstudio/bookdown</a>&gt;.</p>
<p>[12] Y. Xie. <em>Dynamic Documents with R and knitr</em>. 2nd. ISBN
978-1498716963. Boca Raton, Florida: Chapman and Hall/CRC, 2015. &lt;URL:
<a href="https://yihui.org/knitr/" class="uri">https://yihui.org/knitr/</a>&gt;.</p>
<p>[13] Y. Xie. <em>formatR: Format R Code Automatically</em>. R package version
1.7. 2019. &lt;URL: <a href="https://github.com/yihui/formatR" class="uri">https://github.com/yihui/formatR</a>&gt;.</p>
<p>[14] Y. Xie. “knitr: A Comprehensive Tool for Reproducible Research in
R.” In: <em>Implementing Reproducible Computational Research</em>. Ed. by V.
Stodden, F. Leisch and R. D. Peng. ISBN 978-1466561595. Chapman and
Hall/CRC, 2014. &lt;URL:
<a href="http://www.crcpress.com/product/isbn/9781466561595" class="uri">http://www.crcpress.com/product/isbn/9781466561595</a>&gt;.</p>
<p>[15] Y. Xie. <em>knitr: A General-Purpose Package for Dynamic Report
Generation in R</em>. R package version 1.30. 2020. &lt;URL:
<a href="https://yihui.org/knitr/" class="uri">https://yihui.org/knitr/</a>&gt;.</p>
<p>[16] Y. Xie, J. Allaire, and G. Grolemund. <em>R Markdown: The Definitive
Guide</em>. ISBN 9781138359338. Boca Raton, Florida: Chapman and Hall/CRC,
2018. &lt;URL: <a href="https://bookdown.org/yihui/rmarkdown" class="uri">https://bookdown.org/yihui/rmarkdown</a>&gt;.</p>
<p>[17] Y. Xie, C. Dervieux, and E. Riederer. <em>R Markdown Cookbook</em>. ISBN
9780367563837. Boca Raton, Florida: Chapman and Hall/CRC, 2020. &lt;URL:
<a href="https://bookdown.org/yihui/rmarkdown-cookbook" class="uri">https://bookdown.org/yihui/rmarkdown-cookbook</a>&gt;.</p>
<p>[18] H. Zhu. <em>kableExtra: Construct Complex Table with kable and Pipe
Syntax</em>. R package version 1.2.1. 2020. &lt;URL:
<a href="https://CRAN.R-project.org/package=kableExtra" class="uri">https://CRAN.R-project.org/package=kableExtra</a>&gt;.</p>
</div>
<div id="appendix-2" class="section level1" number="8">
<h1><span class="header-section-number">B</span> Appendix 2</h1>
<p>Version information about R, the operating system (OS) and attached or R loaded packages. This appendix was generated using <code>sessionInfo()</code>.</p>
<pre><code>## R version 3.6.1 (2019-07-05)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS Mojave 10.14.6
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] DiagrammeR_1.0.6.1   data.tree_1.0.0      kableExtra_1.2.1    
##  [4] dplyr_1.0.2          kfigr_1.2            devtools_2.3.2      
##  [7] usethis_2.0.0        formatR_1.7          knitcitations_1.0.10
## [10] bookdown_0.21        rmarkdown_2.6        knitr_1.30          
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.6         lubridate_1.7.9.2  tidyr_1.1.2        prettyunits_1.1.1 
##  [5] ps_1.5.0           visNetwork_2.0.9   assertthat_0.2.1   rprojroot_2.0.2   
##  [9] digest_0.6.27      R6_2.5.0           plyr_1.8.6         evaluate_0.14     
## [13] httr_1.4.2         highr_0.8          pillar_1.4.7       rlang_0.4.10      
## [17] rstudioapi_0.13    callr_3.5.1        desc_1.2.0         webshot_0.5.2     
## [21] RefManageR_1.2.12  stringr_1.4.0      htmlwidgets_1.5.3  munsell_0.5.0     
## [25] compiler_3.6.1     xfun_0.20          pkgconfig_2.0.3    pkgbuild_1.2.0    
## [29] htmltools_0.5.0    tidyselect_1.1.0   tibble_3.0.4       fansi_0.4.1       
## [33] viridisLite_0.3.0  crayon_1.3.4       withr_2.3.0        jsonlite_1.7.2    
## [37] lifecycle_0.2.0    magrittr_2.0.1     scales_1.1.1       bibtex_0.4.2.3    
## [41] cli_2.2.0          stringi_1.5.3      fs_1.5.0           remotes_2.2.0     
## [45] testthat_3.0.1     xml2_1.3.2         ellipsis_0.3.1     vctrs_0.3.6       
## [49] generics_0.1.0     RColorBrewer_1.1-2 tools_3.6.1        glue_1.4.2        
## [53] purrr_0.3.4        processx_3.4.5     pkgload_1.1.0      yaml_2.2.1        
## [57] colorspace_2.0-0   sessioninfo_1.1.1  rvest_0.3.6        memoise_1.1.0</code></pre>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>What is a Hypothesis? A hypothesis is a tentative, testable answer to a scientific question. Once a scientist has a scientific question they perform a literature review to find out what is already known on the topic. Then this information is used to form a tentative answer to the scientific question. Keep in mind, that the hypothesis also has to be testable since the next step is to do an experiment to determine whether or not the hypothesis is right! A hypothesis leads to one or more predictions that can be tested by experimenting. Predictions often take the shape of “If ____then ____” statements, but do not have to. Predictions should include both an independent variable (the factor you change in an experiment) and a dependent variable (the factor you observe or measure in an experiment). A single hypothesis can lead to multiple predictions.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>GBIF — the Global Biodiversity Information Facility — is an international network and research infrastructure funded by the world’s governments and aimed at providing anyone, anywhere, open access to data about all types of life on Earth.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>Postdiction involves explanation after the fact.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
